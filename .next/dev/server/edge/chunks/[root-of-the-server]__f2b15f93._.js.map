{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\nimport { NextResponse } from 'next/server'\n\n// Define public routes that don't require authentication\nconst isPublicRoute = createRouteMatcher([\n  '/sign-in(.*)',\n  '/sign-up(.*)',\n])\nconst isOnboardingRoute = createRouteMatcher([\n  '/onboarding(.*)'\n])\nconst isApiRoute = createRouteMatcher([\n  '/(api|trpc)(.*)'\n])\n\nexport default clerkMiddleware(async (auth, request) => {\n  if (!isPublicRoute(request)) {\n    await auth.protect()\n    const { sessionClaims } = await auth()\n    const md = (sessionClaims as any)?.publicMetadata || {}\n    const role = String(md?.role || '').toLowerCase()\n    const onboarded = md?.onboarded === true\n    const isSuperAdmin = role === 'super_admin'\n    if (!isSuperAdmin && !onboarded && !isOnboardingRoute(request) && !isApiRoute(request)) {\n      const url = new URL('/onboarding', request.url)\n      return NextResponse.redirect(url)\n    }\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and static files\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAEA,yDAAyD;AACzD,MAAM,gBAAgB,IAAA,wMAAkB,EAAC;IACvC;IACA;CACD;AACD,MAAM,oBAAoB,IAAA,wMAAkB,EAAC;IAC3C;CACD;AACD,MAAM,aAAa,IAAA,wMAAkB,EAAC;IACpC;CACD;uCAEc,IAAA,wMAAe,EAAC,OAAO,MAAM;IAC1C,IAAI,CAAC,cAAc,UAAU;QAC3B,MAAM,KAAK,OAAO;QAClB,MAAM,EAAE,aAAa,EAAE,GAAG,MAAM;QAChC,MAAM,KAAK,AAAC,eAAuB,kBAAkB,CAAC;QACtD,MAAM,OAAO,OAAO,IAAI,QAAQ,IAAI,WAAW;QAC/C,MAAM,YAAY,IAAI,cAAc;QACpC,MAAM,eAAe,SAAS;QAC9B,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,kBAAkB,YAAY,CAAC,WAAW,UAAU;YACtF,MAAM,MAAM,IAAI,IAAI,eAAe,QAAQ,GAAG;YAC9C,OAAO,gMAAY,CAAC,QAAQ,CAAC;QAC/B;IACF;AACF;AAEO,MAAM,SAAS;IACpB,SAAS;QACP,0CAA0C;QAC1C;QACA,4BAA4B;QAC5B;KACD;AACH"}}]
}