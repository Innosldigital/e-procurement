{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\nimport { NextResponse } from 'next/server'\n\nconst isPublicRoute = createRouteMatcher([\n  '/sign-in(.*)',\n  '/sign-up(.*)',\n])\n\nconst isOnboardingRoute = createRouteMatcher([\n  '/onboarding(.*)',\n])\n\nconst isApiRoute = createRouteMatcher([\n  '/(api|trpc)(.*)',\n])\n\nexport default clerkMiddleware(async (auth, request) => {\n  \n  // Allow public routes\n  if (isPublicRoute(request)) {\n    return NextResponse.next()\n  }\n\n  // Protect all other routes\n  await auth.protect()\n\n  const { sessionClaims, userId } = await auth()\n  \n  const claims = sessionClaims as any\n\n  const md = claims?.metadata || {}\n \n  \n  const rawRole = md?.role || ''\n  \n  const normalizedRole = String(rawRole).toLowerCase().replace(/[\\s_-]/g, '')\n  \n  const onboarded = md?.onboarded === true\n  \n  const isSuperAdmin = \n    normalizedRole === 'superadmin' || \n    userId === 'user_35hjSURy4Wv5CPxXRrqfSoCGK7W'\n  \n  const isAdmin = normalizedRole === 'admin'\n\n\n  // Admins and super admins bypass ALL onboarding checks\n  if (isSuperAdmin || isAdmin) {\n    return NextResponse.next()\n  }\n\n\n  // Only non-admin users need onboarding\n  if (!onboarded && !isOnboardingRoute(request) && !isApiRoute(request)) {\n    return NextResponse.redirect(new URL('/onboarding', request.url))\n  }\n\n  return NextResponse.next()\n})\n\nexport const config = {\n  matcher: [\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    '/(api|trpc)(.*)',\n  ],\n}"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,gBAAgB,IAAA,wMAAkB,EAAC;IACvC;IACA;CACD;AAED,MAAM,oBAAoB,IAAA,wMAAkB,EAAC;IAC3C;CACD;AAED,MAAM,aAAa,IAAA,wMAAkB,EAAC;IACpC;CACD;uCAEc,IAAA,wMAAe,EAAC,OAAO,MAAM;IAE1C,sBAAsB;IACtB,IAAI,cAAc,UAAU;QAC1B,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,2BAA2B;IAC3B,MAAM,KAAK,OAAO;IAElB,MAAM,EAAE,aAAa,EAAE,MAAM,EAAE,GAAG,MAAM;IAExC,MAAM,SAAS;IAEf,MAAM,KAAK,QAAQ,YAAY,CAAC;IAGhC,MAAM,UAAU,IAAI,QAAQ;IAE5B,MAAM,iBAAiB,OAAO,SAAS,WAAW,GAAG,OAAO,CAAC,WAAW;IAExE,MAAM,YAAY,IAAI,cAAc;IAEpC,MAAM,eACJ,mBAAmB,gBACnB,WAAW;IAEb,MAAM,UAAU,mBAAmB;IAGnC,uDAAuD;IACvD,IAAI,gBAAgB,SAAS;QAC3B,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAGA,uCAAuC;IACvC,IAAI,CAAC,aAAa,CAAC,kBAAkB,YAAY,CAAC,WAAW,UAAU;QACrE,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,eAAe,QAAQ,GAAG;IACjE;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;QACA;KACD;AACH"}}]
}