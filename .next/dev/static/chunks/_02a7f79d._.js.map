{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/ui/select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6LAAC,6KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,qHAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,6KAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,8OAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;MAxBS;AA0BT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,6LAAC,+KAAsB;kBACrB,cAAA,6LAAC,gLAAuB;YACtB,aAAU;YACV,WAAW,IAAA,qHAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,6LAAC;;;;;8BACD,6LAAC,iLAAwB;oBACvB,WAAW,IAAA,qHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;AAIT;MAjCS;AAmCT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,6LAAC,6KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,sLAA6B;8BAC5B,cAAA,6LAAC,wNAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,6LAAC,iLAAwB;0BAAE;;;;;;;;;;;;AAGjC;MAtBS;AAwBT,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,6LAAC,kLAAyB;QACxB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,6LAAC,uLAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,wOAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;MAhBS;AAkBT,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,6LAAC,yLAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,8OAAe;YAAC,WAAU;;;;;;;;;;;AAGjC;MAhBS"}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/lib/actions/tender-actions.ts"],"sourcesContent":["'use server'\n\nimport { revalidatePath } from 'next/cache'\nimport { auth } from '@clerk/nextjs/server'\nimport dbConnect from '@/lib/mongodb'\nimport { Tender } from '../models/Tender'\n\n\nexport async function getTenders() {\n  try {\n    await dbConnect()\n    const tenders = await Tender.find({})\n      .sort({ createdAt: -1 })\n      .limit(50)\n      .lean()\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(tenders))\n    }\n  } catch (error) {\n    console.error('[v0] Error fetching tenders:', error)\n    return { success: false, error: 'Failed to fetch tenders' }\n  }\n}\n\nexport async function getTenderById(id: string) {\n  try {\n    await dbConnect()\n    const tender = await Tender.findById(id).lean()\n    \n    if (!tender) {\n      return { success: false, error: 'Tender not found' }\n    }\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(tender))\n    }\n  } catch (error) {\n    console.error('[v0] Error fetching tender:', error)\n    return { success: false, error: 'Failed to fetch tender' }\n  }\n}\n\nexport async function awardTender(id: string, supplierId: string) {\n  try {\n    await dbConnect()\n    \n    const now = new Date()\n    const tender = await Tender.findByIdAndUpdate(\n      id,\n      { \n        stage: 'Awarded',\n        keyDates: { closed: now },\n        evaluationSummary: { recommendedSupplier: supplierId },\n        status: 'awarded'\n      },\n      { new: true }\n    ).lean()\n    \n    if (!tender) {\n      return { success: false, error: 'Tender not found' }\n    }\n    \n    revalidatePath('/tenders')\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(tender))\n    }\n  } catch (error) {\n    console.error('[v0] Error awarding tender:', error)\n    return { success: false, error: 'Failed to award tender' }\n  }\n}\n\nexport async function requestRevisedBids(id: string) {\n  try {\n    await dbConnect()\n    \n    const tender = await Tender.findByIdAndUpdate(\n      id,\n      { \n        status: 'revision_requested'\n      },\n      { new: true }\n    ).lean()\n    \n    if (!tender) {\n      return { success: false, error: 'Tender not found' }\n    }\n    \n    revalidatePath('/tenders')\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(tender))\n    }\n  } catch (error) {\n    console.error('[v0] Error requesting revised bids:', error)\n    return { success: false, error: 'Failed to request revised bids' }\n  }\n}\n\nexport async function createTender(data: {\n  title: string\n  type: string\n  category?: string\n  businessUnit?: string\n  region?: string\n  sourcingObjective?: string\n  estimatedValue?: number\n  contractTerm?: string\n  sourcingType?: string\n  invitedSuppliers?: number\n  closeDate?: Date\n}) {\n  try {\n    const { userId } = await auth()\n    \n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n\n    await dbConnect()\n    \n    // Generate tender ID\n    const count = await Tender.countDocuments()\n    const tenderId = `RFP-${(count + 2300).toString()}`\n    \n    const tender = await Tender.create({\n      tenderId,\n      title: data.title,\n      type: data.type,\n      category: data.category,\n      businessUnit: data.businessUnit,\n      region: data.region,\n      sourcingObjective: data.sourcingObjective,\n      estimatedValue: data.estimatedValue,\n      contractTerm: data.contractTerm,\n      sourcingType: data.sourcingType,\n      invitedSuppliers: data.invitedSuppliers,\n      closeDate: data.closeDate,\n      stage: 'Planned',\n      responses: 0,\n      owner: userId,\n      keyDates: {\n        published: new Date(),\n      },\n      timeline: [{\n        event: 'Tender created',\n        date: new Date().toISOString(),\n        owner: userId,\n      }],\n    })\n    \n    revalidatePath('/tenders')\n    revalidatePath('/')\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(tender))\n    }\n  } catch (error) {\n    console.error('[v0] Error creating tender:', error)\n    return { success: false, error: 'Failed to create tender' }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAyGsB,eAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 306, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/create-tender-form.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\r\nimport { X } from 'lucide-react'\r\nimport { createTender } from '@/lib/actions/tender-actions'\r\n\r\ninterface CreateTenderFormProps {\r\n  onClose: () => void\r\n}\r\n\r\nexport function CreateTenderForm({ onClose }: CreateTenderFormProps) {\r\n  const router = useRouter()\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    type: 'RFP',\r\n    category: '',\r\n    businessUnit: '',\r\n    region: '',\r\n    sourcingObjective: '',\r\n    estimatedValue: '',\r\n    contractTerm: '',\r\n    sourcingType: '',\r\n    invitedSuppliers: '',\r\n    closeDate: '',\r\n  })\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setIsSubmitting(true)\r\n\r\n    try {\r\n      const result = await createTender({\r\n        ...formData,\r\n        estimatedValue: formData.estimatedValue ? parseFloat(formData.estimatedValue) : 0,\r\n        invitedSuppliers: formData.invitedSuppliers ? parseInt(formData.invitedSuppliers) : 0,\r\n        closeDate: formData.closeDate ? new Date(formData.closeDate) : undefined,\r\n      })\r\n\r\n      if (result.success) {\r\n        router.refresh()\r\n        onClose()\r\n      } else {\r\n        alert(result.error || 'Failed to create tender')\r\n      }\r\n    } catch (error) {\r\n      console.error('[v0] Error creating tender:', error)\r\n      alert('Failed to create tender')\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  const handleChange = (field: string, value: string) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }))\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm\">\r\n      <div className=\"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-background border rounded-lg shadow-lg\">\r\n        {/* Header */}\r\n        <div className=\"sticky top-0 z-10 flex items-center justify-between border-b bg-background px-6 py-4\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold\">Create new tender</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Plan and publish a sourcing event</p>\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onClose}\r\n            disabled={isSubmitting}\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          {/* Basic Information */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-sm font-semibold\">Basic information</h3>\r\n            \r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"title\">Tender title *</Label>\r\n              <Input\r\n                id=\"title\"\r\n                placeholder=\"e.g., Global marketing automation platform\"\r\n                value={formData.title}\r\n                onChange={(e) => handleChange('title', e.target.value)}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"type\">Tender type *</Label>\r\n                <Select value={formData.type} onValueChange={(value) => handleChange('type', value)}>\r\n                  <SelectTrigger id=\"type\">\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"RFP\">RFP - Request for Proposal</SelectItem>\r\n                    <SelectItem value=\"RFQ\">RFQ - Request for Quotation</SelectItem>\r\n                    <SelectItem value=\"RFI\">RFI - Request for Information</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"category\">Category *</Label>\r\n                <Select value={formData.category} onValueChange={(value) => handleChange('category', value)}>\r\n                  <SelectTrigger id=\"category\">\r\n                    <SelectValue placeholder=\"Select category\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"Marketing & Strategy\">Marketing & Strategy</SelectItem>\r\n                    <SelectItem value=\"IT & Software\">IT & Software</SelectItem>\r\n                    <SelectItem value=\"Facilities & Office\">Facilities & Office</SelectItem>\r\n                    <SelectItem value=\"Logistics\">Logistics</SelectItem>\r\n                    <SelectItem value=\"Professional Services\">Professional Services</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Sourcing Details */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-sm font-semibold\">Sourcing details</h3>\r\n            \r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"businessUnit\">Business unit</Label>\r\n                <Input\r\n                  id=\"businessUnit\"\r\n                  placeholder=\"e.g., Global Marketing\"\r\n                  value={formData.businessUnit}\r\n                  onChange={(e) => handleChange('businessUnit', e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"region\">Region</Label>\r\n                <Select value={formData.region} onValueChange={(value) => handleChange('region', value)}>\r\n                  <SelectTrigger id=\"region\">\r\n                    <SelectValue placeholder=\"Select region\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"Global\">Global</SelectItem>\r\n                    <SelectItem value=\"APAC\">APAC</SelectItem>\r\n                    <SelectItem value=\"EMEA\">EMEA</SelectItem>\r\n                    <SelectItem value=\"NA\">North America</SelectItem>\r\n                    <SelectItem value=\"LATAM\">LATAM</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"sourcingObjective\">Sourcing objective</Label>\r\n              <Textarea\r\n                id=\"sourcingObjective\"\r\n                placeholder=\"Describe the purpose and goals of this tender...\"\r\n                value={formData.sourcingObjective}\r\n                onChange={(e) => handleChange('sourcingObjective', e.target.value)}\r\n                rows={3}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"estimatedValue\">Estimated contract value ($)</Label>\r\n                <Input\r\n                  id=\"estimatedValue\"\r\n                  type=\"number\"\r\n                  placeholder=\"450000\"\r\n                  value={formData.estimatedValue}\r\n                  onChange={(e) => handleChange('estimatedValue', e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"contractTerm\">Contract term</Label>\r\n                <Input\r\n                  id=\"contractTerm\"\r\n                  placeholder=\"e.g., 3-year term\"\r\n                  value={formData.contractTerm}\r\n                  onChange={(e) => handleChange('contractTerm', e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Supplier Selection */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-sm font-semibold\">Supplier selection</h3>\r\n            \r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"sourcingType\">Sourcing type</Label>\r\n                <Select value={formData.sourcingType} onValueChange={(value) => handleChange('sourcingType', value)}>\r\n                  <SelectTrigger id=\"sourcingType\">\r\n                    <SelectValue placeholder=\"Select type\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"Competitive RFP\">Competitive RFP - 5 invited suppliers</SelectItem>\r\n                    <SelectItem value=\"Competitive RFQ\">Competitive RFQ - 3 invited suppliers</SelectItem>\r\n                    <SelectItem value=\"Open\">Open tender</SelectItem>\r\n                    <SelectItem value=\"Negotiated\">Negotiated tender</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"invitedSuppliers\">Number of invited suppliers</Label>\r\n                <Input\r\n                  id=\"invitedSuppliers\"\r\n                  type=\"number\"\r\n                  placeholder=\"5\"\r\n                  value={formData.invitedSuppliers}\r\n                  onChange={(e) => handleChange('invitedSuppliers', e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"closeDate\">Tender close date</Label>\r\n              <Input\r\n                id=\"closeDate\"\r\n                type=\"date\"\r\n                value={formData.closeDate}\r\n                onChange={(e) => handleChange('closeDate', e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"flex justify-end gap-3 pt-4 border-t\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={onClose}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button type=\"submit\" disabled={isSubmitting}>\r\n              {isSubmitting ? 'Creating...' : 'Create tender'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAVA;;;;;;;;;;AAgBO,SAAS,iBAAiB,EAAE,OAAO,EAAyB;;IACjE,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;QACvC,OAAO;QACP,MAAM;QACN,UAAU;QACV,cAAc;QACd,QAAQ;QACR,mBAAmB;QACnB,gBAAgB;QAChB,cAAc;QACd,cAAc;QACd,kBAAkB;QAClB,WAAW;IACb;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,gBAAgB;QAEhB,IAAI;YACF,MAAM,SAAS,MAAM,IAAA,yKAAY,EAAC;gBAChC,GAAG,QAAQ;gBACX,gBAAgB,SAAS,cAAc,GAAG,WAAW,SAAS,cAAc,IAAI;gBAChF,kBAAkB,SAAS,gBAAgB,GAAG,SAAS,SAAS,gBAAgB,IAAI;gBACpF,WAAW,SAAS,SAAS,GAAG,IAAI,KAAK,SAAS,SAAS,IAAI;YACjE;YAEA,IAAI,OAAO,OAAO,EAAE;gBAClB,OAAO,OAAO;gBACd;YACF,OAAO;gBACL,MAAM,OAAO,KAAK,IAAI;YACxB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,MAAM;QACR,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,MAAM,eAAe,CAAC,OAAe;QACnC,YAAY,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,MAAM,EAAE;YAAM,CAAC;IAClD;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;8CAAwB;;;;;;8CACtC,6LAAC;oCAAE,WAAU;8CAAgC;;;;;;;;;;;;sCAE/C,6LAAC,wIAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,SAAS;4BACT,UAAU;sCAEV,cAAA,6LAAC,oMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAKjB,6LAAC;oBAAK,UAAU;oBAAc,WAAU;;sCAEtC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAwB;;;;;;8CAEtC,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,sIAAK;4CAAC,SAAQ;sDAAQ;;;;;;sDACvB,6LAAC,sIAAK;4CACJ,IAAG;4CACH,aAAY;4CACZ,OAAO,SAAS,KAAK;4CACrB,UAAU,CAAC,IAAM,aAAa,SAAS,EAAE,MAAM,CAAC,KAAK;4CACrD,QAAQ;;;;;;;;;;;;8CAIZ,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,sIAAK;oDAAC,SAAQ;8DAAO;;;;;;8DACtB,6LAAC,wIAAM;oDAAC,OAAO,SAAS,IAAI;oDAAE,eAAe,CAAC,QAAU,aAAa,QAAQ;;sEAC3E,6LAAC,+IAAa;4DAAC,IAAG;sEAChB,cAAA,6LAAC,6IAAW;;;;;;;;;;sEAEd,6LAAC,+IAAa;;8EACZ,6LAAC,4IAAU;oEAAC,OAAM;8EAAM;;;;;;8EACxB,6LAAC,4IAAU;oEAAC,OAAM;8EAAM;;;;;;8EACxB,6LAAC,4IAAU;oEAAC,OAAM;8EAAM;;;;;;;;;;;;;;;;;;;;;;;;sDAK9B,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,sIAAK;oDAAC,SAAQ;8DAAW;;;;;;8DAC1B,6LAAC,wIAAM;oDAAC,OAAO,SAAS,QAAQ;oDAAE,eAAe,CAAC,QAAU,aAAa,YAAY;;sEACnF,6LAAC,+IAAa;4DAAC,IAAG;sEAChB,cAAA,6LAAC,6IAAW;gEAAC,aAAY;;;;;;;;;;;sEAE3B,6LAAC,+IAAa;;8EACZ,6LAAC,4IAAU;oEAAC,OAAM;8EAAuB;;;;;;8EACzC,6LAAC,4IAAU;oEAAC,OAAM;8EAAgB;;;;;;8EAClC,6LAAC,4IAAU;oEAAC,OAAM;8EAAsB;;;;;;8EACxC,6LAAC,4IAAU;oEAAC,OAAM;8EAAY;;;;;;8EAC9B,6LAAC,4IAAU;oEAAC,OAAM;8EAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sCAQpD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAwB;;;;;;8CAEtC,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,sIAAK;oDAAC,SAAQ;8DAAe;;;;;;8DAC9B,6LAAC,sIAAK;oDACJ,IAAG;oDACH,aAAY;oDACZ,OAAO,SAAS,YAAY;oDAC5B,UAAU,CAAC,IAAM,aAAa,gBAAgB,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;sDAIhE,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,sIAAK;oDAAC,SAAQ;8DAAS;;;;;;8DACxB,6LAAC,wIAAM;oDAAC,OAAO,SAAS,MAAM;oDAAE,eAAe,CAAC,QAAU,aAAa,UAAU;;sEAC/E,6LAAC,+IAAa;4DAAC,IAAG;sEAChB,cAAA,6LAAC,6IAAW;gEAAC,aAAY;;;;;;;;;;;sEAE3B,6LAAC,+IAAa;;8EACZ,6LAAC,4IAAU;oEAAC,OAAM;8EAAS;;;;;;8EAC3B,6LAAC,4IAAU;oEAAC,OAAM;8EAAO;;;;;;8EACzB,6LAAC,4IAAU;oEAAC,OAAM;8EAAO;;;;;;8EACzB,6LAAC,4IAAU;oEAAC,OAAM;8EAAK;;;;;;8EACvB,6LAAC,4IAAU;oEAAC,OAAM;8EAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8CAMlC,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,sIAAK;4CAAC,SAAQ;sDAAoB;;;;;;sDACnC,6LAAC,4IAAQ;4CACP,IAAG;4CACH,aAAY;4CACZ,OAAO,SAAS,iBAAiB;4CACjC,UAAU,CAAC,IAAM,aAAa,qBAAqB,EAAE,MAAM,CAAC,KAAK;4CACjE,MAAM;;;;;;;;;;;;8CAIV,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,sIAAK;oDAAC,SAAQ;8DAAiB;;;;;;8DAChC,6LAAC,sIAAK;oDACJ,IAAG;oDACH,MAAK;oDACL,aAAY;oDACZ,OAAO,SAAS,cAAc;oDAC9B,UAAU,CAAC,IAAM,aAAa,kBAAkB,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;sDAIlE,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,sIAAK;oDAAC,SAAQ;8DAAe;;;;;;8DAC9B,6LAAC,sIAAK;oDACJ,IAAG;oDACH,aAAY;oDACZ,OAAO,SAAS,YAAY;oDAC5B,UAAU,CAAC,IAAM,aAAa,gBAAgB,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;;;;;;;sCAOpE,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAwB;;;;;;8CAEtC,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,sIAAK;oDAAC,SAAQ;8DAAe;;;;;;8DAC9B,6LAAC,wIAAM;oDAAC,OAAO,SAAS,YAAY;oDAAE,eAAe,CAAC,QAAU,aAAa,gBAAgB;;sEAC3F,6LAAC,+IAAa;4DAAC,IAAG;sEAChB,cAAA,6LAAC,6IAAW;gEAAC,aAAY;;;;;;;;;;;sEAE3B,6LAAC,+IAAa;;8EACZ,6LAAC,4IAAU;oEAAC,OAAM;8EAAkB;;;;;;8EACpC,6LAAC,4IAAU;oEAAC,OAAM;8EAAkB;;;;;;8EACpC,6LAAC,4IAAU;oEAAC,OAAM;8EAAO;;;;;;8EACzB,6LAAC,4IAAU;oEAAC,OAAM;8EAAa;;;;;;;;;;;;;;;;;;;;;;;;sDAKrC,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,sIAAK;oDAAC,SAAQ;8DAAmB;;;;;;8DAClC,6LAAC,sIAAK;oDACJ,IAAG;oDACH,MAAK;oDACL,aAAY;oDACZ,OAAO,SAAS,gBAAgB;oDAChC,UAAU,CAAC,IAAM,aAAa,oBAAoB,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;8CAKtE,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,sIAAK;4CAAC,SAAQ;sDAAY;;;;;;sDAC3B,6LAAC,sIAAK;4CACJ,IAAG;4CACH,MAAK;4CACL,OAAO,SAAS,SAAS;4CACzB,UAAU,CAAC,IAAM,aAAa,aAAa,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;sCAM/D,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,wIAAM;oCACL,MAAK;oCACL,SAAQ;oCACR,SAAS;oCACT,UAAU;8CACX;;;;;;8CAGD,6LAAC,wIAAM;oCAAC,MAAK;oCAAS,UAAU;8CAC7B,eAAe,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9C;GApPgB;;QACC,kJAAS;;;KADV"}},
    {"offset": {"line": 1109, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/lib/actions/requisition-actions.ts"],"sourcesContent":["'use server'\n\nimport { revalidatePath } from 'next/cache'\nimport { auth } from '@clerk/nextjs/server'\nimport dbConnect from '@/lib/mongodb'\nimport { Requisition } from '../models/Requisition'\nimport { createNotification } from '@/lib/actions/notification-actions'\n\nexport async function getRequisitions() {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    const requisitions = await Requisition.find({})\n      .sort({ createdAt: -1 })\n      .limit(50)\n      .lean()\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(requisitions))\n    }\n  } catch (error) {\n    console.error('[v0] Error fetching requisitions:', error)\n    return { success: false, error: 'Failed to fetch requisitions' }\n  }\n}\n\nexport async function getRequisitionById(id: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    const requisition = await Requisition.findById(id).lean()\n    \n    if (!requisition) {\n      return { success: false, error: 'Requisition not found' }\n    }\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(requisition))\n    }\n  } catch (error) {\n    console.error('[v0] Error fetching requisition:', error)\n    return { success: false, error: 'Failed to fetch requisition' }\n  }\n}\n\nexport async function createRequisition(formData: FormData) {\n  try {\n    const { userId } = await auth()\n    if (!userId) return { success: false, error: 'Unauthorized' }\n\n    await dbConnect()\n\n    // Handle file uploads (optional â€” implement your preferred storage)\n    const files = formData.getAll('files') as File[]\n    const attachmentUrls: string[] = []\n\n    if (files.length > 0 && files[0].size > 0) {\n      // Example: upload to Cloudinary, Supabase, AWS S3, etc.\n      // attachmentUrls = await uploadToCloudinary(files)\n      // For now, just use placeholder or skip\n      console.log(`Uploading ${files.length} file(s)...`)\n    }\n\n    // Auto-generate requisitionId if not provided\n    let requisitionId = formData.get('requisitionId') as string\n    if (!requisitionId) {\n      const count = await Requisition.countDocuments()\n      const year = new Date().getFullYear()\n      requisitionId = `REQ-${year}-${String(count + 1).padStart(4, '0')}`\n    }\n\n    const lineItemsRaw = formData.get('lineItems') as string\n    const lineItems = lineItemsRaw ? JSON.parse(lineItemsRaw) : []\n\n    const requisition = await Requisition.create({\n      requisitionId,\n      requester: formData.get('requester'),\n      createdBy: userId,\n      branch: formData.get('branch'),\n      date: formData.get('date') ? new Date(formData.get('date') as string) : new Date(),\n      amount: Number(formData.get('amount')),\n      category: formData.get('category'),\n      neededBy: formData.get('neededBy') ? new Date(formData.get('neededBy') as string) : null,\n      costCenter: formData.get('costCenter') || undefined,\n      lineItems,\n      // attachments: attachmentUrls, // Add field to schema if needed\n      timeline: [\n        {\n          event: 'Requisition created',\n          timestamp: new Date(),\n          actor: userId,\n          details: 'Requisition submitted for approval'\n        }\n      ]\n    })\n\n    // Create notification\n    await createNotification({\n      userId: 'admin-user-id-here', // Replace with real approver logic\n      type: 'requisition_submitted',\n      title: 'New Requisition Submitted',\n      message: `${requisition.requester} submitted ${requisitionId} for $${requisition.amount.toLocaleString()}`,\n      actionUrl: `/requisitions/${requisition._id}`,\n      priority: 'high',\n      metadata: { requisitionId, amount: requisition.amount }\n    })\n\n    revalidatePath('/requisitions')\n    return { success: true, data: JSON.parse(JSON.stringify(requisition)) }\n  } catch (error: any) {\n    console.error('[createRequisition] Error:', error)\n    return { success: false, error: error.message || 'Failed to create requisition' }\n  }\n}\n\nexport async function updateRequisition(id: string, updates: any) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const oldRequisition = await Requisition.findById(id).lean()\n    \n    const requisition = await Requisition.findByIdAndUpdate(\n      id,\n      updates,\n      { new: true }\n    ).lean()\n    \n    if (!requisition) {\n      return { success: false, error: 'Requisition not found' }\n    }\n    \n    const oldReq = oldRequisition as { status?: string } | null\n    const req = requisition as { _id: string; createdBy?: string; requisitionId?: string; amount?: number; status?: string }\n    if (oldReq && oldReq.status !== req.status) {\n      if (req.status === 'approved') {\n        await createNotification({\n          userId: req.createdBy || 'REQUESTER_USER_ID',\n          type: 'requisition_approved',\n          title: 'Requisition Approved',\n          message: `Your requisition ${req.requisitionId ?? ''} has been approved for $${(req.amount ?? 0).toLocaleString()}`,\n          actionUrl: `/requisitions/${req._id}`,\n          priority: 'medium',\n          metadata: {\n            requisitionId: req.requisitionId ?? '',\n            amount: req.amount ?? 0\n          }\n        })\n      } else if (req.status === 'rejected') {\n        await createNotification({\n          userId: req.createdBy || 'REQUESTER_USER_ID',\n          type: 'requisition_rejected',\n          title: 'Requisition Rejected',\n          message: `Your requisition ${req.requisitionId ?? ''} has been rejected. Please review and resubmit.`,\n          actionUrl: `/requisitions/${req._id}`,\n          priority: 'high',\n          metadata: {\n            requisitionId: req.requisitionId ?? '',\n            amount: req.amount ?? 0\n          }\n        })\n      }\n    }\n    \n    revalidatePath('/requisitions')\n    revalidatePath(`/requisitions/${id}`)\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(requisition))\n    }\n  } catch (error) {\n    console.error('[v0] Error updating requisition:', error)\n    return { success: false, error: 'Failed to update requisition' }\n  }\n}\n\nexport async function deleteRequisition(id: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const requisition = await Requisition.findByIdAndDelete(id)\n    \n    if (!requisition) {\n      return { success: false, error: 'Requisition not found' }\n    }\n    \n    revalidatePath('/requisitions')\n    \n    return { success: true }\n  } catch (error) {\n    console.error('[v0] Error deleting requisition:', error)\n    return { success: false, error: 'Failed to delete requisition' }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAuDsB,oBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 1124, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/create-requisition-form.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useTransition } from 'react'\r\nimport { X, Plus, Trash2 } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport { createRequisition } from '@/lib/actions/requisition-actions'\r\nimport { useRouter } from 'next/navigation'\r\n\r\ninterface CreateRequisitionFormProps {\r\n  onClose: () => void\r\n}\r\n\r\ninterface LineItem {\r\n  id: string\r\n  description: string\r\n  quantity: number\r\n  unit: string\r\n  unitCost: number\r\n  total: number\r\n}\r\n\r\nexport function CreateRequisitionForm({ onClose }: CreateRequisitionFormProps) {\r\n  const router = useRouter()\r\n  const [isPending, startTransition] = useTransition()\r\n  const [lineItems, setLineItems] = useState<LineItem[]>([\r\n    { id: '1', description: '', quantity: 1, unit: 'Unit', unitCost: 0, total: 0 }\r\n  ])\r\n\r\n  const addLineItem = () => {\r\n    const newItem: LineItem = {\r\n      id: Date.now().toString(),\r\n      description: '',\r\n      quantity: 1,\r\n      unit: 'Unit',\r\n      unitCost: 0,\r\n      total: 0\r\n    }\r\n    setLineItems([...lineItems, newItem])\r\n  }\r\n\r\n  const removeLineItem = (id: string) => {\r\n    if (lineItems.length > 1) {\r\n      setLineItems(lineItems.filter(item => item.id !== id))\r\n    }\r\n  }\r\n\r\n  const updateLineItem = (id: string, field: keyof LineItem, value: any) => {\r\n    setLineItems(lineItems.map(item => {\r\n      if (item.id === id) {\r\n        const updated = { ...item, [field]: value }\r\n        if (field === 'quantity' || field === 'unitCost') {\r\n          updated.total = updated.quantity * updated.unitCost\r\n        }\r\n        return updated\r\n      }\r\n      return item\r\n    }))\r\n  }\r\n\r\n  const totalAmount = lineItems.reduce((sum, item) => sum + item.total, 0)\r\n\r\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault()\r\n    \r\n    const formData = new FormData(e.currentTarget)\r\n    \r\n    // Generate requisition ID\r\n    const requisitionId = `REQ-${Date.now().toString().slice(-4)}`\r\n    formData.set('requisitionId', requisitionId)\r\n    formData.set('amount', totalAmount.toString())\r\n    formData.set('lineItems', JSON.stringify(lineItems))\r\n    formData.set('status', 'Pending approval')\r\n\r\n    startTransition(async () => {\r\n      const result = await createRequisition(formData)\r\n      \r\n      if (result.success) {\r\n        router.refresh()\r\n        onClose()\r\n      } else {\r\n        alert(result.error || 'Failed to create requisition')\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-background rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n        <div className=\"flex items-center justify-between p-4 md:p-6 border-b\">\r\n          <div>\r\n            <h2 className=\"text-lg md:text-xl font-semibold\">Create Requisition</h2>\r\n            <p className=\"text-xs md:text-sm text-muted-foreground mt-1\">\r\n              Submit a new purchase requisition for approval\r\n            </p>\r\n          </div>\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\r\n            <X className=\"h-5 w-5\" />\r\n          </Button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"flex-1 overflow-y-auto\">\r\n          <div className=\"p-4 md:p-6 space-y-6\">\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-semibold text-sm\">Basic Information</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"requester\">Requester Name *</Label>\r\n                  <Input\r\n                    id=\"requester\"\r\n                    name=\"requester\"\r\n                    required\r\n                    placeholder=\"Enter requester name\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"branch\">Branch *</Label>\r\n                  <Select name=\"branch\" required>\r\n                    <SelectTrigger>\r\n                      <SelectValue placeholder=\"Select branch\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"Global HQ\">Global HQ</SelectItem>\r\n                      <SelectItem value=\"APAC\">APAC</SelectItem>\r\n                      <SelectItem value=\"EMEA\">EMEA</SelectItem>\r\n                      <SelectItem value=\"NA\">North America</SelectItem>\r\n                      <SelectItem value=\"LATAM\">LATAM</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"category\">Category *</Label>\r\n                  <Select name=\"category\" required>\r\n                    <SelectTrigger>\r\n                      <SelectValue placeholder=\"Select category\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"Marketing & events\">Marketing & events</SelectItem>\r\n                      <SelectItem value=\"IT & Software\">IT & Software</SelectItem>\r\n                      <SelectItem value=\"Facilities & Office\">Facilities & Office</SelectItem>\r\n                      <SelectItem value=\"Logistics\">Logistics</SelectItem>\r\n                      <SelectItem value=\"Professional Services\">Professional Services</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"priority\">Priority *</Label>\r\n                  <Select name=\"priority\" defaultValue=\"medium\" required>\r\n                    <SelectTrigger>\r\n                      <SelectValue placeholder=\"Select priority\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"low\">Low</SelectItem>\r\n                      <SelectItem value=\"medium\">Medium</SelectItem>\r\n                      <SelectItem value=\"high\">High</SelectItem>\r\n                      <SelectItem value=\"urgent\">Urgent</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"neededBy\">Needed By Date *</Label>\r\n                  <Input\r\n                    id=\"neededBy\"\r\n                    name=\"neededBy\"\r\n                    type=\"date\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"costCenter\">Cost Center</Label>\r\n                  <Input\r\n                    id=\"costCenter\"\r\n                    name=\"costCenter\"\r\n                    placeholder=\"e.g., MKT-APAC-042\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"description\">Description</Label>\r\n                <Textarea\r\n                  id=\"description\"\r\n                  name=\"description\"\r\n                  placeholder=\"Provide additional context or justification for this requisition\"\r\n                  rows={3}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"font-semibold text-sm\">Line Items</h3>\r\n                <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={addLineItem}>\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add Item\r\n                </Button>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                {lineItems.map((item, index) => (\r\n                  <div key={item.id} className=\"flex flex-col md:flex-row gap-3 items-start p-3 md:p-4 border rounded-lg\">\r\n                    <div className=\"flex-1 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 w-full\">\r\n                      <div className=\"col-span-1 sm:col-span-2 lg:col-span-5 space-y-2\">\r\n                        <Label className=\"text-xs\">Description</Label>\r\n                        <Input\r\n                          placeholder=\"Item description\"\r\n                          value={item.description}\r\n                          onChange={(e) => updateLineItem(item.id, 'description', e.target.value)}\r\n                          required\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        <Label className=\"text-xs\">Quantity</Label>\r\n                        <Input\r\n                          type=\"number\"\r\n                          min=\"1\"\r\n                          value={item.quantity}\r\n                          onChange={(e) => updateLineItem(item.id, 'quantity', Number(e.target.value))}\r\n                          required\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        <Label className=\"text-xs\">Unit Cost ($)</Label>\r\n                        <Input\r\n                          type=\"number\"\r\n                          min=\"0\"\r\n                          step=\"0.01\"\r\n                          value={item.unitCost}\r\n                          onChange={(e) => updateLineItem(item.id, 'unitCost', Number(e.target.value))}\r\n                          required\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        <Label className=\"text-xs\">Total</Label>\r\n                        <Input\r\n                          value={`$${item.total.toFixed(2)}`}\r\n                          disabled\r\n                          className=\"bg-muted\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    {lineItems.length > 1 && (\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => removeLineItem(item.id)}\r\n                        className=\"md:mt-7\"\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between p-4 bg-muted rounded-lg\">\r\n                <span className=\"font-semibold\">Total Amount</span>\r\n                <span className=\"text-xl font-bold\">${totalAmount.toFixed(2)}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex flex-col-reverse sm:flex-row items-center justify-end gap-3 p-4 md:p-6 border-t bg-muted/50\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} disabled={isPending}>\r\n              Cancel\r\n            </Button>\r\n            <Button type=\"submit\" disabled={isPending}>\r\n              {isPending ? 'Creating...' : 'Create Requisition'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1967, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/dashboard-client.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useUser } from \"@clerk/nextjs\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { CreateTenderForm } from \"@/components/create-tender-form\";\r\nimport { CreateRequisitionForm } from \"@/components/create-requisition-form\";\r\n\r\nexport function DashboardClient() {\r\n  const [showTenderForm, setShowTenderForm] = useState(false);\r\n  const [showRequisitionForm, setShowRequisitionForm] = useState(false);\r\n  const { user } = useUser();\r\n  const [canCreateRequisition, setCanCreateRequisition] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const md = (user?.publicMetadata || {}) as any;\r\n    const rawRole = String(md.role || \"\");\r\n    const normalized = rawRole.toLowerCase().replace(/[\\s_-]/g, \"\");\r\n    setCanCreateRequisition(normalized === \"admin\" || normalized === \"company\");\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex gap-2 md:gap-3\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          className=\"flex-1 sm:flex-none bg-transparent\"\r\n          onClick={() => setShowTenderForm(true)}\r\n        >\r\n          Create tender\r\n        </Button>\r\n        {canCreateRequisition && (\r\n          <Button\r\n            size=\"sm\"\r\n            className=\"flex-1 sm:flex-none\"\r\n            onClick={() => setShowRequisitionForm(true)}\r\n          >\r\n            Create requisition\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      {showTenderForm && (\r\n        <CreateTenderForm onClose={() => setShowTenderForm(false)} />\r\n      )}\r\n\r\n      {showRequisitionForm && (\r\n        <CreateRequisitionForm onClose={() => setShowRequisitionForm(false)} />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default DashboardClient;\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQO,SAAS;;IACd,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IACrD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAC;IAC/D,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,qLAAO;IACxB,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,yKAAQ,EAAC;IAEjE,IAAA,0KAAS;qCAAC;YACR,MAAM,KAAM,MAAM,kBAAkB,CAAC;YACrC,MAAM,UAAU,OAAO,GAAG,IAAI,IAAI;YAClC,MAAM,aAAa,QAAQ,WAAW,GAAG,OAAO,CAAC,WAAW;YAC5D,wBAAwB,eAAe,WAAW,eAAe;QACnE;oCAAG;QAAC;KAAK;IAET,qBACE;;0BACE,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,wIAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,WAAU;wBACV,SAAS,IAAM,kBAAkB;kCAClC;;;;;;oBAGA,sCACC,6LAAC,wIAAM;wBACL,MAAK;wBACL,WAAU;wBACV,SAAS,IAAM,uBAAuB;kCACvC;;;;;;;;;;;;YAMJ,gCACC,6LAAC,8JAAgB;gBAAC,SAAS,IAAM,kBAAkB;;;;;;YAGpD,qCACC,6LAAC,wKAAqB;gBAAC,SAAS,IAAM,uBAAuB;;;;;;;;AAIrE;GA5CgB;;QAGG,qLAAO;;;KAHV;uCA8CD"}},
    {"offset": {"line": 2068, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/ui/table.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Table({ className, ...props }: React.ComponentProps<'table'>) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn('w-full caption-bottom text-sm', className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<'thead'>) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn('[&_tr]:border-b', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<'tbody'>) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn('[&_tr:last-child]:border-0', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<'tfoot'>) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        'bg-muted/50 border-t font-medium [&>tr]:last:border-b-0',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<'tr'>) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        'hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<'th'>) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        'text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<'td'>) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        'p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<'caption'>) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn('text-muted-foreground mt-4 text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,6LAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,6LAAC;YACC,aAAU;YACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;KAbS;AAeT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,sJACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 2212, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/status-badge.tsx"],"sourcesContent":["import { Badge } from \"@/components/ui/badge\"\nimport { cn } from \"@/lib/utils\"\n\ninterface StatusBadgeProps {\n  status: string\n  variant?: \"default\" | \"secondary\" | \"destructive\" | \"outline\"\n}\n\nexport function StatusBadge({ status, variant }: StatusBadgeProps) {\n  const getStatusColor = (status: string) => {\n    const lower = status?.toLowerCase() || \"\"\n    if (lower.includes(\"pending\") || lower.includes(\"review\")) {\n      return \"bg-warning/20 text-warning-foreground hover:bg-warning/30 border-warning/30\"\n    }\n    if (lower.includes(\"approved\") || lower.includes(\"active\") || lower.includes(\"delivered\") || lower.includes(\"closed\")) {\n      return \"bg-success/20 text-success-foreground hover:bg-success/30 border-success/30\"\n    }\n    if (lower.includes(\"rejected\") || lower.includes(\"overdue\") || lower.includes(\"critical\") || lower.includes(\"high\")) {\n      return \"bg-destructive/20 text-destructive hover:bg-destructive/30 border-destructive/30\"\n    }\n    if (lower.includes(\"medium\") || lower.includes(\"evaluation\") || lower.includes(\"open\")) {\n      return \"bg-info/20 text-info-foreground hover:bg-info/30 border-info/30\"\n    }\n    return \"bg-muted text-muted-foreground hover:bg-muted/80\"\n  }\n\n  return (\n    <Badge variant={variant || \"secondary\"} className={cn(\"font-normal\", getStatusColor(status))}>\n      {status}\n    </Badge>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAOO,SAAS,YAAY,EAAE,MAAM,EAAE,OAAO,EAAoB;IAC/D,MAAM,iBAAiB,CAAC;QACtB,MAAM,QAAQ,QAAQ,iBAAiB;QACvC,IAAI,MAAM,QAAQ,CAAC,cAAc,MAAM,QAAQ,CAAC,WAAW;YACzD,OAAO;QACT;QACA,IAAI,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,gBAAgB,MAAM,QAAQ,CAAC,WAAW;YACrH,OAAO;QACT;QACA,IAAI,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,cAAc,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,SAAS;YACnH,OAAO;QACT;QACA,IAAI,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,iBAAiB,MAAM,QAAQ,CAAC,SAAS;YACtF,OAAO;QACT;QACA,OAAO;IACT;IAEA,qBACE,6LAAC,sIAAK;QAAC,SAAS,WAAW;QAAa,WAAW,IAAA,qHAAE,EAAC,eAAe,eAAe;kBACjF;;;;;;AAGP;KAvBgB"}},
    {"offset": {"line": 2259, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/lib/actions/requisition-actions.ts"],"sourcesContent":["'use server'\n\nimport { revalidatePath } from 'next/cache'\nimport { auth } from '@clerk/nextjs/server'\nimport dbConnect from '@/lib/mongodb'\nimport { Requisition } from '../models/Requisition'\nimport { createNotification } from '@/lib/actions/notification-actions'\n\nexport async function getRequisitions() {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    const requisitions = await Requisition.find({})\n      .sort({ createdAt: -1 })\n      .limit(50)\n      .lean()\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(requisitions))\n    }\n  } catch (error) {\n    console.error('[v0] Error fetching requisitions:', error)\n    return { success: false, error: 'Failed to fetch requisitions' }\n  }\n}\n\nexport async function getRequisitionById(id: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    const requisition = await Requisition.findById(id).lean()\n    \n    if (!requisition) {\n      return { success: false, error: 'Requisition not found' }\n    }\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(requisition))\n    }\n  } catch (error) {\n    console.error('[v0] Error fetching requisition:', error)\n    return { success: false, error: 'Failed to fetch requisition' }\n  }\n}\n\nexport async function createRequisition(formData: FormData) {\n  try {\n    const { userId } = await auth()\n    if (!userId) return { success: false, error: 'Unauthorized' }\n\n    await dbConnect()\n\n    // Handle file uploads (optional â€” implement your preferred storage)\n    const files = formData.getAll('files') as File[]\n    const attachmentUrls: string[] = []\n\n    if (files.length > 0 && files[0].size > 0) {\n      // Example: upload to Cloudinary, Supabase, AWS S3, etc.\n      // attachmentUrls = await uploadToCloudinary(files)\n      // For now, just use placeholder or skip\n      console.log(`Uploading ${files.length} file(s)...`)\n    }\n\n    // Auto-generate requisitionId if not provided\n    let requisitionId = formData.get('requisitionId') as string\n    if (!requisitionId) {\n      const count = await Requisition.countDocuments()\n      const year = new Date().getFullYear()\n      requisitionId = `REQ-${year}-${String(count + 1).padStart(4, '0')}`\n    }\n\n    const lineItemsRaw = formData.get('lineItems') as string\n    const lineItems = lineItemsRaw ? JSON.parse(lineItemsRaw) : []\n\n    const requisition = await Requisition.create({\n      requisitionId,\n      requester: formData.get('requester'),\n      createdBy: userId,\n      branch: formData.get('branch'),\n      date: formData.get('date') ? new Date(formData.get('date') as string) : new Date(),\n      amount: Number(formData.get('amount')),\n      category: formData.get('category'),\n      neededBy: formData.get('neededBy') ? new Date(formData.get('neededBy') as string) : null,\n      costCenter: formData.get('costCenter') || undefined,\n      lineItems,\n      // attachments: attachmentUrls, // Add field to schema if needed\n      timeline: [\n        {\n          event: 'Requisition created',\n          timestamp: new Date(),\n          actor: userId,\n          details: 'Requisition submitted for approval'\n        }\n      ]\n    })\n\n    // Create notification\n    await createNotification({\n      userId: 'admin-user-id-here', // Replace with real approver logic\n      type: 'requisition_submitted',\n      title: 'New Requisition Submitted',\n      message: `${requisition.requester} submitted ${requisitionId} for $${requisition.amount.toLocaleString()}`,\n      actionUrl: `/requisitions/${requisition._id}`,\n      priority: 'high',\n      metadata: { requisitionId, amount: requisition.amount }\n    })\n\n    revalidatePath('/requisitions')\n    return { success: true, data: JSON.parse(JSON.stringify(requisition)) }\n  } catch (error: any) {\n    console.error('[createRequisition] Error:', error)\n    return { success: false, error: error.message || 'Failed to create requisition' }\n  }\n}\n\nexport async function updateRequisition(id: string, updates: any) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const oldRequisition = await Requisition.findById(id).lean()\n    \n    const requisition = await Requisition.findByIdAndUpdate(\n      id,\n      updates,\n      { new: true }\n    ).lean()\n    \n    if (!requisition) {\n      return { success: false, error: 'Requisition not found' }\n    }\n    \n    const oldReq = oldRequisition as { status?: string } | null\n    const req = requisition as { _id: string; createdBy?: string; requisitionId?: string; amount?: number; status?: string }\n    if (oldReq && oldReq.status !== req.status) {\n      if (req.status === 'approved') {\n        await createNotification({\n          userId: req.createdBy || 'REQUESTER_USER_ID',\n          type: 'requisition_approved',\n          title: 'Requisition Approved',\n          message: `Your requisition ${req.requisitionId ?? ''} has been approved for $${(req.amount ?? 0).toLocaleString()}`,\n          actionUrl: `/requisitions/${req._id}`,\n          priority: 'medium',\n          metadata: {\n            requisitionId: req.requisitionId ?? '',\n            amount: req.amount ?? 0\n          }\n        })\n      } else if (req.status === 'rejected') {\n        await createNotification({\n          userId: req.createdBy || 'REQUESTER_USER_ID',\n          type: 'requisition_rejected',\n          title: 'Requisition Rejected',\n          message: `Your requisition ${req.requisitionId ?? ''} has been rejected. Please review and resubmit.`,\n          actionUrl: `/requisitions/${req._id}`,\n          priority: 'high',\n          metadata: {\n            requisitionId: req.requisitionId ?? '',\n            amount: req.amount ?? 0\n          }\n        })\n      }\n    }\n    \n    revalidatePath('/requisitions')\n    revalidatePath(`/requisitions/${id}`)\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(requisition))\n    }\n  } catch (error) {\n    console.error('[v0] Error updating requisition:', error)\n    return { success: false, error: 'Failed to update requisition' }\n  }\n}\n\nexport async function deleteRequisition(id: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const requisition = await Requisition.findByIdAndDelete(id)\n    \n    if (!requisition) {\n      return { success: false, error: 'Requisition not found' }\n    }\n    \n    revalidatePath('/requisitions')\n    \n    return { success: true }\n  } catch (error) {\n    console.error('[v0] Error deleting requisition:', error)\n    return { success: false, error: 'Failed to delete requisition' }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IA+BsB,qBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 2274, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/requisition-detail-modal.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { X, Calendar, DollarSign, User, Building2, Tag, AlertCircle, Clock, Package } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { StatusBadge } from \"@/components/status-badge\"\r\nimport { getRequisitionById } from \"@/lib/actions/requisition-actions\"\r\n\r\ntype RequisitionDetail = {\r\n  _id: string\r\n  requisitionId: string\r\n  requester: string\r\n  branch: string\r\n  category: string\r\n  date: string | Date\r\n  status: string\r\n  amount: number\r\n  priority: string\r\n  neededBy?: string\r\n  description?: string\r\n  lineItems?: Array<{\r\n    description: string\r\n    quantity: number\r\n    unitCost: number\r\n    total: number\r\n  }>\r\n  costCenter?: string\r\n  approvalRoute?: string\r\n  createdAt?: string\r\n}\r\n\r\nexport function RequisitionDetailModal({\r\n  requisitionId,\r\n  onClose,\r\n}: {\r\n  requisitionId: string\r\n  onClose: () => void\r\n}) {\r\n  const [requisition, setRequisition] = useState<RequisitionDetail | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const router = useRouter()\r\n\r\n  useEffect(() => {\r\n    loadRequisition()\r\n  }, [requisitionId])\r\n\r\n  const loadRequisition = async () => {\r\n    setLoading(true)\r\n    const result = await getRequisitionById(requisitionId)\r\n    if (result.success) {\r\n      setRequisition(result.data)\r\n    }\r\n    setLoading(false)\r\n  }\r\n\r\n  const fmtDate = (d: string | Date | undefined) => {\r\n    if (!d) return \"N/A\"\r\n    return new Date(d).toLocaleDateString(\"en-US\", {\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n    })\r\n  }\r\n\r\n  const fmtAmount = (n: number) =>\r\n    new Intl.NumberFormat(\"en-US\", {\r\n      style: \"currency\",\r\n      currency: \"USD\",\r\n      minimumFractionDigits: 2,\r\n    }).format(n)\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-background rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"border-b px-6 py-4 flex items-center justify-between bg-muted/30\">\r\n          <div className=\"flex-1\">\r\n            <h2 className=\"text-xl font-semibold\">\r\n              {loading ? \"Loading...\" : requisition?.requisitionId || \"Requisition Details\"}\r\n            </h2>\r\n            <p className=\"text-sm text-muted-foreground mt-0.5\">View complete requisition information</p>\r\n          </div>\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose} className=\"shrink-0\">\r\n            <X className=\"h-5 w-5\" />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-y-auto p-6\">\r\n          {loading ? (\r\n            <div className=\"flex items-center justify-center py-12\">\r\n              <div className=\"text-muted-foreground\">Loading requisition details...</div>\r\n            </div>\r\n          ) : !requisition ? (\r\n            <div className=\"flex items-center justify-center py-12\">\r\n              <div className=\"text-muted-foreground\">Requisition not found</div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              {/* Status and Priority */}\r\n              <div className=\"flex items-center gap-3 flex-wrap\">\r\n                <StatusBadge status={requisition.status} />\r\n                <span className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400\">\r\n                  <AlertCircle className=\"h-3 w-3\" />\r\n                  {requisition.priority || \"Medium\"} Priority\r\n                </span>\r\n              </div>\r\n\r\n              {/* Summary Section */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-3\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <User className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\r\n                    <div>\r\n                      <div className=\"text-xs text-muted-foreground\">Requester</div>\r\n                      <div className=\"font-medium\">{requisition.requester}</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <Building2 className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\r\n                    <div>\r\n                      <div className=\"text-xs text-muted-foreground\">Branch</div>\r\n                      <div className=\"font-medium\">{requisition.branch}</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <Tag className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\r\n                    <div>\r\n                      <div className=\"text-xs text-muted-foreground\">Category</div>\r\n                      <div className=\"font-medium\">{requisition.category}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <DollarSign className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\r\n                    <div>\r\n                      <div className=\"text-xs text-muted-foreground\">Total Amount</div>\r\n                      <div className=\"font-semibold text-lg\">{fmtAmount(requisition.amount)}</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <Calendar className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\r\n                    <div>\r\n                      <div className=\"text-xs text-muted-foreground\">Needed By</div>\r\n                      <div className=\"font-medium\">{fmtDate(requisition.neededBy)}</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <Clock className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\r\n                    <div>\r\n                      <div className=\"text-xs text-muted-foreground\">Submitted</div>\r\n                      <div className=\"font-medium\">{fmtDate(requisition.createdAt || requisition.date)}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Description */}\r\n              {requisition.description && (\r\n                <div className=\"border rounded-lg p-4 bg-muted/30\">\r\n                  <h3 className=\"text-sm font-semibold mb-2\">Description</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">{requisition.description}</p>\r\n                </div>\r\n              )}\r\n\r\n              {/* Line Items */}\r\n              {requisition.lineItems && requisition.lineItems.length > 0 && (\r\n                <div className=\"border rounded-lg overflow-hidden\">\r\n                  <div className=\"bg-muted/50 px-4 py-3 border-b\">\r\n                    <h3 className=\"text-sm font-semibold flex items-center gap-2\">\r\n                      <Package className=\"h-4 w-4\" />\r\n                      Line Items\r\n                    </h3>\r\n                  </div>\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-sm\">\r\n                      <thead className=\"border-b bg-muted/30\">\r\n                        <tr>\r\n                          <th className=\"text-left px-4 py-3 font-medium\">Description</th>\r\n                          <th className=\"text-right px-4 py-3 font-medium\">Quantity</th>\r\n                          <th className=\"text-right px-4 py-3 font-medium\">Unit Cost</th>\r\n                          <th className=\"text-right px-4 py-3 font-medium\">Total</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {requisition.lineItems.map((item, idx) => (\r\n                          <tr key={idx} className=\"border-b last:border-0\">\r\n                            <td className=\"px-4 py-3\">{item.description}</td>\r\n                            <td className=\"px-4 py-3 text-right\">{item.quantity}</td>\r\n                            <td className=\"px-4 py-3 text-right\">{fmtAmount(item.unitCost)}</td>\r\n                            <td className=\"px-4 py-3 text-right font-medium\">{fmtAmount(item.total)}</td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Additional Info */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t\">\r\n                {requisition.costCenter && (\r\n                  <div>\r\n                    <div className=\"text-xs text-muted-foreground mb-1\">Cost Center</div>\r\n                    <div className=\"text-sm font-medium\">{requisition.costCenter}</div>\r\n                  </div>\r\n                )}\r\n                {requisition.approvalRoute && (\r\n                  <div>\r\n                    <div className=\"text-xs text-muted-foreground mb-1\">Approval Route</div>\r\n                    <div className=\"text-sm font-medium\">{requisition.approvalRoute}</div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"border-t px-6 py-4 flex items-center justify-end gap-3 bg-muted/30\">\r\n          <Button variant=\"outline\" onClick={onClose}>\r\n            Close\r\n          </Button>\r\n          {requisition && (\r\n            <Button\r\n              onClick={() => {\r\n                router.push(`/approvals?itemId=${encodeURIComponent(requisition.requisitionId)}`)\r\n              }}\r\n            >\r\n              Open in Approvals\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3016, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/requisitions-table.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useMemo, useState } from \"react\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\r\nimport { StatusBadge } from \"@/components/status-badge\"\r\nimport { Download } from \"lucide-react\"\r\nimport { RequisitionDetailModal } from \"./requisition-detail-modal\"\r\n\r\ntype RequisitionItem = {\r\n  _id: string\r\n  requisitionId: string\r\n  requester: string\r\n  branch: string\r\n  date: string | Date\r\n  status: string\r\n  amount: number\r\n}\r\n\r\nexport default function RequisitionsTable({ items }: { items: RequisitionItem[] }) {\r\n  const [query, setQuery] = useState(\"\")\r\n  const [branch, setBranch] = useState<string>(\"all\")\r\n  const [status, setStatus] = useState<string>(\"all\")\r\n  const [selectedRequisitionId, setSelectedRequisitionId] = useState<string | null>(null)\r\n\r\n  const fmtDate = (d: string | Date) => new Date(d).toISOString().slice(0, 10)\r\n  const fmtAmount = (n: number) =>\r\n    new Intl.NumberFormat(\"en-US\", { minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(n)\r\n\r\n  const filtered = useMemo(() => {\r\n    return items\r\n      .filter((r) => {\r\n        const q = query.trim().toLowerCase()\r\n        const matchesQuery = q\r\n          ? r.requisitionId?.toLowerCase().includes(q) || r.requester?.toLowerCase().includes(q)\r\n          : true\r\n        const matchesBranch = branch && branch !== \"all\" ? r.branch === branch : true\r\n        const matchesStatus = status && status !== \"all\" ? r.status === status : true\r\n        return matchesQuery && matchesBranch && matchesStatus\r\n      })\r\n      .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\r\n      .slice(0, 100)\r\n  }, [items, query, branch, status])\r\n\r\n  const exportCsv = () => {\r\n    const rows = filtered.map((r) => [\r\n      r.requisitionId,\r\n      r.requester,\r\n      r.branch,\r\n      fmtDate(r.date),\r\n      r.status,\r\n      fmtAmount(r.amount),\r\n    ])\r\n    const header = [\"Requisition ID\", \"Requester\", \"Branch\", \"Date\", \"Status\", \"Amount\"]\r\n    const encode = (v: string) => '\"' + v.replace(/\"/g, '\"\"') + '\"'\r\n    const csv = [header, ...rows].map((row) => row.map(encode).join(\",\")).join(\"\\n\")\r\n    const blob = new Blob([csv], { type: \"text/csv;charset=utf-8;\" })\r\n    const url = URL.createObjectURL(blob)\r\n    const a = document.createElement(\"a\")\r\n    a.href = url\r\n    a.download = \"requisitions.csv\"\r\n    document.body.appendChild(a)\r\n    a.click()\r\n    document.body.removeChild(a)\r\n    URL.revokeObjectURL(url)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <CardTitle className=\"text-base\">All requisitions</CardTitle>\r\n              <CardDescription className=\"text-xs\">Showing {filtered.length} result(s)</CardDescription>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={exportCsv}>\r\n                <Download className=\"h-4 w-4 mr-2\" />\r\n                Export CSV\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-3 grid grid-cols-1 md:grid-cols-4 gap-3\">\r\n            <Input\r\n              placeholder=\"Search by requester or ID\"\r\n              className=\"md:col-span-2\"\r\n              value={query}\r\n              onChange={(e) => setQuery(e.target.value)}\r\n            />\r\n            <Select value={branch} onValueChange={(v) => setBranch(v)}>\r\n              <SelectTrigger>\r\n                <SelectValue placeholder=\"Branch\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"all\">All branches</SelectItem>\r\n                <SelectItem value=\"Global HQ\">Global HQ</SelectItem>\r\n                <SelectItem value=\"APAC\">APAC</SelectItem>\r\n                <SelectItem value=\"EMEA\">EMEA</SelectItem>\r\n                <SelectItem value=\"NA\">North America</SelectItem>\r\n                <SelectItem value=\"LATAM\">LATAM</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n            <Select value={status} onValueChange={(v) => setStatus(v)}>\r\n              <SelectTrigger>\r\n                <SelectValue placeholder=\"Status\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"all\">All statuses</SelectItem>\r\n                <SelectItem value=\"Pending approval\">Pending approval</SelectItem>\r\n                <SelectItem value=\"In review\">In review</SelectItem>\r\n                <SelectItem value=\"Approved\">Approved</SelectItem>\r\n                <SelectItem value=\"Rejected\">Rejected</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {filtered.length === 0 ? (\r\n            <div className=\"text-center py-8 text-muted-foreground text-sm\">No requisitions found.</div>\r\n          ) : (\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>ID</TableHead>\r\n                  <TableHead>Requester</TableHead>\r\n                  <TableHead>Branch</TableHead>\r\n                  <TableHead>Date</TableHead>\r\n                  <TableHead>Status</TableHead>\r\n                  <TableHead className=\"text-right\">Amount</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {filtered.map((req) => (\r\n                  <TableRow\r\n                    key={req._id}\r\n                    onClick={() => setSelectedRequisitionId(req._id)}\r\n                    className=\"cursor-pointer hover:bg-muted/50 transition-colors\"\r\n                  >\r\n                    <TableCell className=\"font-medium\">{req.requisitionId}</TableCell>\r\n                    <TableCell>{req.requester}</TableCell>\r\n                    <TableCell className=\"text-muted-foreground\">{req.branch}</TableCell>\r\n                    <TableCell className=\"text-muted-foreground\">{fmtDate(req.date)}</TableCell>\r\n                    <TableCell>\r\n                      <StatusBadge status={req.status} />\r\n                    </TableCell>\r\n                    <TableCell className=\"text-right\">${fmtAmount(req.amount)}</TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n      {selectedRequisitionId && (\r\n        <RequisitionDetailModal requisitionId={selectedRequisitionId} onClose={() => setSelectedRequisitionId(null)} />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}