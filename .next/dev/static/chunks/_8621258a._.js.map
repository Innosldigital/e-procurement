{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/status-badge.tsx"],"sourcesContent":["import { Badge } from \"@/components/ui/badge\"\nimport { cn } from \"@/lib/utils\"\n\ninterface StatusBadgeProps {\n  status: string\n  variant?: \"default\" | \"secondary\" | \"destructive\" | \"outline\"\n}\n\nexport function StatusBadge({ status, variant }: StatusBadgeProps) {\n  const getStatusColor = (status: string) => {\n    const lower = status?.toLowerCase() || \"\"\n    if (lower.includes(\"pending\") || lower.includes(\"review\")) {\n      return \"bg-warning/20 text-warning-foreground hover:bg-warning/30 border-warning/30\"\n    }\n    if (lower.includes(\"approved\") || lower.includes(\"active\") || lower.includes(\"delivered\") || lower.includes(\"closed\")) {\n      return \"bg-success/20 text-success-foreground hover:bg-success/30 border-success/30\"\n    }\n    if (lower.includes(\"rejected\") || lower.includes(\"overdue\") || lower.includes(\"critical\") || lower.includes(\"high\")) {\n      return \"bg-destructive/20 text-destructive hover:bg-destructive/30 border-destructive/30\"\n    }\n    if (lower.includes(\"medium\") || lower.includes(\"evaluation\") || lower.includes(\"open\")) {\n      return \"bg-info/20 text-info-foreground hover:bg-info/30 border-info/30\"\n    }\n    return \"bg-muted text-muted-foreground hover:bg-muted/80\"\n  }\n\n  return (\n    <Badge variant={variant || \"secondary\"} className={cn(\"font-normal\", getStatusColor(status))}>\n      {status}\n    </Badge>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAOO,SAAS,YAAY,EAAE,MAAM,EAAE,OAAO,EAAoB;IAC/D,MAAM,iBAAiB,CAAC;QACtB,MAAM,QAAQ,QAAQ,iBAAiB;QACvC,IAAI,MAAM,QAAQ,CAAC,cAAc,MAAM,QAAQ,CAAC,WAAW;YACzD,OAAO;QACT;QACA,IAAI,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,gBAAgB,MAAM,QAAQ,CAAC,WAAW;YACrH,OAAO;QACT;QACA,IAAI,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,cAAc,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,SAAS;YACnH,OAAO;QACT;QACA,IAAI,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,iBAAiB,MAAM,QAAQ,CAAC,SAAS;YACtF,OAAO;QACT;QACA,OAAO;IACT;IAEA,qBACE,6LAAC,sIAAK;QAAC,SAAS,WAAW;QAAa,WAAW,IAAA,qHAAE,EAAC,eAAe,eAAe;kBACjF;;;;;;AAGP;KAvBgB"}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/lib/actions/approval-actions.ts"],"sourcesContent":["'use server'\n\nimport { revalidatePath } from 'next/cache'\nimport { auth } from '@clerk/nextjs/server'\nimport dbConnect from '@/lib/mongodb'\nimport { createNotification } from '../actions/notification-actions'\nimport { Approval } from '../models/Approval'\n\nexport async function getApprovals() {\n  try {\n    await dbConnect()\n    const approvals = await Approval.find({})\n      .sort({ createdAt: -1 })\n      .limit(50)\n      .lean()\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approvals))\n    }\n  } catch (error) {\n    console.error('[v0] Error fetching approvals:', error)\n    return { success: false, error: 'Failed to fetch approvals' }\n  }\n}\n\nexport async function getApprovalById(id: string) {\n  try {\n    await dbConnect()\n    const approval = await Approval.findById(id).lean()\n    \n    if (!approval) {\n      return { success: false, error: 'Approval not found' }\n    }\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approval))\n    }\n  } catch (error) {\n    console.error('[v0] Error fetching approval:', error)\n    return { success: false, error: 'Failed to fetch approval' }\n  }\n}\n\nexport async function approveRequest(id: string, comments?: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const updated = await Approval.findByIdAndUpdate(\n      id,\n      { \n        status: 'approved',\n        approvedAt: new Date(),\n        approvedBy: userId,\n      },\n      { new: true }\n    )\n    let approval = updated?.toObject()\n    if (comments && updated) {\n      approval = await Approval.findByIdAndUpdate(\n        id,\n        { $push: { comments: { author: userId, text: comments, date: new Date() } } },\n        { new: true }\n      ).lean()\n    } else {\n      approval = approval as any\n    }\n    \n    if (!approval) {\n      return { success: false, error: 'Approval not found' }\n    }\n    \n    const ap = approval as { _id: string; type?: string; itemId?: string; amount?: number }\n    const resourceType = ap.type ? ap.type.toLowerCase() : 'request'\n\n    await createNotification({\n      userId: 'REQUESTER_USER_ID',\n      type: 'approval_pending',\n      title: `${resourceType} Approved`,\n      message: `Your ${resourceType} ${ap.itemId ?? ''} for $${(ap.amount ?? 0).toLocaleString()} has been approved`,\n      actionUrl: `/${resourceType}s/${ap.itemId ?? ''}`,\n      priority: 'medium',\n      metadata: {\n        approvalId: ap._id,\n        itemId: ap.itemId ?? '',\n        amount: ap.amount ?? 0\n      }\n    })\n    \n    revalidatePath('/approvals')\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approval))\n    }\n  } catch (error) {\n    console.error('[v0] Error approving request:', error)\n    return { success: false, error: 'Failed to approve request' }\n  }\n}\n\nexport async function rejectRequest(id: string, comments: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const updated = await Approval.findByIdAndUpdate(\n      id,\n      { \n        status: 'rejected',\n        rejectedAt: new Date(),\n        rejectedBy: userId,\n      },\n      { new: true }\n    )\n    const approval = await Approval.findByIdAndUpdate(\n      id,\n      { $push: { comments: { author: userId, text: comments, date: new Date() } } },\n      { new: true }\n    ).lean()\n    \n    if (!approval) {\n      return { success: false, error: 'Approval not found' }\n    }\n    \n    {\n      const ap = approval as { _id: string; type?: string; itemId?: string; amount?: number }\n      const resourceType = ap.type ? ap.type.toLowerCase() : 'request'\n      await createNotification({\n        userId: 'REQUESTER_USER_ID',\n        type: 'approval_pending',\n        title: `${ap.type ?? 'Request'} Rejected`,\n        message: `Your ${resourceType} ${ap.itemId ?? ''} has been rejected. ${comments}`,\n        actionUrl: `/${resourceType}s/${ap.itemId ?? ''}`,\n        priority: 'high',\n        metadata: {\n          approvalId: ap._id,\n          itemId: ap.itemId ?? '',\n          amount: ap.amount ?? 0,\n          rejectionReason: comments\n        }\n      })\n    }\n    \n    revalidatePath('/approvals')\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approval))\n    }\n  } catch (error) {\n    console.error('[v0] Error rejecting request:', error)\n    return { success: false, error: 'Failed to reject request' }\n  }\n}\n\nexport async function requestChanges(id: string, comments: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const updated = await Approval.findByIdAndUpdate(\n      id,\n      { \n        status: 'changes_requested',\n        requestedBy: userId,\n      },\n      { new: true }\n    )\n    const approval = await Approval.findByIdAndUpdate(\n      id,\n      { $push: { comments: { author: userId, text: comments, date: new Date() } } },\n      { new: true }\n    ).lean()\n    \n    if (!approval) {\n      return { success: false, error: 'Approval not found' }\n    }\n    \n    {\n      const ap = approval as { _id: string; type?: string; itemId?: string }\n      const resourceType = ap.type ? ap.type.toLowerCase() : 'request'\n      await createNotification({\n        userId: 'REQUESTER_USER_ID',\n        type: 'approval_pending',\n        title: 'Changes Requested',\n        message: `Changes requested for ${resourceType} ${ap.itemId ?? ''}. ${comments}`,\n        actionUrl: `/${resourceType}s/${ap.itemId ?? ''}`,\n        priority: 'medium',\n        metadata: {\n          approvalId: ap._id,\n          itemId: ap.itemId ?? '',\n          changeComments: comments\n        }\n      })\n    }\n    \n    revalidatePath('/approvals')\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approval))\n    }\n  } catch (error) {\n    console.error('[v0] Error requesting changes:', error)\n    return { success: false, error: 'Failed to request changes' }\n  }\n}\n\nexport async function bulkApprove(ids: string[], comments?: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n\n    await dbConnect()\n\n    const now = new Date()\n    await Approval.updateMany(\n      { _id: { $in: ids } },\n      { $set: { status: 'approved', approvedAt: now, approvedBy: userId } }\n    )\n\n    if (comments) {\n      await Approval.updateMany(\n        { _id: { $in: ids } },\n        { $push: { comments: { author: userId, text: comments, date: now } } }\n      )\n    }\n\n    revalidatePath('/approvals')\n\n    return { success: true, count: ids.length }\n  } catch (error) {\n    console.error('[v0] Error bulk approving:', error)\n    return { success: false, error: 'Failed to bulk approve' }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IA6CsB,iBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/lib/actions/approval-actions.ts"],"sourcesContent":["'use server'\n\nimport { revalidatePath } from 'next/cache'\nimport { auth } from '@clerk/nextjs/server'\nimport dbConnect from '@/lib/mongodb'\nimport { createNotification } from '../actions/notification-actions'\nimport { Approval } from '../models/Approval'\n\nexport async function getApprovals() {\n  try {\n    await dbConnect()\n    const approvals = await Approval.find({})\n      .sort({ createdAt: -1 })\n      .limit(50)\n      .lean()\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approvals))\n    }\n  } catch (error) {\n    console.error('[v0] Error fetching approvals:', error)\n    return { success: false, error: 'Failed to fetch approvals' }\n  }\n}\n\nexport async function getApprovalById(id: string) {\n  try {\n    await dbConnect()\n    const approval = await Approval.findById(id).lean()\n    \n    if (!approval) {\n      return { success: false, error: 'Approval not found' }\n    }\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approval))\n    }\n  } catch (error) {\n    console.error('[v0] Error fetching approval:', error)\n    return { success: false, error: 'Failed to fetch approval' }\n  }\n}\n\nexport async function approveRequest(id: string, comments?: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const updated = await Approval.findByIdAndUpdate(\n      id,\n      { \n        status: 'approved',\n        approvedAt: new Date(),\n        approvedBy: userId,\n      },\n      { new: true }\n    )\n    let approval = updated?.toObject()\n    if (comments && updated) {\n      approval = await Approval.findByIdAndUpdate(\n        id,\n        { $push: { comments: { author: userId, text: comments, date: new Date() } } },\n        { new: true }\n      ).lean()\n    } else {\n      approval = approval as any\n    }\n    \n    if (!approval) {\n      return { success: false, error: 'Approval not found' }\n    }\n    \n    const ap = approval as { _id: string; type?: string; itemId?: string; amount?: number }\n    const resourceType = ap.type ? ap.type.toLowerCase() : 'request'\n\n    await createNotification({\n      userId: 'REQUESTER_USER_ID',\n      type: 'approval_pending',\n      title: `${resourceType} Approved`,\n      message: `Your ${resourceType} ${ap.itemId ?? ''} for $${(ap.amount ?? 0).toLocaleString()} has been approved`,\n      actionUrl: `/${resourceType}s/${ap.itemId ?? ''}`,\n      priority: 'medium',\n      metadata: {\n        approvalId: ap._id,\n        itemId: ap.itemId ?? '',\n        amount: ap.amount ?? 0\n      }\n    })\n    \n    revalidatePath('/approvals')\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approval))\n    }\n  } catch (error) {\n    console.error('[v0] Error approving request:', error)\n    return { success: false, error: 'Failed to approve request' }\n  }\n}\n\nexport async function rejectRequest(id: string, comments: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const updated = await Approval.findByIdAndUpdate(\n      id,\n      { \n        status: 'rejected',\n        rejectedAt: new Date(),\n        rejectedBy: userId,\n      },\n      { new: true }\n    )\n    const approval = await Approval.findByIdAndUpdate(\n      id,\n      { $push: { comments: { author: userId, text: comments, date: new Date() } } },\n      { new: true }\n    ).lean()\n    \n    if (!approval) {\n      return { success: false, error: 'Approval not found' }\n    }\n    \n    {\n      const ap = approval as { _id: string; type?: string; itemId?: string; amount?: number }\n      const resourceType = ap.type ? ap.type.toLowerCase() : 'request'\n      await createNotification({\n        userId: 'REQUESTER_USER_ID',\n        type: 'approval_pending',\n        title: `${ap.type ?? 'Request'} Rejected`,\n        message: `Your ${resourceType} ${ap.itemId ?? ''} has been rejected. ${comments}`,\n        actionUrl: `/${resourceType}s/${ap.itemId ?? ''}`,\n        priority: 'high',\n        metadata: {\n          approvalId: ap._id,\n          itemId: ap.itemId ?? '',\n          amount: ap.amount ?? 0,\n          rejectionReason: comments\n        }\n      })\n    }\n    \n    revalidatePath('/approvals')\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approval))\n    }\n  } catch (error) {\n    console.error('[v0] Error rejecting request:', error)\n    return { success: false, error: 'Failed to reject request' }\n  }\n}\n\nexport async function requestChanges(id: string, comments: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const updated = await Approval.findByIdAndUpdate(\n      id,\n      { \n        status: 'changes_requested',\n        requestedBy: userId,\n      },\n      { new: true }\n    )\n    const approval = await Approval.findByIdAndUpdate(\n      id,\n      { $push: { comments: { author: userId, text: comments, date: new Date() } } },\n      { new: true }\n    ).lean()\n    \n    if (!approval) {\n      return { success: false, error: 'Approval not found' }\n    }\n    \n    {\n      const ap = approval as { _id: string; type?: string; itemId?: string }\n      const resourceType = ap.type ? ap.type.toLowerCase() : 'request'\n      await createNotification({\n        userId: 'REQUESTER_USER_ID',\n        type: 'approval_pending',\n        title: 'Changes Requested',\n        message: `Changes requested for ${resourceType} ${ap.itemId ?? ''}. ${comments}`,\n        actionUrl: `/${resourceType}s/${ap.itemId ?? ''}`,\n        priority: 'medium',\n        metadata: {\n          approvalId: ap._id,\n          itemId: ap.itemId ?? '',\n          changeComments: comments\n        }\n      })\n    }\n    \n    revalidatePath('/approvals')\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approval))\n    }\n  } catch (error) {\n    console.error('[v0] Error requesting changes:', error)\n    return { success: false, error: 'Failed to request changes' }\n  }\n}\n\nexport async function bulkApprove(ids: string[], comments?: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n\n    await dbConnect()\n\n    const now = new Date()\n    await Approval.updateMany(\n      { _id: { $in: ids } },\n      { $set: { status: 'approved', approvedAt: now, approvedBy: userId } }\n    )\n\n    if (comments) {\n      await Approval.updateMany(\n        { _id: { $in: ids } },\n        { $push: { comments: { author: userId, text: comments, date: now } } }\n      )\n    }\n\n    revalidatePath('/approvals')\n\n    return { success: true, count: ids.length }\n  } catch (error) {\n    console.error('[v0] Error bulk approving:', error)\n    return { success: false, error: 'Failed to bulk approve' }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IA2GsB,gBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/lib/actions/approval-actions.ts"],"sourcesContent":["'use server'\n\nimport { revalidatePath } from 'next/cache'\nimport { auth } from '@clerk/nextjs/server'\nimport dbConnect from '@/lib/mongodb'\nimport { createNotification } from '../actions/notification-actions'\nimport { Approval } from '../models/Approval'\n\nexport async function getApprovals() {\n  try {\n    await dbConnect()\n    const approvals = await Approval.find({})\n      .sort({ createdAt: -1 })\n      .limit(50)\n      .lean()\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approvals))\n    }\n  } catch (error) {\n    console.error('[v0] Error fetching approvals:', error)\n    return { success: false, error: 'Failed to fetch approvals' }\n  }\n}\n\nexport async function getApprovalById(id: string) {\n  try {\n    await dbConnect()\n    const approval = await Approval.findById(id).lean()\n    \n    if (!approval) {\n      return { success: false, error: 'Approval not found' }\n    }\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approval))\n    }\n  } catch (error) {\n    console.error('[v0] Error fetching approval:', error)\n    return { success: false, error: 'Failed to fetch approval' }\n  }\n}\n\nexport async function approveRequest(id: string, comments?: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const updated = await Approval.findByIdAndUpdate(\n      id,\n      { \n        status: 'approved',\n        approvedAt: new Date(),\n        approvedBy: userId,\n      },\n      { new: true }\n    )\n    let approval = updated?.toObject()\n    if (comments && updated) {\n      approval = await Approval.findByIdAndUpdate(\n        id,\n        { $push: { comments: { author: userId, text: comments, date: new Date() } } },\n        { new: true }\n      ).lean()\n    } else {\n      approval = approval as any\n    }\n    \n    if (!approval) {\n      return { success: false, error: 'Approval not found' }\n    }\n    \n    const ap = approval as { _id: string; type?: string; itemId?: string; amount?: number }\n    const resourceType = ap.type ? ap.type.toLowerCase() : 'request'\n\n    await createNotification({\n      userId: 'REQUESTER_USER_ID',\n      type: 'approval_pending',\n      title: `${resourceType} Approved`,\n      message: `Your ${resourceType} ${ap.itemId ?? ''} for $${(ap.amount ?? 0).toLocaleString()} has been approved`,\n      actionUrl: `/${resourceType}s/${ap.itemId ?? ''}`,\n      priority: 'medium',\n      metadata: {\n        approvalId: ap._id,\n        itemId: ap.itemId ?? '',\n        amount: ap.amount ?? 0\n      }\n    })\n    \n    revalidatePath('/approvals')\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approval))\n    }\n  } catch (error) {\n    console.error('[v0] Error approving request:', error)\n    return { success: false, error: 'Failed to approve request' }\n  }\n}\n\nexport async function rejectRequest(id: string, comments: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const updated = await Approval.findByIdAndUpdate(\n      id,\n      { \n        status: 'rejected',\n        rejectedAt: new Date(),\n        rejectedBy: userId,\n      },\n      { new: true }\n    )\n    const approval = await Approval.findByIdAndUpdate(\n      id,\n      { $push: { comments: { author: userId, text: comments, date: new Date() } } },\n      { new: true }\n    ).lean()\n    \n    if (!approval) {\n      return { success: false, error: 'Approval not found' }\n    }\n    \n    {\n      const ap = approval as { _id: string; type?: string; itemId?: string; amount?: number }\n      const resourceType = ap.type ? ap.type.toLowerCase() : 'request'\n      await createNotification({\n        userId: 'REQUESTER_USER_ID',\n        type: 'approval_pending',\n        title: `${ap.type ?? 'Request'} Rejected`,\n        message: `Your ${resourceType} ${ap.itemId ?? ''} has been rejected. ${comments}`,\n        actionUrl: `/${resourceType}s/${ap.itemId ?? ''}`,\n        priority: 'high',\n        metadata: {\n          approvalId: ap._id,\n          itemId: ap.itemId ?? '',\n          amount: ap.amount ?? 0,\n          rejectionReason: comments\n        }\n      })\n    }\n    \n    revalidatePath('/approvals')\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approval))\n    }\n  } catch (error) {\n    console.error('[v0] Error rejecting request:', error)\n    return { success: false, error: 'Failed to reject request' }\n  }\n}\n\nexport async function requestChanges(id: string, comments: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n    \n    await dbConnect()\n    \n    const updated = await Approval.findByIdAndUpdate(\n      id,\n      { \n        status: 'changes_requested',\n        requestedBy: userId,\n      },\n      { new: true }\n    )\n    const approval = await Approval.findByIdAndUpdate(\n      id,\n      { $push: { comments: { author: userId, text: comments, date: new Date() } } },\n      { new: true }\n    ).lean()\n    \n    if (!approval) {\n      return { success: false, error: 'Approval not found' }\n    }\n    \n    {\n      const ap = approval as { _id: string; type?: string; itemId?: string }\n      const resourceType = ap.type ? ap.type.toLowerCase() : 'request'\n      await createNotification({\n        userId: 'REQUESTER_USER_ID',\n        type: 'approval_pending',\n        title: 'Changes Requested',\n        message: `Changes requested for ${resourceType} ${ap.itemId ?? ''}. ${comments}`,\n        actionUrl: `/${resourceType}s/${ap.itemId ?? ''}`,\n        priority: 'medium',\n        metadata: {\n          approvalId: ap._id,\n          itemId: ap.itemId ?? '',\n          changeComments: comments\n        }\n      })\n    }\n    \n    revalidatePath('/approvals')\n    \n    return { \n      success: true, \n      data: JSON.parse(JSON.stringify(approval))\n    }\n  } catch (error) {\n    console.error('[v0] Error requesting changes:', error)\n    return { success: false, error: 'Failed to request changes' }\n  }\n}\n\nexport async function bulkApprove(ids: string[], comments?: string) {\n  try {\n    const { userId } = await auth()\n    if (!userId) {\n      return { success: false, error: 'Unauthorized' }\n    }\n\n    await dbConnect()\n\n    const now = new Date()\n    await Approval.updateMany(\n      { _id: { $in: ids } },\n      { $set: { status: 'approved', approvedAt: now, approvedBy: userId } }\n    )\n\n    if (comments) {\n      await Approval.updateMany(\n        { _id: { $in: ids } },\n        { $push: { comments: { author: userId, text: comments, date: now } } }\n      )\n    }\n\n    revalidatePath('/approvals')\n\n    return { success: true, count: ids.length }\n  } catch (error) {\n    console.error('[v0] Error bulk approving:', error)\n    return { success: false, error: 'Failed to bulk approve' }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAsKsB,iBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/ui/dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6LAAC,6KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,6LAAC,gLAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,6LAAC,+KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,6LAAC;QAAa,aAAU;;0BACtB,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,qHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,6LAAC,8KAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,6LAAC,4MAAK;;;;;0CACN,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;MAhCS;AAkCT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,6LAAC,oLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 302, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS"}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file:///C:/my-projects/InnoslProcura/components/approvals-client.tsx"],"sourcesContent":["\"use client\"\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { StatusBadge } from \"@/components/status-badge\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { useSearchParams, useRouter } from \"next/navigation\"\nimport { approveRequest, rejectRequest, requestChanges } from \"@/lib/actions/approval-actions\"\nimport { useState, useRef } from \"react\"\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\nimport { Textarea } from \"@/components/ui/textarea\"\n\nconst fmtDate = (d?: string | Date) => d ? new Date(d).toISOString().slice(0, 10) : \"\"\nconst fmtAmount = (n: number) => new Intl.NumberFormat('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(n)\n\nexport default function ApprovalsClient({ approvals }: { approvals: any[] }) {\n  const params = useSearchParams()\n  const router = useRouter()\n  const selectedId = params.get(\"id\") || \"\"\n  const selectedItemId = params.get(\"itemId\") || \"\"\n  const selected = approvals.length\n    ? approvals.find((a: any) => {\n        if (selectedItemId) {\n          const candidates = [a.itemId, a.requisitionId, a.approvalId, a._id]\n          return candidates.some((v: any) => String(v) === String(selectedItemId))\n        }\n        return String(a._id) === String(selectedId)\n      }) || approvals[0]\n    : null\n  const [actionLoading, setActionLoading] = useState<string | null>(null)\n  const [error, setError] = useState<string | null>(null)\n  const [rejectOpen, setRejectOpen] = useState(false)\n  const [rejectReason, setRejectReason] = useState(\"\")\n  const [changesOpen, setChangesOpen] = useState(false)\n  const [changesHtml, setChangesHtml] = useState(\"\")\n  const changesRef = useRef<HTMLDivElement | null>(null)\n\n  const handleSelect = (id: string) => {\n    const url = `/approvals?id=${String(id)}`\n    router.replace(url, { scroll: false })\n  }\n\n  const doApprove = async () => {\n    if (!selected?._id) return\n    setError(null)\n    setActionLoading(\"approve\")\n    const res = await approveRequest(String(selected._id))\n    setActionLoading(null)\n    if (!res?.success) {\n      setError(res?.error || \"Failed to approve\")\n      return\n    }\n    router.refresh()\n  }\n\n  const openReject = () => {\n    setRejectReason(\"\")\n    setRejectOpen(true)\n  }\n\n  const confirmReject = async () => {\n    if (!selected?._id) return\n    setError(null)\n    setActionLoading(\"reject\")\n    const res = await rejectRequest(String(selected._id), rejectReason)\n    setActionLoading(null)\n    if (!res?.success) {\n      setError(res?.error || \"Failed to reject\")\n      return\n    }\n    setRejectOpen(false)\n    router.refresh()\n  }\n\n  const openChanges = () => {\n    setChangesHtml(\"\")\n    setChangesOpen(true)\n  }\n\n  const confirmChanges = async () => {\n    if (!selected?._id) return\n    setError(null)\n    const html = (changesRef.current?.innerHTML || \"\").trim()\n    if (!html) return\n    setActionLoading(\"changes\")\n    const res = await requestChanges(String(selected._id), html)\n    setActionLoading(null)\n    if (!res?.success) {\n      setError(res?.error || \"Failed to request changes\")\n      return\n    }\n    setChangesOpen(false)\n    router.refresh()\n  }\n\n  return (\n    <div>\n      <Card className=\"mb-6\">\n        <CardContent className=\"pt-4 md:pt-6\">\n          <div className=\"flex flex-wrap items-center gap-2 md:gap-4 mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-xs text-muted-foreground\">Queue:</span>\n              <Badge variant=\"secondary\" className=\"text-xs\">My approvals</Badge>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-xs text-muted-foreground\">Type:</span>\n              <Badge variant=\"secondary\" className=\"text-xs\">Requisitions, POs</Badge>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-xs text-muted-foreground\">Priority:</span>\n              <Badge variant=\"secondary\" className=\"text-xs\">High-first</Badge>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-xs text-muted-foreground\">SLA:</span>\n              <Badge variant=\"secondary\" className=\"text-xs\">Due in 3 days</Badge>\n            </div>\n          </div>\n          <div className=\"flex flex-wrap items-center gap-2 md:gap-4 text-xs text-muted-foreground\">\n            <span>{approvals.length} items in your approval queue</span>\n            <span>3 items breaching SLA</span>\n          </div>\n        </CardContent>\n      </Card>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-4 md:gap-6\">\n        <Card className=\"lg:col-span-5\">\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-base\">My approval queue</CardTitle>\n              <span className=\"text-xs text-muted-foreground\">Grouped by due date</span>\n            </div>\n            <CardDescription className=\"text-xs\">\n              Select an item to review and take action.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-1\">\n              {approvals.length === 0 ? (\n                <div className=\"text-center py-8 text-muted-foreground text-sm\">\n                  No approvals pending. Connect to MongoDB to see data.\n                </div>\n              ) : (\n                approvals.slice(0, 10).map((item: any) => (\n                  <div\n                    key={String(item._id)}\n                    onClick={() => handleSelect(String(item._id))}\n                    className={`p-3 rounded-lg cursor-pointer border transition-colors ${String(selected?._id) === String(item._id) ? \"bg-accent/50 border-border\" : \"hover:bg-accent border-transparent hover:border-border\"}`}\n                  >\n                    <div className=\"flex items-start justify-between mb-2\">\n                      <div className=\"flex-1\">\n                        <div className=\"font-medium text-sm mb-1\">{item.itemId}</div>\n                        <div className=\"text-xs text-muted-foreground\">{item.type} • {item.requester}</div>\n                      </div>\n                      <StatusBadge status={item.status} />\n                    </div>\n                    <div className=\"flex items-center justify-between text-xs\">\n                      <div className=\"flex items-center gap-2\">\n                        <StatusBadge status={item.priority} />\n                        <span className=\"text-muted-foreground\">Due: {fmtDate(item.dueDate)}</span>\n                      </div>\n                      <span className=\"font-medium\">${fmtAmount(item.amount)}</span>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-4 px-3\">\n              Tip: Use Bulk approve above for low-risk, policy-compliant requests.\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"lg:col-span-7\">\n          <CardHeader className=\"border-b pb-4\">\n            {selected ? (\n              <div className=\"flex flex-col gap-2\">\n                <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3\">\n                  <CardTitle className=\"text-sm md:text-base\">{selected.itemId} • {selected.type}</CardTitle>\n                  <StatusBadge status={selected.status} />\n                </div>\n                <div className=\"flex flex-wrap items-center gap-2 md:gap-4 text-xs text-muted-foreground\">\n                  <span>Requester: {selected.requester}</span>\n                  <span>Type: {selected.type}</span>\n                  <span>Due: {fmtDate(selected.dueDate)}</span>\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-xs text-muted-foreground\">Select an approval from the left</div>\n            )}\n          </CardHeader>\n          <CardContent className=\"pt-4 md:pt-6\">\n            <div className=\"space-y-4 md:space-y-6\">\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6\">\n                <div>\n                  <h4 className=\"text-xs font-medium text-muted-foreground mb-1\">Decision context</h4>\n                  <div className=\"space-y-2 text-sm\">\n                    <div>\n                      <span className=\"text-muted-foreground\">Total amount</span>\n                      <div className=\"font-medium\">${selected ? fmtAmount(selected.amount) : \"-\"}</div>\n                    </div>\n                    <div>\n                      <span className=\"text-muted-foreground\">Budget impact</span>\n                      <div className=\"font-medium\">Remaining after approval: $210,000</div>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <h4 className=\"text-xs font-medium text-muted-foreground mb-1\">Risk & policy</h4>\n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex items-center gap-2\">\n                      <StatusBadge status={selected ? selected.priority : \"-\"} />\n                      <span className=\"text-xs\">SLA: {selected ? fmtDate(selected.dueDate) : \"-\"}</span>\n                    </div>\n                    <div>\n                      <span className=\"text-muted-foreground\">SLA</span>\n                      <div className=\"font-medium\">Due: {selected ? fmtDate(selected.dueDate) : \"-\"}</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"pt-4 border-t\">\n                <h3 className=\"text-sm font-medium mb-3\">Summary & items</h3>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-muted-foreground\">Category</span>\n                    <span>Marketing & events</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-muted-foreground\">Needed by</span>\n                    <span>2025-04-01</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-muted-foreground\">Supplier preference</span>\n                    <span>Existing panel suppliers only</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-muted-foreground\">Approval route</span>\n                    <span>You → Finance → Marketing Director</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"pt-4 border-t\">\n                <h3 className=\"text-sm font-medium mb-3\">Item</h3>\n                <div className=\"border rounded-lg overflow-hidden\">\n                  <table className=\"w-full text-xs\">\n                    <thead className=\"bg-muted/50\">\n                      <tr>\n                        <th className=\"text-left p-2 font-medium\">Item</th>\n                        <th className=\"text-right p-2 font-medium\">Qty</th>\n                        <th className=\"text-right p-2 font-medium\">Unit</th>\n                        <th className=\"text-right p-2 font-medium\">Unit cost</th>\n                        <th className=\"text-right p-2 font-medium\">Total</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr className=\"border-t\">\n                        <td className=\"p-2\">Digital ads package (Q2)</td>\n                        <td className=\"text-right p-2\">1</td>\n                        <td className=\"text-right p-2\">Package</td>\n                        <td className=\"text-right p-2\">$32,000</td>\n                        <td className=\"text-right p-2\">$32,000</td>\n                      </tr>\n                      <tr className=\"border-t\">\n                        <td className=\"p-2\">Event sponsorship - Singapore summit</td>\n                        <td className=\"text-right p-2\">1</td>\n                        <td className=\"text-right p-2\">Event</td>\n                        <td className=\"text-right p-2\">$24,000</td>\n                        <td className=\"text-right p-2\">$24,000</td>\n                      </tr>\n                      <tr className=\"border-t\">\n                        <td className=\"p-2\">Creative agency support</td>\n                        <td className=\"text-right p-2\">40</td>\n                        <td className=\"text-right p-2\">Hours</td>\n                        <td className=\"text-right p-2\">$170</td>\n                        <td className=\"text-right p-2\">$6,800</td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n\n              <div className=\"pt-4 border-t\">\n                <h3 className=\"text-sm font-medium mb-2\">Comments & notes</h3>\n                <div className=\"bg-muted/30 p-3 rounded-lg text-xs\">\n                  <p className=\"italic text-muted-foreground\">\n                    \"Budget aligned with Q2 regional plan. Please confirm final media split before issuing PO.\" - David Kim, 2025-03-13\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"pt-4 border-t\">\n                <h3 className=\"text-sm font-medium mb-3\">Your decision</h3>\n                <p className=\"text-xs text-muted-foreground mb-4\">\n                  Actions are logged and visible to requester and downstream approvers.\n                </p>\n                {error && (\n                  <div className=\"text-xs text-destructive\">{error}</div>\n                )}\n                <div className=\"flex flex-col sm:flex-row gap-2\">\n                  <Button variant=\"outline\" size=\"sm\" className=\"flex-1 sm:flex-none\" onClick={openChanges} disabled={!selected || actionLoading !== null}>{actionLoading === \"changes\" ? \"Processing...\" : \"Request changes\"}</Button>\n                  <Button variant=\"outline\" size=\"sm\" className=\"flex-1 sm:flex-none\" onClick={openReject} disabled={!selected || actionLoading !== null}>{actionLoading === \"reject\" ? \"Processing...\" : \"Reject\"}</Button>\n                  <Button size=\"sm\" className=\"flex-1\" onClick={doApprove} disabled={!selected || actionLoading !== null}>{actionLoading === \"approve\" ? \"Processing...\" : \"Approve\"}</Button>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n        <Dialog open={rejectOpen} onOpenChange={setRejectOpen}>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Reject approval</DialogTitle>\n              <DialogDescription>Enter a reason for rejection</DialogDescription>\n            </DialogHeader>\n            <Textarea\n              value={rejectReason}\n              onChange={(e) => setRejectReason(e.target.value)}\n              placeholder=\"Reason\"\n            />\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setRejectOpen(false)}>Cancel</Button>\n              <Button onClick={confirmReject} disabled={!rejectReason || actionLoading !== null}>{actionLoading === \"reject\" ? \"Processing...\" : \"Confirm rejection\"}</Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n        <Dialog open={changesOpen} onOpenChange={setChangesOpen}>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Request changes</DialogTitle>\n              <DialogDescription>Describe requested changes</DialogDescription>\n            </DialogHeader>\n            <div className=\"flex items-center gap-2 mb-2\">\n              <Button variant=\"outline\" size=\"icon-sm\" onMouseDown={(e) => e.preventDefault()} onClick={() => document.execCommand('bold')}>B</Button>\n              <Button variant=\"outline\" size=\"icon-sm\" onMouseDown={(e) => e.preventDefault()} onClick={() => document.execCommand('italic')}>I</Button>\n              <Button variant=\"outline\" size=\"icon-sm\" onMouseDown={(e) => e.preventDefault()} onClick={() => document.execCommand('underline')}>U</Button>\n              <Button variant=\"outline\" size=\"icon-sm\" onMouseDown={(e) => e.preventDefault()} onClick={() => document.execCommand('insertUnorderedList')}>•</Button>\n              <Button\n                variant=\"outline\"\n                size=\"icon-sm\"\n                onMouseDown={(e) => e.preventDefault()}\n                onClick={() => {\n                  const url = prompt('Link URL') || ''\n                  if (url) document.execCommand('createLink', false, url)\n                }}\n              >↗</Button>\n            </div>\n            <div\n              ref={changesRef}\n              contentEditable\n              className=\"min-h-[140px] p-3 border rounded-md bg-background text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n              onInput={(e) => setChangesHtml((e.target as HTMLDivElement).innerHTML)}\n              suppressContentEditableWarning\n            />\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setChangesOpen(false)}>Cancel</Button>\n              <Button onClick={confirmChanges} disabled={!changesHtml || actionLoading !== null}>{actionLoading === \"changes\" ? \"Processing...\" : \"Submit changes\"}</Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}