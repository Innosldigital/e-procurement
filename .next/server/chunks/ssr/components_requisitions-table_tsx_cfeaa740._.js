module.exports=[4437,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(87682),h=a.i(97895);function i({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,h.cn)("w-full caption-bottom text-sm",a),...c})})}function j({className:a,...c}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,h.cn)("[&_tr]:border-b",a),...c})}function k({className:a,...c}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,h.cn)("[&_tr:last-child]:border-0",a),...c})}function l({className:a,...c}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,h.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...c})}function m({className:a,...c}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,h.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}function n({className:a,...c}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,h.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}var o=a.i(24017),p=a.i(70106);let q=(0,p.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var r=a.i(33508);let s=(0,p.default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),t=(0,p.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),u=(0,p.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var v=a.i(67900);let w=(0,p.default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var x=a.i(92e3);let y=(0,p.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var z=a.i(83497),A=a.i(50944),B=a.i(5050),C=(0,B.createServerReference)("40d5ec424d7ddefdbca60c7f34c06bc37e7740486a",B.callServer,void 0,B.findSourceMapURL,"getRequisitionById");function D({requisitionId:a,onClose:d}){let[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(!0),j=(0,A.useRouter)();(0,c.useEffect)(()=>{k()},[a]);let k=async()=>{i(!0);let b=await C(a);b.success&&g(b.data),i(!1)},l=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",m=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(a);return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-background rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,b.jsxs)("div",{className:"border-b px-6 py-4 flex items-center justify-between bg-muted/30",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:h?"Loading...":f?.requisitionId||"Requisition Details"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:"View complete requisition information"})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:d,className:"shrink-0",children:(0,b.jsx)(r.X,{className:"h-5 w-5"})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:h?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"text-muted-foreground",children:"Loading requisition details..."})}):f?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,b.jsx)(o.StatusBadge,{status:f.status}),(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",children:[(0,b.jsx)(x.AlertCircle,{className:"h-3 w-3"}),f.priority||"Medium"," Priority"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(u,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Requester"}),(0,b.jsx)("div",{className:"font-medium",children:f.requester})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(v.Building2,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Branch"}),(0,b.jsx)("div",{className:"font-medium",children:f.branch})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(w,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Category"}),(0,b.jsx)("div",{className:"font-medium",children:f.category})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(t,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total Amount"}),(0,b.jsx)("div",{className:"font-semibold text-lg",children:m(f.amount)})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(s,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Needed By"}),(0,b.jsx)("div",{className:"font-medium",children:l(f.neededBy)})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(y,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Submitted"}),(0,b.jsx)("div",{className:"font-medium",children:l(f.createdAt||f.date)})]})]})]})]}),f.description&&(0,b.jsxs)("div",{className:"border rounded-lg p-4 bg-muted/30",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Description"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:f.description})]}),f.lineItems&&f.lineItems.length>0&&(0,b.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-muted/50 px-4 py-3 border-b",children:(0,b.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[(0,b.jsx)(z.Package,{className:"h-4 w-4"}),"Line Items"]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"border-b bg-muted/30",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left px-4 py-3 font-medium",children:"Description"}),(0,b.jsx)("th",{className:"text-right px-4 py-3 font-medium",children:"Quantity"}),(0,b.jsx)("th",{className:"text-right px-4 py-3 font-medium",children:"Unit Cost"}),(0,b.jsx)("th",{className:"text-right px-4 py-3 font-medium",children:"Total"})]})}),(0,b.jsx)("tbody",{children:f.lineItems.map((a,c)=>(0,b.jsxs)("tr",{className:"border-b last:border-0",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:a.description}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:a.quantity}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:m(a.unitCost)}),(0,b.jsx)("td",{className:"px-4 py-3 text-right font-medium",children:m(a.total)})]},c))})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[f.costCenter&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Cost Center"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:f.costCenter})]}),f.approvalRoute&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Approval Route"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:f.approvalRoute})]})]})]}):(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"text-muted-foreground",children:"Requisition not found"})})}),(0,b.jsxs)("div",{className:"border-t px-6 py-4 flex items-center justify-end gap-3 bg-muted/30",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:d,children:"Close"}),f&&(0,b.jsx)(e.Button,{onClick:()=>{j.push(`/approvals?itemId=${encodeURIComponent(f.requisitionId)}`)},children:"Open in Approvals"})]})]})})}function E({items:a}){let[h,p]=(0,c.useState)(""),[r,s]=(0,c.useState)(),[t,u]=(0,c.useState)(),[v,w]=(0,c.useState)(null),x=a=>new Date(a).toISOString().slice(0,10),y=a=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(a),z=(0,c.useMemo)(()=>a.filter(a=>{let b=h.trim().toLowerCase(),c=!b||a.requisitionId?.toLowerCase().includes(b)||a.requester?.toLowerCase().includes(b),d=!r||a.branch===r,e=!t||a.status===t;return c&&d&&e}).sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime()).slice(0,100),[a,h,r,t]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{className:"text-base",children:"All requisitions"}),(0,b.jsxs)(d.CardDescription,{className:"text-xs",children:["Showing ",z.length," result(s)"]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>{let a=z.map(a=>[a.requisitionId,a.requester,a.branch,x(a.date),a.status,y(a.amount)]),b=a=>'"'+a.replace(/"/g,'""')+'"',c=new Blob([[["Requisition ID","Requester","Branch","Date","Status","Amount"],...a].map(a=>a.map(b).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download="requisitions.csv",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(d)},children:[(0,b.jsx)(q,{className:"h-4 w-4 mr-2"}),"Export CSV"]})})]}),(0,b.jsxs)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,b.jsx)(f.Input,{placeholder:"Search by requester or ID",className:"md:col-span-2",value:h,onChange:a=>p(a.target.value)}),(0,b.jsxs)(g.Select,{value:r,onValueChange:a=>s(a),children:[(0,b.jsx)(g.SelectTrigger,{children:(0,b.jsx)(g.SelectValue,{placeholder:"Branch"})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"Global HQ",children:"Global HQ"}),(0,b.jsx)(g.SelectItem,{value:"APAC",children:"APAC"}),(0,b.jsx)(g.SelectItem,{value:"EMEA",children:"EMEA"}),(0,b.jsx)(g.SelectItem,{value:"NA",children:"North America"}),(0,b.jsx)(g.SelectItem,{value:"LATAM",children:"LATAM"})]})]}),(0,b.jsxs)(g.Select,{value:t,onValueChange:a=>u(a),children:[(0,b.jsx)(g.SelectTrigger,{children:(0,b.jsx)(g.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"Pending approval",children:"Pending approval"}),(0,b.jsx)(g.SelectItem,{value:"In review",children:"In review"}),(0,b.jsx)(g.SelectItem,{value:"Approved",children:"Approved"}),(0,b.jsx)(g.SelectItem,{value:"Rejected",children:"Rejected"})]})]})]})]}),(0,b.jsx)(d.CardContent,{children:0===z.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No requisitions found."}):(0,b.jsxs)(i,{children:[(0,b.jsx)(j,{children:(0,b.jsxs)(l,{children:[(0,b.jsx)(m,{children:"ID"}),(0,b.jsx)(m,{children:"Requester"}),(0,b.jsx)(m,{children:"Branch"}),(0,b.jsx)(m,{children:"Date"}),(0,b.jsx)(m,{children:"Status"}),(0,b.jsx)(m,{className:"text-right",children:"Amount"})]})}),(0,b.jsx)(k,{children:z.map(a=>(0,b.jsxs)(l,{onClick:()=>w(a._id),className:"cursor-pointer hover:bg-muted/50 transition-colors",children:[(0,b.jsx)(n,{className:"font-medium",children:a.requisitionId}),(0,b.jsx)(n,{children:a.requester}),(0,b.jsx)(n,{className:"text-muted-foreground",children:a.branch}),(0,b.jsx)(n,{className:"text-muted-foreground",children:x(a.date)}),(0,b.jsx)(n,{children:(0,b.jsx)(o.StatusBadge,{status:a.status})}),(0,b.jsxs)(n,{className:"text-right",children:["$",y(a.amount)]})]},a._id))})]})})]}),v&&(0,b.jsx)(D,{requisitionId:v,onClose:()=>w(null)})]})}a.s(["default",()=>E],4437)}];

//# sourceMappingURL=components_requisitions-table_tsx_cfeaa740._.js.map