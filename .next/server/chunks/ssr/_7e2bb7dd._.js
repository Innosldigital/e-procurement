module.exports=[15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},36469,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(46893),i=a.i(87682),j=a.i(33508),k=a.i(5050),l=(0,k.createServerReference)("408d7f594c904d383107bb8593f1866234419d4b1e",k.callServer,void 0,k.findSourceMapURL,"createTender");function m({onClose:a}){let k=(0,d.useRouter)(),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)({title:"",type:"RFP",category:"",businessUnit:"",region:"",sourcingObjective:"",estimatedValue:"",contractTerm:"",sourcingType:"",invitedSuppliers:"",closeDate:""}),q=async b=>{b.preventDefault(),n(!0);try{let b=await l({...o,estimatedValue:o.estimatedValue?parseFloat(o.estimatedValue):0,invitedSuppliers:o.invitedSuppliers?parseInt(o.invitedSuppliers):0,closeDate:o.closeDate?new Date(o.closeDate):void 0});b.success?(k.refresh(),a()):alert(b.error||"Failed to create tender")}catch(a){console.error("[v0] Error creating tender:",a),alert("Failed to create tender")}finally{n(!1)}},r=(a,b)=>{p(c=>({...c,[a]:b}))};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-background border rounded-lg shadow-lg",children:[(0,b.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b bg-background px-6 py-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Create new tender"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Plan and publish a sourcing event"})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:a,disabled:m,children:(0,b.jsx)(j.X,{className:"h-4 w-4"})})]}),(0,b.jsxs)("form",{onSubmit:q,className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold",children:"Basic information"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"title",children:"Tender title *"}),(0,b.jsx)(f.Input,{id:"title",placeholder:"e.g., Global marketing automation platform",value:o.title,onChange:a=>r("title",a.target.value),required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"type",children:"Tender type *"}),(0,b.jsxs)(i.Select,{value:o.type,onValueChange:a=>r("type",a),children:[(0,b.jsx)(i.SelectTrigger,{id:"type",children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"RFP",children:"RFP - Request for Proposal"}),(0,b.jsx)(i.SelectItem,{value:"RFQ",children:"RFQ - Request for Quotation"}),(0,b.jsx)(i.SelectItem,{value:"RFI",children:"RFI - Request for Information"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"category",children:"Category *"}),(0,b.jsxs)(i.Select,{value:o.category,onValueChange:a=>r("category",a),children:[(0,b.jsx)(i.SelectTrigger,{id:"category",children:(0,b.jsx)(i.SelectValue,{placeholder:"Select category"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"Marketing & Strategy",children:"Marketing & Strategy"}),(0,b.jsx)(i.SelectItem,{value:"IT & Software",children:"IT & Software"}),(0,b.jsx)(i.SelectItem,{value:"Facilities & Office",children:"Facilities & Office"}),(0,b.jsx)(i.SelectItem,{value:"Logistics",children:"Logistics"}),(0,b.jsx)(i.SelectItem,{value:"Professional Services",children:"Professional Services"})]})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold",children:"Sourcing details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"businessUnit",children:"Business unit"}),(0,b.jsx)(f.Input,{id:"businessUnit",placeholder:"e.g., Global Marketing",value:o.businessUnit,onChange:a=>r("businessUnit",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"region",children:"Region"}),(0,b.jsxs)(i.Select,{value:o.region,onValueChange:a=>r("region",a),children:[(0,b.jsx)(i.SelectTrigger,{id:"region",children:(0,b.jsx)(i.SelectValue,{placeholder:"Select region"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"Global",children:"Global"}),(0,b.jsx)(i.SelectItem,{value:"APAC",children:"APAC"}),(0,b.jsx)(i.SelectItem,{value:"EMEA",children:"EMEA"}),(0,b.jsx)(i.SelectItem,{value:"NA",children:"North America"}),(0,b.jsx)(i.SelectItem,{value:"LATAM",children:"LATAM"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"sourcingObjective",children:"Sourcing objective"}),(0,b.jsx)(h.Textarea,{id:"sourcingObjective",placeholder:"Describe the purpose and goals of this tender...",value:o.sourcingObjective,onChange:a=>r("sourcingObjective",a.target.value),rows:3})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"estimatedValue",children:"Estimated contract value ($)"}),(0,b.jsx)(f.Input,{id:"estimatedValue",type:"number",placeholder:"450000",value:o.estimatedValue,onChange:a=>r("estimatedValue",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"contractTerm",children:"Contract term"}),(0,b.jsx)(f.Input,{id:"contractTerm",placeholder:"e.g., 3-year term",value:o.contractTerm,onChange:a=>r("contractTerm",a.target.value)})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold",children:"Supplier selection"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"sourcingType",children:"Sourcing type"}),(0,b.jsxs)(i.Select,{value:o.sourcingType,onValueChange:a=>r("sourcingType",a),children:[(0,b.jsx)(i.SelectTrigger,{id:"sourcingType",children:(0,b.jsx)(i.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"Competitive RFP",children:"Competitive RFP - 5 invited suppliers"}),(0,b.jsx)(i.SelectItem,{value:"Competitive RFQ",children:"Competitive RFQ - 3 invited suppliers"}),(0,b.jsx)(i.SelectItem,{value:"Open",children:"Open tender"}),(0,b.jsx)(i.SelectItem,{value:"Negotiated",children:"Negotiated tender"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"invitedSuppliers",children:"Number of invited suppliers"}),(0,b.jsx)(f.Input,{id:"invitedSuppliers",type:"number",placeholder:"5",value:o.invitedSuppliers,onChange:a=>r("invitedSuppliers",a.target.value)})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"closeDate",children:"Tender close date"}),(0,b.jsx)(f.Input,{id:"closeDate",type:"date",value:o.closeDate,onChange:a=>r("closeDate",a.target.value)})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:a,disabled:m,children:"Cancel"}),(0,b.jsx)(e.Button,{type:"submit",disabled:m,children:m?"Creating...":"Create tender"})]})]})]})})}a.s(["CreateTenderForm",()=>m],36469)},59,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(98003),e=a.i(40695),f=a.i(36469),g=a.i(33508),h=a.i(15618),i=a.i(81560),j=a.i(5522),k=a.i(17171),l=a.i(46893),m=a.i(87682),n=a.i(5050),o=(0,n.createServerReference)("404879080b783455bfd8761a09511929474115d36f",n.callServer,void 0,n.findSourceMapURL,"createRequisition"),p=a.i(50944);function q({onClose:a}){let d=(0,p.useRouter)(),[f,n]=(0,c.useTransition)(),[q,r]=(0,c.useState)([{id:"1",description:"",quantity:1,unit:"Unit"}]),s=(a,b,c)=>{r(q.map(d=>d.id===a?{...d,[b]:c}:d))},t=async b=>{b.preventDefault();let c=new FormData(b.currentTarget),e=`REQ-${Date.now().toString().slice(-4)}`;c.set("requisitionId",e),c.set("amount","0"),c.set("lineItems",JSON.stringify(q.map(a=>({description:a.description,quantity:a.quantity,unit:a.unit})))),c.set("status","Pending approval"),n(async()=>{let b=await o(c);b.success?(d.refresh(),a()):alert(b.error||"Failed to create requisition")})};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-background rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-6 border-b",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg md:text-xl font-semibold",children:"Create Requisition"}),(0,b.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground mt-1",children:"Submit a new purchase requisition for approval"})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:a,children:(0,b.jsx)(g.X,{className:"h-5 w-5"})})]}),(0,b.jsxs)("form",{onSubmit:t,className:"flex-1 overflow-y-auto",children:[(0,b.jsxs)("div",{className:"p-4 md:p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm",children:"Basic Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"requester",children:"Requester Name *"}),(0,b.jsx)(j.Input,{id:"requester",name:"requester",required:!0,placeholder:"Enter requester name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"branch",children:"Branch *"}),(0,b.jsxs)(m.Select,{name:"branch",required:!0,children:[(0,b.jsx)(m.SelectTrigger,{children:(0,b.jsx)(m.SelectValue,{placeholder:"Select branch"})}),(0,b.jsx)(m.SelectContent,{children:(0,b.jsx)(m.SelectItem,{value:"Global HQ",children:"InnoSL HQ"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"category",children:"Category *"}),(0,b.jsxs)(m.Select,{name:"category",required:!0,children:[(0,b.jsx)(m.SelectTrigger,{children:(0,b.jsx)(m.SelectValue,{placeholder:"Select category"})}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"Marketing & events",children:"Marketing & events"}),(0,b.jsx)(m.SelectItem,{value:"IT & Software",children:"IT & Software"}),(0,b.jsx)(m.SelectItem,{value:"Facilities & Office",children:"Facilities & Office"}),(0,b.jsx)(m.SelectItem,{value:"Logistics",children:"Logistics"}),(0,b.jsx)(m.SelectItem,{value:"Professional Services",children:"Professional Services"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"priority",children:"Priority *"}),(0,b.jsxs)(m.Select,{name:"priority",defaultValue:"medium",required:!0,children:[(0,b.jsx)(m.SelectTrigger,{children:(0,b.jsx)(m.SelectValue,{placeholder:"Select priority"})}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"low",children:"Low"}),(0,b.jsx)(m.SelectItem,{value:"medium",children:"Medium"}),(0,b.jsx)(m.SelectItem,{value:"high",children:"High"}),(0,b.jsx)(m.SelectItem,{value:"urgent",children:"Urgent"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"neededBy",children:"Needed By Date *"}),(0,b.jsx)(j.Input,{id:"neededBy",name:"neededBy",type:"date",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"costCenter",children:"Cost Center"}),(0,b.jsx)(j.Input,{id:"costCenter",name:"costCenter",placeholder:"e.g., MKT-APAC-042"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(l.Textarea,{id:"description",name:"description",placeholder:"Provide additional context or justification for this requisition",rows:3})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm",children:"Line Items"}),(0,b.jsxs)(e.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{r([...q,{id:Date.now().toString(),description:"",quantity:1,unit:"Unit"}])},children:[(0,b.jsx)(h.Plus,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),(0,b.jsx)("div",{className:"space-y-3",children:q.map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 items-start p-3 md:p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 w-full",children:[(0,b.jsxs)("div",{className:"col-span-1 sm:col-span-2 lg:col-span-5 space-y-2",children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Description"}),(0,b.jsx)(j.Input,{placeholder:"Item description",value:a.description,onChange:b=>s(a.id,"description",b.target.value),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Quantity"}),(0,b.jsx)(j.Input,{type:"number",min:"1",value:a.quantity,onChange:b=>s(a.id,"quantity",Number(b.target.value)),required:!0})]})]}),q.length>1&&(0,b.jsx)(e.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{var b;return b=a.id,void(q.length>1&&r(q.filter(a=>a.id!==b)))},className:"md:mt-7",children:(0,b.jsx)(i.Trash2,{className:"h-4 w-4 text-destructive"})})]},a.id))})]})]}),(0,b.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row items-center justify-end gap-3 p-4 md:p-6 border-t bg-muted/50",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:a,disabled:f,children:"Cancel"}),(0,b.jsx)(e.Button,{type:"submit",disabled:f,children:f?"Creating...":"Create Requisition"})]})]})]})})}function r(){let[a,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(!1),{user:j}=(0,d.useUser)(),[k,l]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{let a=String((j?.publicMetadata||{}).role||"").toLowerCase().replace(/[\s_-]/g,"");l("admin"===a||"company"===a||"superadmin"===a)},[j]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex gap-2 md:gap-3",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",className:"flex-1 sm:flex-none bg-transparent",onClick:()=>g(!0),children:"Create tender"}),k&&(0,b.jsx)(e.Button,{size:"sm",className:"flex-1 sm:flex-none",onClick:()=>i(!0),children:"Create requisition"})]}),a&&(0,b.jsx)(f.CreateTenderForm,{onClose:()=>g(!1)}),h&&(0,b.jsx)(q,{onClose:()=>i(!1)})]})}a.s(["DashboardClient",()=>r,"default",0,r],59)}];

//# sourceMappingURL=_7e2bb7dd._.js.map