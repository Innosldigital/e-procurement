module.exports=[46397,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(98003),e=a.i(21161),f=a.i(15618),g=a.i(83497),h=a.i(4720),i=a.i(70106);let j=(0,i.default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var k=a.i(92e3),l=a.i(24017),m=a.i(84994),n=a.i(5050),o=(0,n.createServerReference)("40d2ad5d3baa7b392b04fbb82797f2594544e39509",n.callServer,void 0,n.findSourceMapURL,"closePurchaseOrder"),p=a.i(33508),q=a.i(81560),r=a.i(40695),s=a.i(5522),t=a.i(17171),u=a.i(46893),v=a.i(87682),w=(0,n.createServerReference)("40205469e8fc58204db1420bdbaca451da4e1cae08",n.callServer,void 0,n.findSourceMapURL,"createPurchaseOrder");function x({onClose:a,onCreated:d}){let[e,g]=(0,c.useTransition)(),[h,i]=(0,c.useState)([{id:"1",description:"",qty:1,unitPrice:0,total:0}]),j=(a,b,c)=>{i(h.map(d=>{if(d.id===a){let a={...d,[b]:c};return("qty"===b||"unitPrice"===b)&&(a.total=(Number(a.qty)||0)*(Number(a.unitPrice)||0)),a}return d}))},k=h.reduce((a,b)=>a+(Number(b.total)||0),0),l=async b=>{b.preventDefault();let c=new FormData(b.currentTarget),e=String(c.get("supplier")||""),f=String(c.get("requester")||""),i=String(c.get("department")||""),j=String(c.get("linkedRequisition")||""),k=String(c.get("currency")||"USD"),l=String(c.get("purpose")||""),m=String(c.get("paymentTerms")||""),n=String(c.get("requestedDelivery")||""),o=n?new Date(n):void 0;g(async()=>{let b=await w({supplier:e,requester:f,department:i,linkedRequisition:j,currency:k,purpose:l,paymentTerms:m,requestedDelivery:o,lineItems:h.map(a=>({description:a.description,qty:a.qty,unitPrice:a.unitPrice}))});b.success?(d&&d(),a()):alert(b.error||"Failed to create purchase order")})};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-background rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-6 border-b",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg md:text-xl font-semibold",children:"Create Purchase Order"}),(0,b.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground mt-1",children:"Issue a new purchase order to a supplier"})]}),(0,b.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:a,children:(0,b.jsx)(p.X,{className:"h-5 w-5"})})]}),(0,b.jsxs)("form",{onSubmit:l,className:"flex-1 overflow-y-auto",children:[(0,b.jsxs)("div",{className:"p-4 md:p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm",children:"Header"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"supplier",children:"Supplier *"}),(0,b.jsx)(s.Input,{id:"supplier",name:"supplier",required:!0,placeholder:"Enter supplier name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"requester",children:"Requester"}),(0,b.jsx)(s.Input,{id:"requester",name:"requester",placeholder:"Requester name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"department",children:"Department"}),(0,b.jsx)(s.Input,{id:"department",name:"department",placeholder:"Department"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"linkedRequisition",children:"Linked Requisition"}),(0,b.jsx)(s.Input,{id:"linkedRequisition",name:"linkedRequisition",placeholder:"REQ-xxxx"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"currency",children:"Currency"}),(0,b.jsxs)(v.Select,{name:"currency",defaultValue:"USD",children:[(0,b.jsx)(v.SelectTrigger,{children:(0,b.jsx)(v.SelectValue,{placeholder:"Select currency"})}),(0,b.jsxs)(v.SelectContent,{children:[(0,b.jsx)(v.SelectItem,{value:"USD",children:"USD"}),(0,b.jsx)(v.SelectItem,{value:"EUR",children:"EUR"}),(0,b.jsx)(v.SelectItem,{value:"GBP",children:"GBP"}),(0,b.jsx)(v.SelectItem,{value:"NLE",children:"NLE"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"requestedDelivery",children:"Requested Delivery"}),(0,b.jsx)(s.Input,{id:"requestedDelivery",name:"requestedDelivery",type:"date"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm",children:"Commercial terms"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"purpose",children:"Purpose"}),(0,b.jsx)(u.Textarea,{id:"purpose",name:"purpose",rows:3,placeholder:"Describe the purpose of this PO"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"paymentTerms",children:"Payment terms"}),(0,b.jsx)(s.Input,{id:"paymentTerms",name:"paymentTerms",placeholder:"e.g., Net 30"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm",children:"Line items"}),(0,b.jsxs)(r.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{i([...h,{id:Date.now().toString(),description:"",qty:1,unitPrice:0,total:0}])},children:[(0,b.jsx)(f.Plus,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),(0,b.jsx)("div",{className:"space-y-3",children:h.map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 items-start p-3 md:p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 w-full",children:[(0,b.jsxs)("div",{className:"col-span-1 sm:col-span-2 lg:col-span-3 space-y-2",children:[(0,b.jsx)(t.Label,{className:"text-xs",children:"Description"}),(0,b.jsx)(s.Input,{placeholder:"Item description",value:a.description,onChange:b=>j(a.id,"description",b.target.value),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{className:"text-xs",children:"Quantity"}),(0,b.jsx)(s.Input,{type:"number",min:"1",value:a.qty,onChange:b=>j(a.id,"qty",Number(b.target.value)),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{className:"text-xs",children:"Unit Price ($)"}),(0,b.jsx)(s.Input,{type:"number",min:"0",step:"0.01",value:a.unitPrice,onChange:b=>j(a.id,"unitPrice",Number(b.target.value)),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{className:"text-xs",children:"Total"}),(0,b.jsx)(s.Input,{value:a.total,readOnly:!0})]})]}),(0,b.jsx)(r.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{var b;return b=a.id,void(h.length>1&&i(h.filter(a=>a.id!==b)))},"aria-label":"Remove item",children:(0,b.jsx)(q.Trash2,{className:"h-4 w-4"})})]},a.id))})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total"}),(0,b.jsxs)("div",{className:"font-semibold",children:["$",k.toLocaleString()]})]})]}),(0,b.jsxs)("div",{className:"p-4 md:p-6 border-t flex items-center justify-end gap-2",children:[(0,b.jsx)(r.Button,{variant:"outline",type:"button",onClick:a,children:"Cancel"}),(0,b.jsx)(r.Button,{type:"submit",disabled:e,children:e?"Issuing...":"Issue PO"})]})]})]})})}let y=(0,i.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),z={numberingPrefix:"PO",startingNumber:1e3,autoApprovalThreshold:5e3,defaultPaymentTerms:"Net 30",defaultCurrency:"USD",requireApprovalForAll:!1,enableEmailNotifications:!0,notifyOnApproval:!0,notifyOnReceipt:!0,notifyOnInvoice:!1,defaultTaxRate:0,allowPartialReceipts:!0,requireReceiptBeforeInvoice:!1};function A({onClose:a,onSave:d}){let[f,g]=(0,c.useState)(z),[h,i]=(0,c.useState)(!1);return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white border-b p-6 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e.Settings,{className:"w-6 h-6 text-gray-700"}),(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Purchase Order Settings"})]}),(0,b.jsx)("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(p.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"General Settings"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PO Number Prefix"}),(0,b.jsx)("input",{type:"text",value:f.numberingPrefix,onChange:a=>g({...f,numberingPrefix:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"PO"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting Number"}),(0,b.jsx)("input",{type:"number",value:f.startingNumber,onChange:a=>g({...f,startingNumber:Number.parseInt(a.target.value)||1e3}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Currency"}),(0,b.jsxs)("select",{value:f.defaultCurrency,onChange:a=>g({...f,defaultCurrency:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,b.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,b.jsx)("option",{value:"GBP",children:"GBP - British Pound"}),(0,b.jsx)("option",{value:"CAD",children:"CAD - Canadian Dollar"}),(0,b.jsx)("option",{value:"AUD",children:"AUD - Australian Dollar"}),(0,b.jsx)("option",{value:"NLE",children:"NLE - Sierra Leonean Leone"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Payment Terms"}),(0,b.jsxs)("select",{value:f.defaultPaymentTerms,onChange:a=>g({...f,defaultPaymentTerms:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"Net 15",children:"Net 15"}),(0,b.jsx)("option",{value:"Net 30",children:"Net 30"}),(0,b.jsx)("option",{value:"Net 60",children:"Net 60"}),(0,b.jsx)("option",{value:"Net 90",children:"Net 90"}),(0,b.jsx)("option",{value:"Due on Receipt",children:"Due on Receipt"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Tax Rate (%)"}),(0,b.jsx)("input",{type:"number",step:"0.01",value:f.defaultTaxRate,onChange:a=>g({...f,defaultTaxRate:Number.parseFloat(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Approval Settings"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Auto-Approval Threshold ($)"}),(0,b.jsx)("input",{type:"number",value:f.autoApprovalThreshold,onChange:a=>g({...f,autoApprovalThreshold:Number.parseFloat(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"5000"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"POs below this amount will be auto-approved"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:"requireApproval",checked:f.requireApprovalForAll,onChange:a=>g({...f,requireApprovalForAll:a.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,b.jsx)("label",{htmlFor:"requireApproval",className:"text-sm text-gray-700",children:"Require approval for all purchase orders"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Receipt & Invoice Settings"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:"allowPartialReceipts",checked:f.allowPartialReceipts,onChange:a=>g({...f,allowPartialReceipts:a.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,b.jsx)("label",{htmlFor:"allowPartialReceipts",className:"text-sm text-gray-700",children:"Allow partial receipts for line items"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:"requireReceipt",checked:f.requireReceiptBeforeInvoice,onChange:a=>g({...f,requireReceiptBeforeInvoice:a.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,b.jsx)("label",{htmlFor:"requireReceipt",className:"text-sm text-gray-700",children:"Require goods receipt before creating invoice"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Settings"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:"enableNotifications",checked:f.enableEmailNotifications,onChange:a=>g({...f,enableEmailNotifications:a.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,b.jsx)("label",{htmlFor:"enableNotifications",className:"text-sm font-medium text-gray-700",children:"Enable email notifications"})]}),f.enableEmailNotifications&&(0,b.jsxs)("div",{className:"ml-7 space-y-3 border-l-2 border-gray-200 pl-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:"notifyApproval",checked:f.notifyOnApproval,onChange:a=>g({...f,notifyOnApproval:a.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,b.jsx)("label",{htmlFor:"notifyApproval",className:"text-sm text-gray-700",children:"Notify when PO is approved"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:"notifyReceipt",checked:f.notifyOnReceipt,onChange:a=>g({...f,notifyOnReceipt:a.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,b.jsx)("label",{htmlFor:"notifyReceipt",className:"text-sm text-gray-700",children:"Notify when goods are received"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:"notifyInvoice",checked:f.notifyOnInvoice,onChange:a=>g({...f,notifyOnInvoice:a.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,b.jsx)("label",{htmlFor:"notifyInvoice",className:"text-sm text-gray-700",children:"Notify when invoice is created"})]})]})]})]})]}),(0,b.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t p-6 flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-gray-700",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{i(!0),setTimeout(()=>{d?.(f),i(!1),a()},500)},disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:h?(0,b.jsx)(b.Fragment,{children:"Saving..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y,{className:"w-4 h-4"}),"Save Settings"]})})]})]})})}let B=a=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a);function C({purchaseOrder:a,onClose:d,onCreated:e}){let f,g,i,j,k,l,m,n,[o,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)((g=(f=new Date).getFullYear(),i=String(f.getMonth()+1).padStart(2,"0"),j=Math.floor(1e3*Math.random()).toString().padStart(3,"0"),`INV-${g}${i}-${j}`)),[t,u]=(0,c.useState)(new Date().toISOString().slice(0,10)),[v,w]=(0,c.useState)((k=new Date,m=(l=(a.paymentTerms||"Net 30").match(/\d+/))?Number.parseInt(l[0]):30,(n=new Date(k)).setDate(n.getDate()+m),n.toISOString().slice(0,10))),[x,z]=(0,c.useState)(0),[A,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(a.lineItems.map(a=>({line:a.line,description:a.description,quantityReceived:a.received,quantityToInvoice:a.received,unitPrice:a.received>0?a.lineTotal/a.received:0,lineTotal:a.lineTotal,selected:a.received>0}))),F=D.filter(a=>a.selected).reduce((a,b)=>a+b.unitPrice*b.quantityToInvoice,0),G=x/100*F,H=F+G,I=async()=>{q(!0),setTimeout(()=>{e?.(),q(!1),d()},1e3)},J=D.filter(a=>a.selected).length;return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white border-b p-6 flex items-center justify-between z-10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.FileText,{className:"w-6 h-6 text-blue-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Create Invoice Draft"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["PO: ",a.poNumber," 路 ",a.supplier]})]})]}),(0,b.jsx)("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(p.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Invoice Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Number"}),(0,b.jsx)("input",{type:"text",value:r,onChange:a=>s(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Date"}),(0,b.jsx)("input",{type:"date",value:t,onChange:a=>u(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),(0,b.jsx)("input",{type:"date",value:v,onChange:a=>w(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Payment Terms"}),(0,b.jsx)("div",{className:"text-gray-900 font-medium",children:a.paymentTerms})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Currency"}),(0,b.jsx)("div",{className:"text-gray-900 font-medium",children:a.currency})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900",children:["Line Items (",J," of ",D.length," selected)"]}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Only received items can be invoiced"})]}),(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left p-3 font-medium text-gray-700 w-12",children:(0,b.jsx)("input",{type:"checkbox",checked:D.every(a=>a.selected||0===a.quantityReceived),onChange:a=>{let b=a.target.checked;E(D.map(a=>a.quantityReceived>0?{...a,selected:b}:a))},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),(0,b.jsx)("th",{className:"text-left p-3 font-medium text-gray-700",children:"Line"}),(0,b.jsx)("th",{className:"text-left p-3 font-medium text-gray-700",children:"Description"}),(0,b.jsx)("th",{className:"text-right p-3 font-medium text-gray-700",children:"Received"}),(0,b.jsx)("th",{className:"text-right p-3 font-medium text-gray-700",children:"Qty to Invoice"}),(0,b.jsx)("th",{className:"text-right p-3 font-medium text-gray-700",children:"Unit Price"}),(0,b.jsx)("th",{className:"text-right p-3 font-medium text-gray-700",children:"Line Total"})]})}),(0,b.jsx)("tbody",{className:"divide-y",children:D.map(a=>{let c=0===a.quantityReceived;return(0,b.jsxs)("tr",{className:`${c?"bg-gray-50 opacity-50":"hover:bg-gray-50"}`,children:[(0,b.jsx)("td",{className:"p-3",children:(0,b.jsx)("input",{type:"checkbox",checked:a.selected,onChange:()=>{var b;return b=a.line,void E(D.map(a=>a.line===b?{...a,selected:!a.selected}:a))},disabled:c,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 disabled:cursor-not-allowed"})}),(0,b.jsx)("td",{className:"p-3 text-gray-900",children:a.line}),(0,b.jsx)("td",{className:"p-3 text-gray-900",children:a.description}),(0,b.jsx)("td",{className:"p-3 text-right text-gray-900",children:a.quantityReceived}),(0,b.jsx)("td",{className:"p-3 text-right",children:(0,b.jsx)("input",{type:"number",value:a.quantityToInvoice,onChange:b=>{var c,d;return c=a.line,d=Number.parseInt(b.target.value)||0,void E(D.map(a=>{if(a.line===c){let b=Math.max(0,Math.min(d,a.quantityReceived));return{...a,quantityToInvoice:b}}return a}))},disabled:c||!a.selected,min:0,max:a.quantityReceived,className:"w-20 px-2 py-1 border border-gray-300 rounded text-right focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed"})}),(0,b.jsxs)("td",{className:"p-3 text-right text-gray-900",children:["$",B(a.unitPrice)]}),(0,b.jsxs)("td",{className:"p-3 text-right font-medium text-gray-900",children:["$",B(a.selected?a.unitPrice*a.quantityToInvoice:0)]})]},a.line)})})]})})})]}),(0,b.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,b.jsxs)("div",{className:"max-w-md ml-auto space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,b.jsxs)("span",{className:"text-gray-900 font-medium",children:["$",B(F)]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Tax Rate (%)"}),(0,b.jsx)("input",{type:"number",value:x,onChange:a=>z(Number.parseFloat(a.target.value)||0),step:"0.01",min:0,max:100,className:"w-20 px-2 py-1 border border-gray-300 rounded text-right focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,b.jsxs)("span",{className:"text-gray-900 font-medium",children:["$",B(G)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-3",children:[(0,b.jsx)("span",{className:"text-gray-900",children:"Total"}),(0,b.jsxs)("span",{className:"text-gray-900",children:["$",B(H)]})]})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Notes (Optional)"}),(0,b.jsx)("textarea",{value:A,onChange:a=>C(a.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Add any additional notes or instructions..."})]}),(0,b.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(h.FileText,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-blue-900",children:"Invoice Summary"}),(0,b.jsxs)("div",{className:"text-sm text-blue-800 mt-1",children:["Invoice ",r," will be created for"," ",J," line item",1!==J?"s":""," totaling $",B(H)," ",a.currency,". Due date:"," ",v?new Date(v).toISOString().slice(0,10):"","."]})]})]})})]}),(0,b.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t p-6 flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:d,disabled:o,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,b.jsx)("button",{onClick:I,disabled:o||0===J,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:o?(0,b.jsx)(b.Fragment,{children:"Saving..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y,{className:"w-4 h-4"}),"Save Invoice Draft"]})})]})]})})}let D=a=>a?new Date(a).toISOString().slice(0,10):"",E=a=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(a);function F(){let[a,i]=(0,c.useState)([]),[n,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,y]=(0,c.useState)(!1),[z,B]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),{user:H}=(0,d.useUser)(),[I,J]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=!0;return r(!0),(0,m.getPurchaseOrders)().then(b=>{let c=b&&b.success?b.data:[];a&&(i(c),p(c[0]||null))}).catch(()=>{a&&(i([]),p(null))}).finally(()=>{a&&r(!1)}),()=>{a=!1}},[]),(0,c.useEffect)(()=>{J(["admin","superadmin"].includes(String((H?.publicMetadata||{}).role||"").toLowerCase().replace(/[\s_-]/g,"")))},[H]);let K=(a,b)=>{v({message:a,type:b}),setTimeout(()=>v(null),3e3)},L=async()=>{t("receive"),setTimeout(()=>{K("Goods receipt recorded successfully","success"),t(null)},1e3)},M=async()=>{G(!0)},N=async()=>{if(n)try{t("close");let a=await o(n._id);if(a&&a.success){let a=await (0,m.getPurchaseOrders)();if(a&&a.success){i(a.data);let b=a.data.find(a=>a._id===n._id)||a.data[0]||null;p(b)}K("Purchase order closed","success")}else K(a?.error||"Failed to close purchase order","error")}catch(a){K("Failed to close purchase order","error")}finally{t(null)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[u&&(0,b.jsx)("div",{className:`fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg ${"success"===u.type?"bg-green-500":"bg-red-500"} text-white`,children:u.message}),(0,b.jsx)("div",{className:"bg-white border-b",children:(0,b.jsxs)("div",{className:" px-4 sm:px-6 lg:px-6 py-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Purchase Orders"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Track issuance, receipt, and invoicing status across your POs."})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",onClick:()=>B(!0),children:[(0,b.jsx)(e.Settings,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"PO settings"})]}),I&&(0,b.jsxs)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",onClick:()=>y(!0),children:[(0,b.jsx)(f.Plus,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"New PO"})]})]})]}),(0,b.jsxs)("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-600",children:"View:"})," ",(0,b.jsx)("span",{className:"font-medium",children:"Open & partially received"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Status:"})," ",(0,b.jsx)("span",{className:"font-medium",children:"Pending receipt, Pending invoice"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Supplier:"})," ",(0,b.jsx)("span",{className:"font-medium",children:"Top 20 strategic"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Date:"})," ",(0,b.jsx)("span",{className:"font-medium",children:"Last 90 days"})]})]}),(0,b.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:a.length}),(0,b.jsx)("div",{className:"text-sm text-blue-700",children:"open POs"})]}),(0,b.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-900",children:a.filter(a=>(a.status||"").toLowerCase().includes("pending receipt")).length}),(0,b.jsx)("div",{className:"text-sm text-yellow-700",children:"awaiting receipt"})]}),(0,b.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-purple-900",children:a.filter(a=>(a.status||"").toLowerCase().includes("pending invoice")).length}),(0,b.jsx)("div",{className:"text-sm text-purple-700",children:"pending invoice"})]})]})]})}),(0,b.jsxs)("div",{className:"px-4 sm:px-6 lg:px-6 py-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,b.jsxs)("div",{className:"p-4 border-b",children:[(0,b.jsx)("h2",{className:"font-semibold text-gray-900",children:"PO worklist"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Select a PO to review receipt and invoicing details."}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Sorted by delivery date"})]}),(0,b.jsx)("div",{className:"divide-y max-h-[600px] overflow-y-auto",children:q?(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading purchase orders..."}):0===a.length?(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No purchase orders found."}):a.map(a=>(0,b.jsxs)("button",{onClick:()=>p(a),className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${n?._id===a._id?"bg-blue-50":""}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsx)("div",{className:"font-semibold text-gray-900",children:a.poNumber}),(0,b.jsx)(l.StatusBadge,{status:a.status})]}),(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:a.supplier}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("span",{className:"font-medium text-gray-900",children:["$",E(a.total)]}),(0,b.jsx)("span",{className:"text-gray-500",children:D(a.keyDates?.requestedDelivery)})]})]},a._id))}),(0,b.jsx)("div",{className:"p-4 bg-blue-50 border-t",children:(0,b.jsx)("p",{className:"text-xs text-blue-800",children:' Tip: Switch "View" to see only POs blocked by invoice or receipt issues.'})})]})}),(0,b.jsx)("div",{className:"lg:col-span-2",children:n&&(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,b.jsxs)("div",{className:"p-6 border-b",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:[n.poNumber," 路 ",n.supplier]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 mt-2 text-sm text-gray-600",children:[(0,b.jsxs)("span",{children:["Requester: ",n.requester]}),(0,b.jsxs)("span",{children:["Department: ",n.department]})]})]}),(0,b.jsx)(l.StatusBadge,{status:n.status})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(g.Package,{className:"w-5 h-5 text-gray-600"}),(0,b.jsxs)("span",{className:"font-medium",children:[n.lineItems.filter(a=>(a.received||0)>=(a.ordered||0)).length," ","of ",n.lineItems.length," lines fully received"]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[(0,b.jsxs)("span",{children:["Linked requisition: ",n.linkedRequisition]}),(0,b.jsxs)("span",{children:["Currency: ",n.currency]})]})]})]}),(0,b.jsxs)("div",{className:"p-6 border-b",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Summary & commercial terms"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Purpose"}),(0,b.jsx)("div",{className:"text-gray-900",children:n.purpose})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"PO value"}),(0,b.jsxs)("div",{className:"text-gray-900",children:["$",E(n.total)," 路 Tax exclusive"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Payment terms"}),(0,b.jsx)("div",{className:"text-gray-900",children:n.paymentTerms})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Key dates"}),(0,b.jsxs)("div",{className:"text-gray-900",children:["Issued: ",D(n.keyDates?.issued)," 路 Delivery:"," ",D(n.keyDates?.requestedDelivery)]})]})]})]}),(0,b.jsxs)("div",{className:"p-6 border-b",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Line items & receipt status"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left p-3 font-medium text-gray-700",children:"Line"}),(0,b.jsx)("th",{className:"text-left p-3 font-medium text-gray-700",children:"Description"}),(0,b.jsx)("th",{className:"text-right p-3 font-medium text-gray-700",children:"Ordered"}),(0,b.jsx)("th",{className:"text-right p-3 font-medium text-gray-700",children:"Received"}),(0,b.jsx)("th",{className:"text-right p-3 font-medium text-gray-700",children:"Remaining"}),(0,b.jsx)("th",{className:"text-right p-3 font-medium text-gray-700",children:"Total"})]})}),(0,b.jsx)("tbody",{className:"divide-y",children:n.lineItems.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"p-3",children:a.line}),(0,b.jsx)("td",{className:"p-3",children:a.description}),(0,b.jsx)("td",{className:"p-3 text-right",children:a.ordered}),(0,b.jsx)("td",{className:"p-3 text-right",children:(0,b.jsx)("span",{className:a.received===a.ordered?"text-green-600 font-medium":"",children:a.received})}),(0,b.jsx)("td",{className:"p-3 text-right",children:(0,b.jsx)("span",{className:a.remaining>0?"text-yellow-600 font-medium":"",children:a.remaining})}),(0,b.jsxs)("td",{className:"p-3 text-right font-medium",children:["$",E(a.lineTotal)]})]},a.line))})]})})]}),(0,b.jsxs)("div",{className:"p-6 border-b",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Delivery & invoicing"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Ship-to location"}),(0,b.jsx)("div",{className:"text-gray-900",children:n.delivery?.shipTo})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Invoice-to"}),(0,b.jsx)("div",{className:"text-gray-900",children:n.delivery?.invoiceTo})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Receipt status"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(n.receiptStatus?.status||"").toLowerCase().includes("fully received")?(0,b.jsx)(j,{className:"w-4 h-4 text-green-600"}):(0,b.jsx)(k.AlertCircle,{className:"w-4 h-4 text-yellow-600"}),(0,b.jsx)("span",{className:"text-gray-900",children:n.receiptStatus?.status})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Invoice status"}),(0,b.jsx)("div",{className:"text-gray-900",children:n.invoiceStatus?.status})]})]})]}),(0,b.jsxs)("div",{className:"p-6 border-b",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Approval & change history"}),(0,b.jsx)("div",{className:"space-y-4",children:(n.approvalHistory||[]).map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),c<(n.approvalHistory||[]).length-1&&(0,b.jsx)("div",{className:"w-px h-full bg-gray-300 mt-1"})]}),(0,b.jsxs)("div",{className:"flex-1 pb-4",children:[(0,b.jsx)("div",{className:"font-medium text-gray-900",children:a.event}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[D(a.date),a.actor?` \xb7 ${a.actor}`:""]})]})]},c))})]}),(0,b.jsxs)("div",{className:"p-6 border-b",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Notes"}),(0,b.jsx)("p",{className:"text-gray-700",children:n.notes})]}),(0,b.jsxs)("div",{className:"p-6 bg-gray-50",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Next actions"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Record receipts and keep PO aligned with actual deliveries and invoices."}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)("button",{onClick:L,disabled:null!==s,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:"receive"===s?(0,b.jsx)(b.Fragment,{children:"Processing..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Package,{className:"w-4 h-4"}),"Receive goods"]})}),(0,b.jsx)("button",{onClick:M,disabled:null!==s,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:"invoice"===s?(0,b.jsx)(b.Fragment,{children:"Processing..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.FileText,{className:"w-4 h-4"}),"Create invoice draft"]})}),(0,b.jsx)("button",{onClick:N,disabled:null!==s,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"close"===s?"Processing...":"Close PO"})]})]})]})})]}),w&&(0,b.jsx)(x,{onClose:()=>y(!1),onCreated:async()=>{let a=await (0,m.getPurchaseOrders)();a&&a.success&&(i(a.data),p(a.data[0]||null))}}),z&&(0,b.jsx)(A,{onClose:()=>B(!1),onSave:a=>{console.log("Settings saved:",a),K("Settings saved successfully","success")}}),F&&n&&(0,b.jsx)(C,{purchaseOrder:n,onClose:()=>G(!1),onCreated:()=>{K("Invoice draft created successfully","success"),G(!1)}})]})]})}a.s(["default",()=>F],46397)}];

//# sourceMappingURL=app_%28app%29_purchase-orders_page_tsx_70a5b729._.js.map