module.exports=[15857,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(24017),e=a.i(40695),f=a.i(54161),g=a.i(4720),h=a.i(15618),i=a.i(5050),j=(0,i.createServerReference)("001ccba7b7d2b50adcd38dd3ab2f7553350897616d",i.callServer,void 0,i.findSourceMapURL,"getTenders"),k=(0,i.createServerReference)("6062de3f2264d3df3b323fa374a65ccfa0137c09fe",i.callServer,void 0,i.findSourceMapURL,"awardTender"),l=(0,i.createServerReference)("40e9c18829877c36db595b4cfc13390df40a809246",i.callServer,void 0,i.findSourceMapURL,"requestRevisedBids"),m=a.i(36469),n=a.i(33508);function o({tender:a,onClose:c}){if(!a)return null;let d=Array.isArray(a.bids)?[...a.bids]:[];d.sort((a,b)=>{let c="number"==typeof a.score?a.score:0,d="number"==typeof b.score?b.score:0;return d!==c?d-c:("number"==typeof a.totalPrice?a.totalPrice:Number.MAX_SAFE_INTEGER)-("number"==typeof b.totalPrice?b.totalPrice:Number.MAX_SAFE_INTEGER)});let g=a.evaluationSummary||{},h="number"==typeof g.totalBids?g.totalBids:d.length,i="number"==typeof g.disqualified?g.disqualified:0,j="number"==typeof g.score?g.score:void 0;return(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:c}),(0,b.jsxs)("div",{className:"relative w-full max-w-5xl max-h-[90vh] overflow-y-auto bg-background rounded-lg shadow-2xl mx-4 animate-in fade-in-0 zoom-in-95 duration-200",children:[(0,b.jsxs)("div",{className:"sticky top-0 z-10 bg-background border-b px-6 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Tender Scorecard"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.tenderId," · ",a.title]})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:c,children:(0,b.jsx)(n.X,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Recommended supplier"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:g.recommendedSupplier||"—"})]}),(0,b.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Overall score"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:void 0!==j?`${j}`:"—"})]}),(0,b.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Total bids"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:h})]}),(0,b.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Disqualified"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:i})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h3",{className:"text-sm font-medium",children:"Bid score breakdown"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sorted by score, then price"})]}),(0,b.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-muted/50 text-xs",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left p-3 font-medium",children:"Supplier"}),(0,b.jsx)("th",{className:"text-left p-3 font-medium",children:"Score"}),(0,b.jsx)("th",{className:"text-left p-3 font-medium",children:"Total price"}),(0,b.jsx)("th",{className:"text-left p-3 font-medium",children:"Compliance"}),(0,b.jsx)("th",{className:"text-left p-3 font-medium",children:"Highlights"})]})}),(0,b.jsx)("tbody",{children:0===d.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{className:"p-4 text-center text-muted-foreground text-xs",colSpan:5,children:"No bids available"})}):d.map((a,c)=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"p-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-medium",children:a.supplier||"—"}),g.recommendedSupplier&&a.supplier===g.recommendedSupplier&&(0,b.jsx)(f.Badge,{className:"text-xs",children:"Recommended"})]})}),(0,b.jsx)("td",{className:"p-3",children:"number"==typeof a.score?a.score:"—"}),(0,b.jsx)("td",{className:"p-3",children:"number"==typeof a.totalPrice?`$${a.totalPrice.toLocaleString()}`:"—"}),(0,b.jsx)("td",{className:"p-3",children:a.compliance?(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs",children:a.compliance}):"—"}),(0,b.jsx)("td",{className:"p-3 text-xs text-muted-foreground",children:a.highlights||""})]},c))})]})})]}),(0,b.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,b.jsx)(e.Button,{variant:"outline",onClick:c,children:"Close"})})]})]})]})}function p(){let[a,i]=(0,c.useState)([]),[n,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{!async function(){let a=await j();a.success&&(i(a.data),a.data.length>0&&p(a.data[0])),r(!1)}()},[]),(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)("div",{className:"max-w-[1600px] mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-foreground mb-2",children:"Tenders"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Plan, publish, and evaluate sourcing events across your organization."})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(g.FileText,{className:"w-4 h-4 mr-2"}),"Templates & rules"]}),(0,b.jsxs)(e.Button,{size:"sm",onClick:()=>t(!0),children:[(0,b.jsx)(h.Plus,{className:"w-4 h-4 mr-2"}),"New tender"]})]})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-6 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"View:"})," ",(0,b.jsx)("span",{className:"font-medium",children:"Active & in evaluation"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Stage:"})," ",(0,b.jsx)("span",{className:"font-medium",children:"Open, Evaluation"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Type:"})," ",(0,b.jsx)("span",{className:"font-medium",children:"RFP, RFQ"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Region:"})," ",(0,b.jsx)("span",{className:"font-medium",children:"Global, APAC"})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 mt-3 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:"6 open tenders"}),(0,b.jsx)("span",{children:"2 in final evaluation"}),(0,b.jsx)("span",{children:"Avg. 4.3 bids per tender"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-5 gap-6",children:[(0,b.jsxs)("div",{className:"col-span-2 bg-card border border-border rounded-lg",children:[(0,b.jsxs)("div",{className:"border-b border-border p-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-medium",children:"Sourcing pipeline"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a tender to review participation and evaluation."})]}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Sorted by close date"})]}),(0,b.jsx)("div",{className:"divide-y divide-border",children:q?(0,b.jsx)("div",{className:"p-8 text-center text-muted-foreground text-sm",children:"Loading tenders..."}):0===a.length?(0,b.jsx)("div",{className:"p-8 text-center text-muted-foreground text-sm",children:"No tenders found. Connect to MongoDB to see data."}):a.map(a=>(0,b.jsxs)("button",{onClick:()=>p(a),className:`w-full text-left p-4 hover:bg-accent/50 transition-colors ${n?._id===a._id?"bg-accent":""}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"font-medium text-sm mb-1",children:a.tenderId}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mb-2",children:a.title}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs",children:a.type}),(0,b.jsx)(d.StatusBadge,{status:a.stage||a.status})]})]}),(0,b.jsx)("div",{className:"text-right text-xs text-muted-foreground",children:(0,b.jsxs)("div",{children:[a.bids?.length||0," responses"]})})]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(a.closeDate).toLocaleDateString()})]},a._id))}),(0,b.jsx)("div",{className:"p-3 border-t border-border text-xs text-muted-foreground",children:'Tip: Use "Templates & rules" to standardize scoring and mandatory questions.'})]}),n&&(0,b.jsxs)("div",{className:"col-span-3 bg-card border border-border rounded-lg",children:[(0,b.jsxs)("div",{className:"border-b border-border p-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"font-medium",children:[n.tenderId," · ",n.title]}),(0,b.jsxs)("div",{className:"flex gap-4 text-xs text-muted-foreground mt-1",children:[(0,b.jsxs)("span",{children:["Owner: ",n.owner]}),(0,b.jsxs)("span",{children:["Category: ",n.category]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)(d.StatusBadge,{status:n.stage||n.status}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Draft evaluation"})]})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex gap-4 text-xs",children:[(0,b.jsxs)("span",{children:["Business unit: ",n.businessUnit]}),(0,b.jsxs)("span",{children:["Region: ",n.region]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Overview & key details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-xs mb-1",children:"Sourcing objective"}),(0,b.jsx)("div",{children:n.sourcingObjective})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-xs mb-1",children:"Estimated contract value"}),(0,b.jsx)("div",{className:"font-medium",children:n.estimatedContractValue})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-xs mb-1",children:"Sourcing type"}),(0,b.jsx)("div",{children:n.sourcingType})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-xs mb-1",children:"Key dates"}),(0,b.jsxs)("div",{children:["Published: ",new Date(n.publishedDate).toLocaleDateString()," · Closed: ",new Date(n.closeDate).toLocaleDateString()]})]})]})]}),"evaluation"===String(n.stage||n.status).toLowerCase()&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Evaluation summary"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-xs mb-1",children:"Recommended supplier"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-medium",children:n.recommendedSupplier}),(0,b.jsxs)(f.Badge,{className:"bg-success/20 text-success-foreground",children:["Score: ",n.recommendedSupplierScore," / 100"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-xs mb-1",children:"Total evaluated bids"}),(0,b.jsxs)("div",{className:"font-medium",children:[n.bids?.length||0," bids ·"," ",n.disqualifiedBids||0," disqualified"]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h3",{className:"text-sm font-medium",children:"Commercial comparison"}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Best offer:"," ",(0,b.jsxs)("span",{className:"font-medium",children:[n.bestOfferPrice," / year"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h3",{className:"text-sm font-medium",children:"Risk & compliance"}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,b.jsx)("span",{className:"font-medium",children:n.infoRisks})," ·"," ",n.criticalIssues," critical issues"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Bids & scoring comparison"}),(0,b.jsx)("div",{className:"border border-border rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full text-xs",children:[(0,b.jsx)("thead",{className:"bg-muted/50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left p-3 font-medium",children:"Supplier"}),(0,b.jsx)("th",{className:"text-right p-3 font-medium",children:"Total price / year"}),(0,b.jsx)("th",{className:"text-center p-3 font-medium",children:"Score"}),(0,b.jsx)("th",{className:"text-center p-3 font-medium",children:"Compliance"}),(0,b.jsx)("th",{className:"text-left p-3 font-medium",children:"Highlights"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:n.bids?.map((a,c)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"p-3 font-medium",children:a.supplier}),(0,b.jsx)("td",{className:"p-3 text-right",children:a.price}),(0,b.jsx)("td",{className:"p-3 text-center",children:(0,b.jsx)(f.Badge,{className:0===c?"bg-success/20 text-success-foreground":"bg-muted",children:a.score})}),(0,b.jsx)("td",{className:"p-3 text-center",children:(0,b.jsx)("span",{className:0===c?"text-success":"",children:a.compliance})}),(0,b.jsx)("td",{className:"p-3 text-muted-foreground",children:a.highlights})]},c))})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Timeline & governance"}),(0,b.jsx)("div",{className:"space-y-3",children:n.timeline?.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary mt-1.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:a.title}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.date&&`${a.date} \xb7 `,a.detail]})]})]},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Notes & attachments"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-4",children:n.notes})]}),(0,b.jsxs)("div",{className:"border-t border-border pt-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Next actions"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-4",children:"Confirm your recommendation; award details will be shared with suppliers and downstream teams."}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>v(!0),children:"View full scorecard"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:async()=>{await l(n._id);let a=await j();a.success&&(i(a.data),p(a.data.find(a=>a._id===n._id)||a.data[0]))},children:"Request revised bids"}),(0,b.jsx)(e.Button,{size:"sm",onClick:async()=>{await k(n._id,n.recommendedSupplier);let a=await j();a.success&&(i(a.data),p(a.data.find(a=>a._id===n._id)||a.data[0]))},children:"Award tender"})]})]})]})]})]})]}),(0,b.jsx)("footer",{className:"border-t border-border p-4 flex items-center justify-between text-xs text-muted-foreground",children:(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsxs)("span",{children:["Branch: ",(0,b.jsx)("span",{className:"text-primary",children:"Global HQ"})]}),(0,b.jsxs)("span",{children:["FY24 Budget Utilization: ",(0,b.jsx)("span",{className:"font-medium",children:"68% used"})]})]})}),s&&(0,b.jsx)(m.CreateTenderForm,{onClose:()=>t(!1)}),u&&n&&(0,b.jsx)(o,{tender:n,onClose:()=>v(!1)})]})}a.s(["default",()=>p],15857)}];

//# sourceMappingURL=app_%28app%29_tenders_page_tsx_0d7a6c34._.js.map