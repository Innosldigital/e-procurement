{"version":3,"sources":["../../../../components/notifications-list.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from 'react'\r\nimport { Check, CheckCheck, Trash2 } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Card } from '@/components/ui/card'\r\nimport { \r\n  markAsRead, \r\n  markAllAsRead,\r\n  deleteNotification \r\n} from '@/lib/actions/notification-actions'\r\nimport { useRouter } from 'next/navigation'\r\nimport { cn } from '@/lib/utils'\r\n\r\ninterface Notification {\r\n  _id: string\r\n  type: string\r\n  title: string\r\n  message: string\r\n  actionUrl?: string\r\n  priority: 'low' | 'medium' | 'high' | 'urgent'\r\n  read: boolean\r\n  createdAt: string\r\n}\r\n\r\ninterface NotificationsListProps {\r\n  initialNotifications: Notification[]\r\n}\r\n\r\nexport function NotificationsList({ initialNotifications }: NotificationsListProps) {\r\n  const router = useRouter()\r\n  const [notifications, setNotifications] = useState(initialNotifications)\r\n  const unreadCount = notifications.filter(n => !n.read).length\r\n\r\n  const handleMarkAsRead = async (notificationId: string) => {\r\n    await markAsRead(notificationId)\r\n    setNotifications(prev =>\r\n      prev.map(n => n._id === notificationId ? { ...n, read: true } : n)\r\n    )\r\n    router.refresh()\r\n  }\r\n\r\n  const handleMarkAllAsRead = async () => {\r\n    await markAllAsRead()\r\n    setNotifications(prev => prev.map(n => ({ ...n, read: true })))\r\n    router.refresh()\r\n  }\r\n\r\n  const handleDelete = async (notificationId: string) => {\r\n    await deleteNotification(notificationId)\r\n    setNotifications(prev => prev.filter(n => n._id !== notificationId))\r\n    router.refresh()\r\n  }\r\n\r\n  const getPriorityBadge = (priority: string) => {\r\n    const variants = {\r\n      urgent: 'destructive',\r\n      high: 'default',\r\n      medium: 'secondary',\r\n      low: 'outline'\r\n    }\r\n    return variants[priority as keyof typeof variants] || 'secondary'\r\n  }\r\n\r\n  const formatDate = (date: string) => {\r\n    return new Date(date).toLocaleString()\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"text-sm text-muted-foreground\">\r\n          {unreadCount > 0 ? (\r\n            <span>{unreadCount} unread notification{unreadCount !== 1 ? 's' : ''}</span>\r\n          ) : (\r\n            <span>All caught up!</span>\r\n          )}\r\n        </div>\r\n\r\n        {unreadCount > 0 && (\r\n          <Button \r\n            variant=\"outline\" \r\n            size=\"sm\"\r\n            onClick={handleMarkAllAsRead}\r\n          >\r\n            <CheckCheck className=\"w-4 h-4 mr-2\" />\r\n            Mark all as read\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      {notifications.length === 0 ? (\r\n        <Card className=\"p-12 text-center\">\r\n          <p className=\"text-muted-foreground\">No notifications yet</p>\r\n        </Card>\r\n      ) : (\r\n        <div className=\"space-y-2\">\r\n          {notifications.map((notification) => (\r\n            <Card\r\n              key={notification._id}\r\n              className={cn(\r\n                \"p-4 hover:shadow-md transition-shadow\",\r\n                !notification.read && \"bg-primary/5 border-primary/20\"\r\n              )}\r\n            >\r\n              <div className=\"flex items-start gap-4\">\r\n                <div className=\"flex-1 space-y-2\">\r\n                  <div className=\"flex items-start justify-between gap-4\">\r\n                    <div>\r\n                      <div className=\"flex items-center gap-2 mb-1\">\r\n                        <h3 className={cn(\r\n                          \"font-medium\",\r\n                          !notification.read && \"font-semibold\"\r\n                        )}>\r\n                          {notification.title}\r\n                        </h3>\r\n                        <Badge variant={getPriorityBadge(notification.priority) as any}>\r\n                          {notification.priority}\r\n                        </Badge>\r\n                        {!notification.read && (\r\n                          <Badge variant=\"default\" className=\"bg-blue-500\">\r\n                            New\r\n                          </Badge>\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        {notification.message}\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-2\">\r\n                      {!notification.read && (\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => handleMarkAsRead(notification._id)}\r\n                        >\r\n                          <Check className=\"w-4 h-4 mr-1\" />\r\n                          Mark read\r\n                        </Button>\r\n                      )}\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleDelete(notification._id)}\r\n                        className=\"text-destructive hover:text-destructive\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      {formatDate(notification.createdAt)}\r\n                    </span>\r\n\r\n                    {notification.actionUrl && (\r\n                      <Button \r\n                        variant=\"link\" \r\n                        size=\"sm\"\r\n                        className=\"h-auto p-0\"\r\n                        onClick={() => router.push(notification.actionUrl!)}\r\n                      >\r\n                        View details â†’\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}