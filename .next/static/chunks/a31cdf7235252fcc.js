(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84762,e=>{"use strict";var s=e.i(43476),t=e.i(47163);function d({className:e,...d}){return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,t.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...d})}e.s(["Textarea",()=>d])},61788,e=>{"use strict";var s=e.i(43476),t=e.i(94179),d=e.i(47163);function i({status:e,variant:i}){let r;return(0,s.jsx)(t.Badge,{variant:i||"secondary",className:(0,d.cn)("font-normal",(r=e?.toLowerCase()||"").includes("pending")||r.includes("review")?"bg-warning/20 text-warning-foreground hover:bg-warning/30 border-warning/30":r.includes("approved")||r.includes("active")||r.includes("delivered")||r.includes("closed")?"bg-success/20 text-success-foreground hover:bg-success/30 border-success/30":r.includes("rejected")||r.includes("overdue")||r.includes("critical")||r.includes("high")?"bg-destructive/20 text-destructive hover:bg-destructive/30 border-destructive/30":r.includes("medium")||r.includes("evaluation")||r.includes("open")?"bg-info/20 text-info-foreground hover:bg-info/30 border-info/30":"bg-muted text-muted-foreground hover:bg-muted/80"),children:e})}e.s(["StatusBadge",()=>i])},28541,e=>{"use strict";var s=e.i(43476),t=e.i(71645),d=e.i(61788),i=e.i(67881),r=e.i(94179),a=e.i(78583),n=e.i(7233),l=e.i(95187),c=(0,l.createServerReference)("001ccba7b7d2b50adcd38dd3ab2f7553350897616d",l.callServer,void 0,l.findSourceMapURL,"getTenders"),o=(0,l.createServerReference)("6062de3f2264d3df3b323fa374a65ccfa0137c09fe",l.callServer,void 0,l.findSourceMapURL,"awardTender"),m=(0,l.createServerReference)("40e9c18829877c36db595b4cfc13390df40a809246",l.callServer,void 0,l.findSourceMapURL,"requestRevisedBids"),x=e.i(80600),u=e.i(37727);function h({tender:e,onClose:t}){if(!e)return null;let d=Array.isArray(e.bids)?[...e.bids]:[];d.sort((e,s)=>{let t="number"==typeof e.score?e.score:0,d="number"==typeof s.score?s.score:0;return d!==t?d-t:("number"==typeof e.totalPrice?e.totalPrice:Number.MAX_SAFE_INTEGER)-("number"==typeof s.totalPrice?s.totalPrice:Number.MAX_SAFE_INTEGER)});let a=e.evaluationSummary||{},n="number"==typeof a.totalBids?a.totalBids:d.length,l="number"==typeof a.disqualified?a.disqualified:0,c="number"==typeof a.score?a.score:void 0;return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),(0,s.jsxs)("div",{className:"relative w-full max-w-5xl max-h-[90vh] overflow-y-auto bg-background rounded-lg shadow-2xl mx-4 animate-in fade-in-0 zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"sticky top-0 z-10 bg-background border-b px-6 py-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Tender Scorecard"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.tenderId," · ",e.title]})]}),(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:t,children:(0,s.jsx)(u.X,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Recommended supplier"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:a.recommendedSupplier||"—"})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Overall score"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:void 0!==c?`${c}`:"—"})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Total bids"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:n})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Disqualified"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:l})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"Bid score breakdown"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sorted by score, then price"})]}),(0,s.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{className:"bg-muted/50 text-xs",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-left p-3 font-medium",children:"Supplier"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium",children:"Score"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium",children:"Total price"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium",children:"Compliance"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium",children:"Highlights"})]})}),(0,s.jsx)("tbody",{children:0===d.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"p-4 text-center text-muted-foreground text-xs",colSpan:5,children:"No bids available"})}):d.map((e,t)=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"p-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:e.supplier||"—"}),a.recommendedSupplier&&e.supplier===a.recommendedSupplier&&(0,s.jsx)(r.Badge,{className:"text-xs",children:"Recommended"})]})}),(0,s.jsx)("td",{className:"p-3",children:"number"==typeof e.score?e.score:"—"}),(0,s.jsx)("td",{className:"p-3",children:"number"==typeof e.totalPrice?`$${e.totalPrice.toLocaleString()}`:"—"}),(0,s.jsx)("td",{className:"p-3",children:e.compliance?(0,s.jsx)(r.Badge,{variant:"outline",className:"text-xs",children:e.compliance}):"—"}),(0,s.jsx)("td",{className:"p-3 text-xs text-muted-foreground",children:e.highlights||""})]},t))})]})})]}),(0,s.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,s.jsx)(i.Button,{variant:"outline",onClick:t,children:"Close"})})]})]})]})}function j(){let[e,l]=(0,t.useState)([]),[u,j]=(0,t.useState)(null),[f,p]=(0,t.useState)(!0),[g,b]=(0,t.useState)(!1),[v,N]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{!async function(){let e=await c();e.success&&(l(e.data),e.data.length>0&&j(e.data[0])),p(!1)}()},[]),(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsxs)("div",{className:"max-w-[1600px] mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-foreground mb-2",children:"Tenders"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Plan, publish, and evaluate sourcing events across your organization."})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(a.FileText,{className:"w-4 h-4 mr-2"}),"Templates & rules"]}),(0,s.jsxs)(i.Button,{size:"sm",onClick:()=>b(!0),children:[(0,s.jsx)(n.Plus,{className:"w-4 h-4 mr-2"}),"New tender"]})]})]}),(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-6 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"View:"})," ",(0,s.jsx)("span",{className:"font-medium",children:"Active & in evaluation"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Stage:"})," ",(0,s.jsx)("span",{className:"font-medium",children:"Open, Evaluation"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Type:"})," ",(0,s.jsx)("span",{className:"font-medium",children:"RFP, RFQ"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Region:"})," ",(0,s.jsx)("span",{className:"font-medium",children:"Global, APAC"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 mt-3 text-xs text-muted-foreground",children:[(0,s.jsx)("span",{children:"6 open tenders"}),(0,s.jsx)("span",{children:"2 in final evaluation"}),(0,s.jsx)("span",{children:"Avg. 4.3 bids per tender"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-5 gap-6",children:[(0,s.jsxs)("div",{className:"col-span-2 bg-card border border-border rounded-lg",children:[(0,s.jsxs)("div",{className:"border-b border-border p-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-medium",children:"Sourcing pipeline"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a tender to review participation and evaluation."})]}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Sorted by close date"})]}),(0,s.jsx)("div",{className:"divide-y divide-border",children:f?(0,s.jsx)("div",{className:"p-8 text-center text-muted-foreground text-sm",children:"Loading tenders..."}):0===e.length?(0,s.jsx)("div",{className:"p-8 text-center text-muted-foreground text-sm",children:"No tenders found. Connect to MongoDB to see data."}):e.map(e=>(0,s.jsxs)("button",{onClick:()=>j(e),className:`w-full text-left p-4 hover:bg-accent/50 transition-colors ${u?._id===e._id?"bg-accent":""}`,children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-sm mb-1",children:e.tenderId}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground mb-2",children:e.title}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(r.Badge,{variant:"outline",className:"text-xs",children:e.type}),(0,s.jsx)(d.StatusBadge,{status:e.stage||e.status})]})]}),(0,s.jsx)("div",{className:"text-right text-xs text-muted-foreground",children:(0,s.jsxs)("div",{children:[e.bids?.length||0," responses"]})})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(e.closeDate).toLocaleDateString()})]},e._id))}),(0,s.jsx)("div",{className:"p-3 border-t border-border text-xs text-muted-foreground",children:'Tip: Use "Templates & rules" to standardize scoring and mandatory questions.'})]}),u&&(0,s.jsxs)("div",{className:"col-span-3 bg-card border border-border rounded-lg",children:[(0,s.jsxs)("div",{className:"border-b border-border p-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"font-medium",children:[u.tenderId," · ",u.title]}),(0,s.jsxs)("div",{className:"flex gap-4 text-xs text-muted-foreground mt-1",children:[(0,s.jsxs)("span",{children:["Owner: ",u.owner]}),(0,s.jsxs)("span",{children:["Category: ",u.category]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)(d.StatusBadge,{status:u.stage||u.status}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Draft evaluation"})]})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex gap-4 text-xs",children:[(0,s.jsxs)("span",{children:["Business unit: ",u.businessUnit]}),(0,s.jsxs)("span",{children:["Region: ",u.region]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Overview & key details"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted-foreground text-xs mb-1",children:"Sourcing objective"}),(0,s.jsx)("div",{children:u.sourcingObjective})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted-foreground text-xs mb-1",children:"Estimated contract value"}),(0,s.jsx)("div",{className:"font-medium",children:u.estimatedContractValue})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted-foreground text-xs mb-1",children:"Sourcing type"}),(0,s.jsx)("div",{children:u.sourcingType})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted-foreground text-xs mb-1",children:"Key dates"}),(0,s.jsxs)("div",{children:["Published: ",new Date(u.publishedDate).toLocaleDateString()," · Closed: ",new Date(u.closeDate).toLocaleDateString()]})]})]})]}),"evaluation"===String(u.stage||u.status).toLowerCase()&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Evaluation summary"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted-foreground text-xs mb-1",children:"Recommended supplier"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:u.recommendedSupplier}),(0,s.jsxs)(r.Badge,{className:"bg-success/20 text-success-foreground",children:["Score: ",u.recommendedSupplierScore," / 100"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted-foreground text-xs mb-1",children:"Total evaluated bids"}),(0,s.jsxs)("div",{className:"font-medium",children:[u.bids?.length||0," bids ·"," ",u.disqualifiedBids||0," disqualified"]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"Commercial comparison"}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Best offer:"," ",(0,s.jsxs)("span",{className:"font-medium",children:[u.bestOfferPrice," / year"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"Risk & compliance"}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,s.jsx)("span",{className:"font-medium",children:u.infoRisks})," ·"," ",u.criticalIssues," critical issues"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Bids & scoring comparison"}),(0,s.jsx)("div",{className:"border border-border rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full text-xs",children:[(0,s.jsx)("thead",{className:"bg-muted/50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-left p-3 font-medium",children:"Supplier"}),(0,s.jsx)("th",{className:"text-right p-3 font-medium",children:"Total price / year"}),(0,s.jsx)("th",{className:"text-center p-3 font-medium",children:"Score"}),(0,s.jsx)("th",{className:"text-center p-3 font-medium",children:"Compliance"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium",children:"Highlights"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-border",children:u.bids?.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-3 font-medium",children:e.supplier}),(0,s.jsx)("td",{className:"p-3 text-right",children:e.price}),(0,s.jsx)("td",{className:"p-3 text-center",children:(0,s.jsx)(r.Badge,{className:0===t?"bg-success/20 text-success-foreground":"bg-muted",children:e.score})}),(0,s.jsx)("td",{className:"p-3 text-center",children:(0,s.jsx)("span",{className:0===t?"text-success":"",children:e.compliance})}),(0,s.jsx)("td",{className:"p-3 text-muted-foreground",children:e.highlights})]},t))})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Timeline & governance"}),(0,s.jsx)("div",{className:"space-y-3",children:u.timeline?.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary mt-1.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:e.title}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.date&&`${e.date} \xb7 `,e.detail]})]})]},t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Notes & attachments"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-4",children:u.notes})]}),(0,s.jsxs)("div",{className:"border-t border-border pt-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Next actions"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-4",children:"Confirm your recommendation; award details will be shared with suppliers and downstream teams."}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>N(!0),children:"View full scorecard"}),(0,s.jsx)(i.Button,{variant:"outline",size:"sm",onClick:async()=>{await m(u._id);let e=await c();e.success&&(l(e.data),j(e.data.find(e=>e._id===u._id)||e.data[0]))},children:"Request revised bids"}),(0,s.jsx)(i.Button,{size:"sm",onClick:async()=>{await o(u._id,u.recommendedSupplier);let e=await c();e.success&&(l(e.data),j(e.data.find(e=>e._id===u._id)||e.data[0]))},children:"Award tender"})]})]})]})]})]})]}),(0,s.jsx)("footer",{className:"border-t border-border p-4 flex items-center justify-between text-xs text-muted-foreground",children:(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsxs)("span",{children:["Branch: ",(0,s.jsx)("span",{className:"text-primary",children:"Global HQ"})]}),(0,s.jsxs)("span",{children:["FY24 Budget Utilization: ",(0,s.jsx)("span",{className:"font-medium",children:"68% used"})]})]})}),g&&(0,s.jsx)(x.CreateTenderForm,{onClose:()=>b(!1)}),v&&u&&(0,s.jsx)(h,{tender:u,onClose:()=>N(!1)})]})}e.s(["default",()=>j],28541)}]);