(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84762,e=>{"use strict";var t=e.i(43476),s=e.i(47163);function i({className:e,...i}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...i})}e.s(["Textarea",()=>i])},61788,e=>{"use strict";var t=e.i(43476),s=e.i(94179),i=e.i(47163);function r({status:e,variant:r}){let l;return(0,t.jsx)(s.Badge,{variant:r||"secondary",className:(0,i.cn)("font-normal",(l=e?.toLowerCase()||"").includes("pending")||l.includes("review")?"bg-warning/20 text-warning-foreground hover:bg-warning/30 border-warning/30":l.includes("approved")||l.includes("active")||l.includes("delivered")||l.includes("closed")?"bg-success/20 text-success-foreground hover:bg-success/30 border-success/30":l.includes("rejected")||l.includes("overdue")||l.includes("critical")||l.includes("high")?"bg-destructive/20 text-destructive hover:bg-destructive/30 border-destructive/30":l.includes("medium")||l.includes("evaluation")||l.includes("open")?"bg-info/20 text-info-foreground hover:bg-info/30 border-info/30":"bg-muted text-muted-foreground hover:bg-muted/80"),children:e})}e.s(["StatusBadge",()=>r])},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},308,e=>{"use strict";var t=e.i(43476),s=e.i(71645),i=e.i(67881),r=e.i(80600),l=e.i(37727),a=e.i(7233),n=e.i(27612),d=e.i(23750),c=e.i(10708),o=e.i(84762),x=e.i(62870),m=e.i(95187),u=(0,m.createServerReference)("404879080b783455bfd8761a09511929474115d36f",m.callServer,void 0,m.findSourceMapURL,"createRequisition"),h=e.i(18566);function j({onClose:e}){let r=(0,h.useRouter)(),[m,j]=(0,s.useTransition)(),[p,v]=(0,s.useState)([{id:"1",description:"",quantity:1,unit:"Unit",unitCost:0,total:0}]),g=(e,t,s)=>{v(p.map(i=>{if(i.id===e){let e={...i,[t]:s};return("quantity"===t||"unitCost"===t)&&(e.total=e.quantity*e.unitCost),e}return i}))},f=p.reduce((e,t)=>e+t.total,0),b=async t=>{t.preventDefault();let s=new FormData(t.currentTarget),i=`REQ-${Date.now().toString().slice(-4)}`;s.set("requisitionId",i),s.set("amount",f.toString()),s.set("lineItems",JSON.stringify(p)),s.set("status","Pending approval"),j(async()=>{let t=await u(s);t.success?(r.refresh(),e()):alert(t.error||"Failed to create requisition")})};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-6 border-b",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg md:text-xl font-semibold",children:"Create Requisition"}),(0,t.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground mt-1",children:"Submit a new purchase requisition for approval"})]}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:e,children:(0,t.jsx)(l.X,{className:"h-5 w-5"})})]}),(0,t.jsxs)("form",{onSubmit:b,className:"flex-1 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"p-4 md:p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"requester",children:"Requester Name *"}),(0,t.jsx)(d.Input,{id:"requester",name:"requester",required:!0,placeholder:"Enter requester name"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"branch",children:"Branch *"}),(0,t.jsxs)(x.Select,{name:"branch",required:!0,children:[(0,t.jsx)(x.SelectTrigger,{children:(0,t.jsx)(x.SelectValue,{placeholder:"Select branch"})}),(0,t.jsxs)(x.SelectContent,{children:[(0,t.jsx)(x.SelectItem,{value:"Global HQ",children:"Global HQ"}),(0,t.jsx)(x.SelectItem,{value:"APAC",children:"APAC"}),(0,t.jsx)(x.SelectItem,{value:"EMEA",children:"EMEA"}),(0,t.jsx)(x.SelectItem,{value:"NA",children:"North America"}),(0,t.jsx)(x.SelectItem,{value:"LATAM",children:"LATAM"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"category",children:"Category *"}),(0,t.jsxs)(x.Select,{name:"category",required:!0,children:[(0,t.jsx)(x.SelectTrigger,{children:(0,t.jsx)(x.SelectValue,{placeholder:"Select category"})}),(0,t.jsxs)(x.SelectContent,{children:[(0,t.jsx)(x.SelectItem,{value:"Marketing & events",children:"Marketing & events"}),(0,t.jsx)(x.SelectItem,{value:"IT & Software",children:"IT & Software"}),(0,t.jsx)(x.SelectItem,{value:"Facilities & Office",children:"Facilities & Office"}),(0,t.jsx)(x.SelectItem,{value:"Logistics",children:"Logistics"}),(0,t.jsx)(x.SelectItem,{value:"Professional Services",children:"Professional Services"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"priority",children:"Priority *"}),(0,t.jsxs)(x.Select,{name:"priority",defaultValue:"medium",required:!0,children:[(0,t.jsx)(x.SelectTrigger,{children:(0,t.jsx)(x.SelectValue,{placeholder:"Select priority"})}),(0,t.jsxs)(x.SelectContent,{children:[(0,t.jsx)(x.SelectItem,{value:"low",children:"Low"}),(0,t.jsx)(x.SelectItem,{value:"medium",children:"Medium"}),(0,t.jsx)(x.SelectItem,{value:"high",children:"High"}),(0,t.jsx)(x.SelectItem,{value:"urgent",children:"Urgent"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"neededBy",children:"Needed By Date *"}),(0,t.jsx)(d.Input,{id:"neededBy",name:"neededBy",type:"date",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"costCenter",children:"Cost Center"}),(0,t.jsx)(d.Input,{id:"costCenter",name:"costCenter",placeholder:"e.g., MKT-APAC-042"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"description",children:"Description"}),(0,t.jsx)(o.Textarea,{id:"description",name:"description",placeholder:"Provide additional context or justification for this requisition",rows:3})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:"Line Items"}),(0,t.jsxs)(i.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{v([...p,{id:Date.now().toString(),description:"",quantity:1,unit:"Unit",unitCost:0,total:0}])},children:[(0,t.jsx)(a.Plus,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),(0,t.jsx)("div",{className:"space-y-3",children:p.map((e,s)=>(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 items-start p-3 md:p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 w-full",children:[(0,t.jsxs)("div",{className:"col-span-1 sm:col-span-2 lg:col-span-5 space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-xs",children:"Description"}),(0,t.jsx)(d.Input,{placeholder:"Item description",value:e.description,onChange:t=>g(e.id,"description",t.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-xs",children:"Quantity"}),(0,t.jsx)(d.Input,{type:"number",min:"1",value:e.quantity,onChange:t=>g(e.id,"quantity",Number(t.target.value)),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-xs",children:"Unit Cost ($)"}),(0,t.jsx)(d.Input,{type:"number",min:"0",step:"0.01",value:e.unitCost,onChange:t=>g(e.id,"unitCost",Number(t.target.value)),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{className:"text-xs",children:"Total"}),(0,t.jsx)(d.Input,{value:`$${e.total.toFixed(2)}`,disabled:!0,className:"bg-muted"})]})]}),p.length>1&&(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{var t;return t=e.id,void(p.length>1&&v(p.filter(e=>e.id!==t)))},className:"md:mt-7",children:(0,t.jsx)(n.Trash2,{className:"h-4 w-4 text-destructive"})})]},e.id))}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Total Amount"}),(0,t.jsxs)("span",{className:"text-xl font-bold",children:["$",f.toFixed(2)]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row items-center justify-end gap-3 p-4 md:p-6 border-t bg-muted/50",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:e,disabled:m,children:"Cancel"}),(0,t.jsx)(i.Button,{type:"submit",disabled:m,children:m?"Creating...":"Create Requisition"})]})]})]})})}function p(){let[e,l]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex gap-2 md:gap-3",children:[(0,t.jsx)(i.Button,{variant:"outline",size:"sm",className:"flex-1 sm:flex-none bg-transparent",onClick:()=>l(!0),children:"Create tender"}),(0,t.jsx)(i.Button,{size:"sm",className:"flex-1 sm:flex-none",onClick:()=>n(!0),children:"Create requisition"})]}),e&&(0,t.jsx)(r.CreateTenderForm,{onClose:()=>l(!1)}),a&&(0,t.jsx)(j,{onClose:()=>n(!1)})]})}e.s(["DashboardClient",()=>p,"default",0,p],308)},3018,e=>{"use strict";var t=e.i(43476),s=e.i(71645),i=e.i(70065),r=e.i(67881),l=e.i(23750),a=e.i(62870),n=e.i(47163);function d({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",e),...s})})}function c({className:e,...s}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",e),...s})}function o({className:e,...s}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",e),...s})}function x({className:e,...s}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function m({className:e,...s}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function u({className:e,...s}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}var h=e.i(61788),j=e.i(75254);let p=(0,j.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var v=e.i(37727);let g=(0,j.default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),f=(0,j.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),b=(0,j.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var N=e.i(7486);let y=(0,j.default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var S=e.i(63209);let w=(0,j.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var C=e.i(88844),I=e.i(18566),q=e.i(95187),k=(0,q.createServerReference)("40d5ec424d7ddefdbca60c7f34c06bc37e7740486a",q.callServer,void 0,q.findSourceMapURL,"getRequisitionById");function A({requisitionId:e,onClose:i}){let[l,a]=(0,s.useState)(null),[n,d]=(0,s.useState)(!0),c=(0,I.useRouter)();(0,s.useEffect)(()=>{o()},[e]);let o=async()=>{d(!0);let t=await k(e);t.success&&a(t.data),d(!1)},x=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",m=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e);return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"border-b px-6 py-4 flex items-center justify-between bg-muted/30",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:n?"Loading...":l?.requisitionId||"Requisition Details"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:"View complete requisition information"})]}),(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:i,className:"shrink-0",children:(0,t.jsx)(v.X,{className:"h-5 w-5"})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:n?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"text-muted-foreground",children:"Loading requisition details..."})}):l?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,t.jsx)(h.StatusBadge,{status:l.status}),(0,t.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",children:[(0,t.jsx)(S.AlertCircle,{className:"h-3 w-3"}),l.priority||"Medium"," Priority"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(b,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Requester"}),(0,t.jsx)("div",{className:"font-medium",children:l.requester})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(N.Building2,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Branch"}),(0,t.jsx)("div",{className:"font-medium",children:l.branch})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(y,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Category"}),(0,t.jsx)("div",{className:"font-medium",children:l.category})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(f,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total Amount"}),(0,t.jsx)("div",{className:"font-semibold text-lg",children:m(l.amount)})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(g,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Needed By"}),(0,t.jsx)("div",{className:"font-medium",children:x(l.neededBy)})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(w,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Submitted"}),(0,t.jsx)("div",{className:"font-medium",children:x(l.createdAt||l.date)})]})]})]})]}),l.description&&(0,t.jsxs)("div",{className:"border rounded-lg p-4 bg-muted/30",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Description"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:l.description})]}),l.lineItems&&l.lineItems.length>0&&(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-muted/50 px-4 py-3 border-b",children:(0,t.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[(0,t.jsx)(C.Package,{className:"h-4 w-4"}),"Line Items"]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"border-b bg-muted/30",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left px-4 py-3 font-medium",children:"Description"}),(0,t.jsx)("th",{className:"text-right px-4 py-3 font-medium",children:"Quantity"}),(0,t.jsx)("th",{className:"text-right px-4 py-3 font-medium",children:"Unit Cost"}),(0,t.jsx)("th",{className:"text-right px-4 py-3 font-medium",children:"Total"})]})}),(0,t.jsx)("tbody",{children:l.lineItems.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b last:border-0",children:[(0,t.jsx)("td",{className:"px-4 py-3",children:e.description}),(0,t.jsx)("td",{className:"px-4 py-3 text-right",children:e.quantity}),(0,t.jsx)("td",{className:"px-4 py-3 text-right",children:m(e.unitCost)}),(0,t.jsx)("td",{className:"px-4 py-3 text-right font-medium",children:m(e.total)})]},s))})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[l.costCenter&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Cost Center"}),(0,t.jsx)("div",{className:"text-sm font-medium",children:l.costCenter})]}),l.approvalRoute&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Approval Route"}),(0,t.jsx)("div",{className:"text-sm font-medium",children:l.approvalRoute})]})]})]}):(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"text-muted-foreground",children:"Requisition not found"})})}),(0,t.jsxs)("div",{className:"border-t px-6 py-4 flex items-center justify-end gap-3 bg-muted/30",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:i,children:"Close"}),l&&(0,t.jsx)(r.Button,{onClick:()=>{c.push(`/approvals?itemId=${encodeURIComponent(l.requisitionId)}`)},children:"Open in Approvals"})]})]})})}function L({items:e}){let[n,j]=(0,s.useState)(""),[v,g]=(0,s.useState)(),[f,b]=(0,s.useState)(),[N,y]=(0,s.useState)(null),S=e=>new Date(e).toISOString().slice(0,10),w=e=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e),C=(0,s.useMemo)(()=>e.filter(e=>{let t=n.trim().toLowerCase(),s=!t||e.requisitionId?.toLowerCase().includes(t)||e.requester?.toLowerCase().includes(t),i=!v||e.branch===v,r=!f||e.status===f;return s&&i&&r}).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).slice(0,100),[e,n,v,f]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.CardTitle,{className:"text-base",children:"All requisitions"}),(0,t.jsxs)(i.CardDescription,{className:"text-xs",children:["Showing ",C.length," result(s)"]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{let e=C.map(e=>[e.requisitionId,e.requester,e.branch,S(e.date),e.status,w(e.amount)]),t=e=>'"'+e.replace(/"/g,'""')+'"',s=new Blob([[["Requisition ID","Requester","Branch","Date","Status","Amount"],...e].map(e=>e.map(t).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(s),r=document.createElement("a");r.href=i,r.download="requisitions.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)},children:[(0,t.jsx)(p,{className:"h-4 w-4 mr-2"}),"Export CSV"]})})]}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,t.jsx)(l.Input,{placeholder:"Search by requester or ID",className:"md:col-span-2",value:n,onChange:e=>j(e.target.value)}),(0,t.jsxs)(a.Select,{value:v,onValueChange:e=>g(e),children:[(0,t.jsx)(a.SelectTrigger,{children:(0,t.jsx)(a.SelectValue,{placeholder:"Branch"})}),(0,t.jsxs)(a.SelectContent,{children:[(0,t.jsx)(a.SelectItem,{value:"Global HQ",children:"Global HQ"}),(0,t.jsx)(a.SelectItem,{value:"APAC",children:"APAC"}),(0,t.jsx)(a.SelectItem,{value:"EMEA",children:"EMEA"}),(0,t.jsx)(a.SelectItem,{value:"NA",children:"North America"}),(0,t.jsx)(a.SelectItem,{value:"LATAM",children:"LATAM"})]})]}),(0,t.jsxs)(a.Select,{value:f,onValueChange:e=>b(e),children:[(0,t.jsx)(a.SelectTrigger,{children:(0,t.jsx)(a.SelectValue,{placeholder:"Status"})}),(0,t.jsxs)(a.SelectContent,{children:[(0,t.jsx)(a.SelectItem,{value:"Pending approval",children:"Pending approval"}),(0,t.jsx)(a.SelectItem,{value:"In review",children:"In review"}),(0,t.jsx)(a.SelectItem,{value:"Approved",children:"Approved"}),(0,t.jsx)(a.SelectItem,{value:"Rejected",children:"Rejected"})]})]})]})]}),(0,t.jsx)(i.CardContent,{children:0===C.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No requisitions found."}):(0,t.jsxs)(d,{children:[(0,t.jsx)(c,{children:(0,t.jsxs)(x,{children:[(0,t.jsx)(m,{children:"ID"}),(0,t.jsx)(m,{children:"Requester"}),(0,t.jsx)(m,{children:"Branch"}),(0,t.jsx)(m,{children:"Date"}),(0,t.jsx)(m,{children:"Status"}),(0,t.jsx)(m,{className:"text-right",children:"Amount"})]})}),(0,t.jsx)(o,{children:C.map(e=>(0,t.jsxs)(x,{onClick:()=>y(e._id),className:"cursor-pointer hover:bg-muted/50 transition-colors",children:[(0,t.jsx)(u,{className:"font-medium",children:e.requisitionId}),(0,t.jsx)(u,{children:e.requester}),(0,t.jsx)(u,{className:"text-muted-foreground",children:e.branch}),(0,t.jsx)(u,{className:"text-muted-foreground",children:S(e.date)}),(0,t.jsx)(u,{children:(0,t.jsx)(h.StatusBadge,{status:e.status})}),(0,t.jsxs)(u,{className:"text-right",children:["$",w(e.amount)]})]},e._id))})]})})]}),N&&(0,t.jsx)(A,{requisitionId:N,onClose:()=>y(null)})]})}e.s(["default",()=>L],3018)}]);