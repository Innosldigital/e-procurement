(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80600,e=>{"use strict";var s=e.i(43476),t=e.i(71645),l=e.i(18566),i=e.i(67881),a=e.i(23750),r=e.i(10708),c=e.i(84762),n=e.i(62870),d=e.i(37727),o=e.i(95187),u=(0,o.createServerReference)("408d7f594c904d383107bb8593f1866234419d4b1e",o.callServer,void 0,o.findSourceMapURL,"createTender");function m({onClose:e}){let o=(0,l.useRouter)(),[m,h]=(0,t.useState)(!1),[x,j]=(0,t.useState)({title:"",type:"RFP",category:"",businessUnit:"",region:"",sourcingObjective:"",estimatedValue:"",contractTerm:"",sourcingType:"",invitedSuppliers:"",closeDate:""}),p=async s=>{s.preventDefault(),h(!0);try{let s=await u({...x,estimatedValue:x.estimatedValue?parseFloat(x.estimatedValue):0,invitedSuppliers:x.invitedSuppliers?parseInt(x.invitedSuppliers):0,closeDate:x.closeDate?new Date(x.closeDate):void 0});s.success?(o.refresh(),e()):alert(s.error||"Failed to create tender")}catch(e){console.error("[v0] Error creating tender:",e),alert("Failed to create tender")}finally{h(!1)}},v=(e,s)=>{j(t=>({...t,[e]:s}))};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-background border rounded-lg shadow-lg",children:[(0,s.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b bg-background px-6 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Create new tender"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Plan and publish a sourcing event"})]}),(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:e,disabled:m,children:(0,s.jsx)(d.X,{className:"h-4 w-4"})})]}),(0,s.jsxs)("form",{onSubmit:p,className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold",children:"Basic information"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.Label,{htmlFor:"title",children:"Tender title *"}),(0,s.jsx)(a.Input,{id:"title",placeholder:"e.g., Global marketing automation platform",value:x.title,onChange:e=>v("title",e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.Label,{htmlFor:"type",children:"Tender type *"}),(0,s.jsxs)(n.Select,{value:x.type,onValueChange:e=>v("type",e),children:[(0,s.jsx)(n.SelectTrigger,{id:"type",children:(0,s.jsx)(n.SelectValue,{})}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"RFP",children:"RFP - Request for Proposal"}),(0,s.jsx)(n.SelectItem,{value:"RFQ",children:"RFQ - Request for Quotation"}),(0,s.jsx)(n.SelectItem,{value:"RFI",children:"RFI - Request for Information"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.Label,{htmlFor:"category",children:"Category *"}),(0,s.jsxs)(n.Select,{value:x.category,onValueChange:e=>v("category",e),children:[(0,s.jsx)(n.SelectTrigger,{id:"category",children:(0,s.jsx)(n.SelectValue,{placeholder:"Select category"})}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"Marketing & Strategy",children:"Marketing & Strategy"}),(0,s.jsx)(n.SelectItem,{value:"IT & Software",children:"IT & Software"}),(0,s.jsx)(n.SelectItem,{value:"Facilities & Office",children:"Facilities & Office"}),(0,s.jsx)(n.SelectItem,{value:"Logistics",children:"Logistics"}),(0,s.jsx)(n.SelectItem,{value:"Professional Services",children:"Professional Services"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold",children:"Sourcing details"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.Label,{htmlFor:"businessUnit",children:"Business unit"}),(0,s.jsx)(a.Input,{id:"businessUnit",placeholder:"e.g., Global Marketing",value:x.businessUnit,onChange:e=>v("businessUnit",e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.Label,{htmlFor:"region",children:"Region"}),(0,s.jsxs)(n.Select,{value:x.region,onValueChange:e=>v("region",e),children:[(0,s.jsx)(n.SelectTrigger,{id:"region",children:(0,s.jsx)(n.SelectValue,{placeholder:"Select region"})}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"Global",children:"Global"}),(0,s.jsx)(n.SelectItem,{value:"APAC",children:"APAC"}),(0,s.jsx)(n.SelectItem,{value:"EMEA",children:"EMEA"}),(0,s.jsx)(n.SelectItem,{value:"NA",children:"North America"}),(0,s.jsx)(n.SelectItem,{value:"LATAM",children:"LATAM"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.Label,{htmlFor:"sourcingObjective",children:"Sourcing objective"}),(0,s.jsx)(c.Textarea,{id:"sourcingObjective",placeholder:"Describe the purpose and goals of this tender...",value:x.sourcingObjective,onChange:e=>v("sourcingObjective",e.target.value),rows:3})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.Label,{htmlFor:"estimatedValue",children:"Estimated contract value ($)"}),(0,s.jsx)(a.Input,{id:"estimatedValue",type:"number",placeholder:"450000",value:x.estimatedValue,onChange:e=>v("estimatedValue",e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.Label,{htmlFor:"contractTerm",children:"Contract term"}),(0,s.jsx)(a.Input,{id:"contractTerm",placeholder:"e.g., 3-year term",value:x.contractTerm,onChange:e=>v("contractTerm",e.target.value)})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold",children:"Supplier selection"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.Label,{htmlFor:"sourcingType",children:"Sourcing type"}),(0,s.jsxs)(n.Select,{value:x.sourcingType,onValueChange:e=>v("sourcingType",e),children:[(0,s.jsx)(n.SelectTrigger,{id:"sourcingType",children:(0,s.jsx)(n.SelectValue,{placeholder:"Select type"})}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"Competitive RFP",children:"Competitive RFP - 5 invited suppliers"}),(0,s.jsx)(n.SelectItem,{value:"Competitive RFQ",children:"Competitive RFQ - 3 invited suppliers"}),(0,s.jsx)(n.SelectItem,{value:"Open",children:"Open tender"}),(0,s.jsx)(n.SelectItem,{value:"Negotiated",children:"Negotiated tender"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.Label,{htmlFor:"invitedSuppliers",children:"Number of invited suppliers"}),(0,s.jsx)(a.Input,{id:"invitedSuppliers",type:"number",placeholder:"5",value:x.invitedSuppliers,onChange:e=>v("invitedSuppliers",e.target.value)})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.Label,{htmlFor:"closeDate",children:"Tender close date"}),(0,s.jsx)(a.Input,{id:"closeDate",type:"date",value:x.closeDate,onChange:e=>v("closeDate",e.target.value)})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,s.jsx)(i.Button,{type:"button",variant:"outline",onClick:e,disabled:m,children:"Cancel"}),(0,s.jsx)(i.Button,{type:"submit",disabled:m,children:m?"Creating...":"Create tender"})]})]})]})})}e.s(["CreateTenderForm",()=>m],80600)},308,e=>{"use strict";var s=e.i(43476),t=e.i(71645),l=e.i(67881),i=e.i(80600),a=e.i(37727),r=e.i(7233),c=e.i(27612),n=e.i(23750),d=e.i(10708),o=e.i(84762),u=e.i(62870),m=e.i(95187),h=(0,m.createServerReference)("404879080b783455bfd8761a09511929474115d36f",m.callServer,void 0,m.findSourceMapURL,"createRequisition"),x=e.i(18566);function j({onClose:e}){let i=(0,x.useRouter)(),[m,j]=(0,t.useTransition)(),[p,v]=(0,t.useState)([{id:"1",description:"",quantity:1,unit:"Unit",unitCost:0,total:0}]),g=(e,s,t)=>{v(p.map(l=>{if(l.id===e){let e={...l,[s]:t};return("quantity"===s||"unitCost"===s)&&(e.total=e.quantity*e.unitCost),e}return l}))},b=p.reduce((e,s)=>e+s.total,0),S=async s=>{s.preventDefault();let t=new FormData(s.currentTarget),l=`REQ-${Date.now().toString().slice(-4)}`;t.set("requisitionId",l),t.set("amount",b.toString()),t.set("lineItems",JSON.stringify(p)),t.set("status","Pending approval"),j(async()=>{let s=await h(t);s.success?(i.refresh(),e()):alert(s.error||"Failed to create requisition")})};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-background rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-6 border-b",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg md:text-xl font-semibold",children:"Create Requisition"}),(0,s.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground mt-1",children:"Submit a new purchase requisition for approval"})]}),(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:e,children:(0,s.jsx)(a.X,{className:"h-5 w-5"})})]}),(0,s.jsxs)("form",{onSubmit:S,className:"flex-1 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-4 md:p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm",children:"Basic Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"requester",children:"Requester Name *"}),(0,s.jsx)(n.Input,{id:"requester",name:"requester",required:!0,placeholder:"Enter requester name"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"branch",children:"Branch *"}),(0,s.jsxs)(u.Select,{name:"branch",required:!0,children:[(0,s.jsx)(u.SelectTrigger,{children:(0,s.jsx)(u.SelectValue,{placeholder:"Select branch"})}),(0,s.jsxs)(u.SelectContent,{children:[(0,s.jsx)(u.SelectItem,{value:"Global HQ",children:"Global HQ"}),(0,s.jsx)(u.SelectItem,{value:"APAC",children:"APAC"}),(0,s.jsx)(u.SelectItem,{value:"EMEA",children:"EMEA"}),(0,s.jsx)(u.SelectItem,{value:"NA",children:"North America"}),(0,s.jsx)(u.SelectItem,{value:"LATAM",children:"LATAM"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"category",children:"Category *"}),(0,s.jsxs)(u.Select,{name:"category",required:!0,children:[(0,s.jsx)(u.SelectTrigger,{children:(0,s.jsx)(u.SelectValue,{placeholder:"Select category"})}),(0,s.jsxs)(u.SelectContent,{children:[(0,s.jsx)(u.SelectItem,{value:"Marketing & events",children:"Marketing & events"}),(0,s.jsx)(u.SelectItem,{value:"IT & Software",children:"IT & Software"}),(0,s.jsx)(u.SelectItem,{value:"Facilities & Office",children:"Facilities & Office"}),(0,s.jsx)(u.SelectItem,{value:"Logistics",children:"Logistics"}),(0,s.jsx)(u.SelectItem,{value:"Professional Services",children:"Professional Services"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"priority",children:"Priority *"}),(0,s.jsxs)(u.Select,{name:"priority",defaultValue:"medium",required:!0,children:[(0,s.jsx)(u.SelectTrigger,{children:(0,s.jsx)(u.SelectValue,{placeholder:"Select priority"})}),(0,s.jsxs)(u.SelectContent,{children:[(0,s.jsx)(u.SelectItem,{value:"low",children:"Low"}),(0,s.jsx)(u.SelectItem,{value:"medium",children:"Medium"}),(0,s.jsx)(u.SelectItem,{value:"high",children:"High"}),(0,s.jsx)(u.SelectItem,{value:"urgent",children:"Urgent"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"neededBy",children:"Needed By Date *"}),(0,s.jsx)(n.Input,{id:"neededBy",name:"neededBy",type:"date",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"costCenter",children:"Cost Center"}),(0,s.jsx)(n.Input,{id:"costCenter",name:"costCenter",placeholder:"e.g., MKT-APAC-042"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{htmlFor:"description",children:"Description"}),(0,s.jsx)(o.Textarea,{id:"description",name:"description",placeholder:"Provide additional context or justification for this requisition",rows:3})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm",children:"Line Items"}),(0,s.jsxs)(l.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{v([...p,{id:Date.now().toString(),description:"",quantity:1,unit:"Unit",unitCost:0,total:0}])},children:[(0,s.jsx)(r.Plus,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),(0,s.jsx)("div",{className:"space-y-3",children:p.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 items-start p-3 md:p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 w-full",children:[(0,s.jsxs)("div",{className:"col-span-1 sm:col-span-2 lg:col-span-5 space-y-2",children:[(0,s.jsx)(d.Label,{className:"text-xs",children:"Description"}),(0,s.jsx)(n.Input,{placeholder:"Item description",value:e.description,onChange:s=>g(e.id,"description",s.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{className:"text-xs",children:"Quantity"}),(0,s.jsx)(n.Input,{type:"number",min:"1",value:e.quantity,onChange:s=>g(e.id,"quantity",Number(s.target.value)),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{className:"text-xs",children:"Unit Cost ($)"}),(0,s.jsx)(n.Input,{type:"number",min:"0",step:"0.01",value:e.unitCost,onChange:s=>g(e.id,"unitCost",Number(s.target.value)),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Label,{className:"text-xs",children:"Total"}),(0,s.jsx)(n.Input,{value:`$${e.total.toFixed(2)}`,disabled:!0,className:"bg-muted"})]})]}),p.length>1&&(0,s.jsx)(l.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{var s;return s=e.id,void(p.length>1&&v(p.filter(e=>e.id!==s)))},className:"md:mt-7",children:(0,s.jsx)(c.Trash2,{className:"h-4 w-4 text-destructive"})})]},e.id))}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Total Amount"}),(0,s.jsxs)("span",{className:"text-xl font-bold",children:["$",b.toFixed(2)]})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row items-center justify-end gap-3 p-4 md:p-6 border-t bg-muted/50",children:[(0,s.jsx)(l.Button,{type:"button",variant:"outline",onClick:e,disabled:m,children:"Cancel"}),(0,s.jsx)(l.Button,{type:"submit",disabled:m,children:m?"Creating...":"Create Requisition"})]})]})]})})}function p(){let[e,a]=(0,t.useState)(!1),[r,c]=(0,t.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-2 md:gap-3",children:[(0,s.jsx)(l.Button,{variant:"outline",size:"sm",className:"flex-1 sm:flex-none bg-transparent",onClick:()=>a(!0),children:"Create tender"}),(0,s.jsx)(l.Button,{size:"sm",className:"flex-1 sm:flex-none",onClick:()=>c(!0),children:"Create requisition"})]}),e&&(0,s.jsx)(i.CreateTenderForm,{onClose:()=>a(!1)}),r&&(0,s.jsx)(j,{onClose:()=>c(!1)})]})}e.s(["DashboardClient",()=>p,"default",0,p],308)}]);